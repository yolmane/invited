(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-widget-app","map-widget-panorama-player-banner"],{8009:(e,t,n)=>{e.exports=n.p+"_/1dc3224c4ea15889c76b318e4680fb58.svg"},3213:(e,t,n)=>{e.exports=n.p+"_/ab7391324343c1f6df9091d58f0855ec.svg"},670:(e,t,n)=>{e.exports=n.p+"_/a7fd93c57ec740cb8aae686497f4c2f0.svg"},3919:(e,t,n)=>{e.exports=n.p+"_/0412fbd0e0990ad0b7659329ba895140.svg"},3938:(e,t,n)=>{e.exports=n.p+"_/45dcfb2d453aa2f246723e80b2d5f8fc.svg"},4123:(e,t,n)=>{e.exports=n.p+"_/fd161c881e6392111418a1036fe1188e.svg"},2606:(e,t,n)=>{e.exports=n.p+"_/ebe60c9063e4a91162d1366e790ea391.svg"},4373:(e,t,n)=>{e.exports=n.p+"_/7f78fe3f36223c298be58eb812e95646.svg"},7022:(e,t,n)=>{e.exports=n.p+"_/5cf17060c6672d32fb90b652cc8d17f0.svg"},5119:(e,t,n)=>{e.exports=n.p+"_/2e1750eb108b5881e5577c7e08041e3f.svg"},8286:(e,t,n)=>{e.exports=n.p+"_/7485047d3440076f2f17ebb52a011c9c.png"},5111:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},9500:(e,t,n)=>{e.exports=n.p+"_/9dae14af44a24ba50a1bf841f2d22144.png"},5551:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},8755:(e,t,n)=>{e.exports=n.p+"_/9c80a04cdee2564f1b348f2c942570e5.png"},6057:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},6176:(e,t,n)=>{e.exports=n.p+"_/db96e0b37fb683edb082b6d22cd47375.png"},8776:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},2621:(e,t,n)=>{e.exports=n.p+"_/9d7d9192162a766707427f0fdfad6e69.png"},8704:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},264:(e,t,n)=>{e.exports=n.p+"_/30566ea95b3b85e11fdf731ad19d0cb6.png"},728:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},4609:(e,t,n)=>{e.exports=n.p+"_/00dbdb577dd780ef99cebd89eabff5b0.png"},1512:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},211:(e,t,n)=>{e.exports=n.p+"_/6b36feaa685efb371af0a08ebce07269.png"},2501:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},5642:(e,t,n)=>{e.exports=n.p+"_/74ca6ea4b76200fd171c44aa5a49f5a8.png"},9627:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},7204:(e,t,n)=>{e.exports=n.p+"_/4107b60439ecfb91bb4f01454bb365e2.png"},5055:(e,t,n)=>{e.exports=n.p+"_/dff25d38edaaaed43455e2838501c7d2.png"},325:(e,t,n)=>{e.exports=n.p+"_/581d90e08cdba960142fcabc777c10ad.svg"},561:(e,t,n)=>{e.exports=n.p+"_/d7eede432ce185c2bcdea2a81dd73d60.svg"},3331:(e,t,n)=>{e.exports=n.p+"_/982f21b161efbb26f879ac8dcf5bc613.svg"},251:(e,t,n)=>{e.exports=n.p+"_/88dd6621d29f63b3bcd11823a075bab8.svg"},4050:(e,t,n)=>{e.exports=n.p+"_/6dfdf3e1f699e358e2a45696b5910bfc.svg"},5701:(e,t,n)=>{e.exports=n.p+"_/30a6860b000faf67b1e246c0be9a9886.svg"},5097:(e,t,n)=>{e.exports=n.p+"_/f869888cf7cada800b61fc42b9a84b32.svg"},1791:(e,t,n)=>{e.exports=n.p+"_/2288e6eacf3c5cc628de46cd146ffc9d.svg"},3988:()=>{},1784:()=>{},8166:function(e){var t;t=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,o,i,a){(function t(n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=r-o+1,c=Math.log(s),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),p=Math.max(o,Math.floor(r-l*u/s+d)),m=Math.min(i,Math.floor(r+(s-l)*u/s+d));t(n,r,p,m,a)}var f=n[r],h=o,v=i;for(e(n,o,r),a(n[i],f)>0&&e(n,o,i);h<v;){for(e(n,h,v),h++,v--;0>a(n[h],f);)h++;for(;a(n[v],f)>0;)v--}0===a(n[o],f)?e(n,o,v):e(n,++v,i),v<=r&&(o=v+1),r<=v&&(i=v-1)}})(n,r,o||0,i||n.length-1,a||t)}},e.exports=t()},8741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.293 3.293a1 1 0 0 0 0 1.414L6.586 8l-3.293 3.293a1 1 0 0 0 1.414 1.414L8 9.414l3.293 3.293a1 1 0 0 0 1.414-1.414L9.414 8l3.293-3.293a1 1 0 1 0-1.414-1.414L8 6.586 4.707 3.293a1 1 0 0 0-1.414 0z" fill="currentColor"/></svg>'},5510:(e,t,n)=>{"use strict";e.exports=o,e.exports.default=o;var r=n(8166);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,r,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<n;a++)i=e.children[a],s(o,e.leaf?r(i):i);return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h(e,t,n,o,i){for(var a,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=o||(r(e,a=t+Math.ceil((n-t)/o/2)*o,t,n,i),s.push(t,a,a,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!m(e,t))return n;for(var o,i,a,s,l=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],m(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):p(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!m(e,t))return!1;for(var r,o,i,a,s=[];t;){for(r=0,o=t.children.length;r<o;r++)if(i=t.children[r],m(e,a=t.leaf?n(i):i)){if(t.leaf||p(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(e,t){if(!e)return this;for(var n,r,o,i,a=this.data,s=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),i=!0),a.leaf&&-1!==(o=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return -1}(e,a.children,t))){a.children.splice(o,1),l.push(a),this._condense(l);break}!i&&!a.leaf&&p(a,s)?(l.push(a),c.push(n),n=0,r=a,a=a.children[0]):r?(n++,a=r.children[n],i=!1):a=null}return this},toBBox:function(e){return e},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var o,a=n-t+1,s=this._maxEntries;if(a<=s)return i(o=f(e.slice(t,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(o=f([])).leaf=!1,o.height=r;var l,c,u,d,p=Math.ceil(a/s),m=p*Math.ceil(Math.sqrt(s));for(h(e,t,n,m,this.compareMinX),l=t;l<=n;l+=m)for(u=Math.min(l+m-1,n),h(e,l,u,p,this.compareMinY),c=l;c<=u;c+=p)d=Math.min(c+p-1,u),o.children.push(this._build(e,c,d,r-1));return i(o,this.toBBox),o},_chooseSubtree:function(e,t,n,r){for(var o,i,a,s,l,c,d,p;r.push(t),!t.leaf&&r.length-1!==n;){for(o=0,d=p=1/0,i=t.children.length;o<i;o++)l=u(a=t.children[o]),(c=(Math.max(a.maxX,e.maxX)-Math.min(a.minX,e.minX))*(Math.max(a.maxY,e.maxY)-Math.min(a.minY,e.minY))-l)<p?(p=c,d=l<d?l:d,s=a):c===p&&l<d&&(d=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,o=n?e:r(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),s(a,o);t>=0;)if(i[t].children.length>this._maxEntries)this._split(i,t),t--;else break;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,i(n,this.toBBox),i(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,o,i,s,l,c,d,p;for(c=d=1/0,r=t;r<=n-t;r++)s=function(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(o=a(e,0,r,this.toBBox),i=a(e,r,n,this.toBBox)),l=u(o)+u(i),s<c?(c=s,p=r,d=l<d?l:d):s===c&&l<d&&(d=l,p=r);return p},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:l,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var o,i,l=this.toBBox,c=a(e,0,t,l),u=a(e,n-t,n,l),p=d(c)+d(u);for(o=t;o<n-t;o++)i=e.children[o],s(c,e.leaf?l(i):i),p+=d(c);for(o=n-t-1;o>=t;o--)i=e.children[o],s(u,e.leaf?l(i):i),p+=d(u);return p},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():i(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=Function("a","b",t.join(e[0])),this.compareMinY=Function("a","b",t.join(e[1])),this.toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},8216:(e,t,n)=>{"use strict";n.d(t,{$j:()=>U,I0:()=>B});var r=n(7363),o=n.n(r),i=o().createContext(null),a=function(e){e()},s={notify:function(){},get:function(){return[]}},l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,c=n(7462),u=n(3366),d=n(8679),p=n.n(d),m=n(2973),f=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],h=["reactReduxForwardedRef"],v=[],g=[null,null];function _(e,t){var n=e[1];return[t.payload,n+1]}function y(e,t,n){l(function(){return e.apply(void 0,t)},n)}function b(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function E(e,t,n,r,o,i,a,s,l,c){if(e){var u=!1,d=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,o.current)}catch(u){n=u,d=u}n||(d=null),e===i.current?a.current||l():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var w=function(){return[null,0]};function S(e,t){void 0===t&&(t={});var n=t,l=n.getDisplayName,d=void 0===l?function(e){return"ConnectAdvanced("+e+")"}:l,S=n.methodName,C=void 0===S?"connectAdvanced":S,R=n.renderCountProp,P=void 0===R?void 0:R,k=n.shouldHandleStateChanges,x=void 0===k||k,I=n.storeKey,M=void 0===I?"store":I,T=(n.withRef,n.forwardRef),Z=void 0!==T&&T,D=n.context,L=void 0===D?i:D,A=(0,u.Z)(n,f);return function(t){var n=t.displayName||t.name||"Component",i=d(n),l=(0,c.Z)({},A,{getDisplayName:d,methodName:C,renderCountProp:P,shouldHandleStateChanges:x,storeKey:M,displayName:i,wrappedComponentName:n,WrappedComponent:t}),f=A.pure,S=f?r.useMemo:function(e){return e()};function R(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=(0,u.Z)(n,h);return[n.context,e,t]},[n]),d=i[0],p=i[1],f=i[2],C=(0,r.useMemo)(function(){return d&&d.Consumer&&(0,m.isContextConsumer)(o().createElement(d.Consumer,null))?d:L},[d,L]),R=(0,r.useContext)(C),P=!!n.store&&!!n.store.getState&&!!n.store.dispatch;R&&R.store;var k=P?n.store:R.store,I=(0,r.useMemo)(function(){return e(k.dispatch,l)},[k]),M=(0,r.useMemo)(function(){if(!x)return g;var e=function(e,t){var n,r=s;function o(){l.onStateChange&&l.onStateChange()}function i(){if(!n){var i,s,l;n=t?t.addNestedSub(o):e.subscribe(o),i=a,s=null,l=null,r={clear:function(){s=null,l=null},notify:function(){i(function(){for(var e=s;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=s;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=l={callback:e,next:null,prev:l};return n.prev?n.prev.next=n:s=n,function(){t&&null!==s&&(t=!1,n.next?n.next.prev=n.prev:l=n.prev,n.prev?n.prev.next=n.next:s=n.next)}}}}}var l={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return!!n},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=s)},getListeners:function(){return r}};return l}(k,P?null:R.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[k,P,R]),T=M[0],Z=M[1],D=(0,r.useMemo)(function(){return P?R:(0,c.Z)({},R,{subscription:T})},[P,R,T]),A=(0,r.useReducer)(_,v,w),N=A[0][0],z=A[1];if(N&&N.error)throw N.error;var U=(0,r.useRef)(),F=(0,r.useRef)(f),O=(0,r.useRef)(),q=(0,r.useRef)(!1),B=S(function(){return O.current&&f===F.current?O.current:I(k.getState(),f)},[k,N,f]);y(b,[F,U,q,f,B,O,Z]),y(E,[x,k,T,I,F,U,q,O,Z,z],[k,T,I]);var H=(0,r.useMemo)(function(){return o().createElement(t,(0,c.Z)({},B,{ref:p}))},[p,t,B]);return(0,r.useMemo)(function(){return x?o().createElement(C.Provider,{value:D},H):H},[C,H,D])}var k=f?o().memo(R):R;if(k.WrappedComponent=t,k.displayName=R.displayName=i,Z){var I=o().forwardRef(function(e,t){return o().createElement(k,(0,c.Z)({},e,{reactReduxForwardedRef:t}))});return I.displayName=i,I.WrappedComponent=t,p()(I,t)}return p()(k,t)}}function C(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function R(e,t){if(C(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!C(e[n[o]],t[n[o]]))return!1;return!0}function P(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function k(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function x(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=k(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=k(o),o=r(t,n)),o},r}}let I=[function(e){return"function"==typeof e?x(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:P(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?P(function(t){return function(e,t){var n={};for(var r in e)!function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})}(r);return n}(e,t)}):void 0}],M=[function(e){return"function"==typeof e?x(e,"mapStateToProps"):void 0},function(e){return e?void 0:P(function(){return{}})}];function T(e,t,n){return(0,c.Z)({},n,e,t)}let Z=[function(e){return"function"==typeof e?function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?o&&i(l,r)||(r=l):(a=!0,r=l),r}}:void 0},function(e){return e?void 0:function(){return T}}];var D=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function L(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=(0,u.Z)(t,D),a=n(e,i),s=r(e,i),l=o(e,i);return(i.pure?function(e,t,n,r,o){var i,a,s,l,c,u=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,m=!1;return function(o,f){var h,v,g,_;return m?(g=!d(f,a),_=!u(o,i),(i=o,a=f,g&&_)?(s=e(i,a),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):g?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):(_&&(v=!p(h=e(i,a),s),s=h,v&&(c=n(s,l,a))),c)):(s=e(i=o,a=f),l=t(r,a),c=n(s,l,a),m=!0,c)}}:function(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}})(a,s,l,e,i)}var A=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function N(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function z(e,t){return e===t}let U=function(e){var t={},n=t.connectHOC,r=void 0===n?S:n,o=t.mapStateToPropsFactories,i=void 0===o?M:o,a=t.mapDispatchToPropsFactories,s=void 0===a?I:a,l=t.mergePropsFactories,d=void 0===l?Z:l,p=t.selectorFactory,m=void 0===p?L:p;return function(e,t,n,o){void 0===o&&(o={});var a=o,l=a.pure,p=a.areStatesEqual,f=a.areOwnPropsEqual,h=void 0===f?R:f,v=a.areStatePropsEqual,g=void 0===v?R:v,_=a.areMergedPropsEqual,y=void 0===_?R:_,b=(0,u.Z)(a,A),E=N(e,i,"mapStateToProps"),w=N(t,s,"mapDispatchToProps"),S=N(n,d,"mergeProps");return r(m,(0,c.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:E,initMapDispatchToProps:w,initMergeProps:S,pure:void 0===l||l,areStatesEqual:void 0===p?z:p,areOwnPropsEqual:h,areStatePropsEqual:g,areMergedPropsEqual:y},b))}}();function F(){return(0,r.useContext)(i)}function O(e){void 0===e&&(e=i);var t=e===i?F:function(){return(0,r.useContext)(e)};return function(){return t().store}}var q=O(),B=function(e){void 0===e&&(e=i);var t=e===i?q:O(e);return function(){return t().dispatch}}();a=n(1533).unstable_batchedUpdates},8359:(e,t)=>{"use strict";var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,l=60110,c=60112,u=60113,d=60120,p=60115,m=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;n=f("react.element"),r=f("react.portal"),o=f("react.fragment"),i=f("react.strict_mode"),a=f("react.profiler"),s=f("react.provider"),l=f("react.context"),c=f("react.forward_ref"),u=f("react.suspense"),d=f("react.suspense_list"),p=f("react.memo"),m=f("react.lazy"),f("react.block"),f("react.server.block"),f("react.fundamental"),f("react.debug_trace_mode"),f("react.legacy_hidden")}t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case m:case p:case s:return e;default:return t}}case r:return t}}}(e)===l}},2973:(e,t,n)=>{"use strict";e.exports=n(8359)},4332:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var o=n(7363);function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i,a,s=(0,o.useRef)(0),l=(i=(0,o.useRef)(!1),a=(0,o.useCallback)(function(){return i.current},[]),(0,o.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]),a),c=(0,o.useState)(n),u=c[0],d=c[1];return[u,(0,o.useCallback)(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=++s.current;return d(function(e){return r(r({},e),{loading:!0})}),e.apply(void 0,t).then(function(e){return l()&&o===s.current&&d({value:e,loading:!1}),e},function(e){return l()&&o===s.current&&d({error:e,loading:!1}),e})},t)]}},8127:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7363);let o=function(e){(0,r.useEffect)(e,[])}},6003:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8127);let o=function(e){(0,r.Z)(function(){e()})}},7823:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7363),o=n(8127);let i=function(e){var t=(0,r.useRef)(e);t.current=e,(0,o.Z)(function(){return function(){return t.current()}})}},7839:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7363);let o=function(e,t){var n,o=(n=(0,r.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,r.useEffect)(function(){if(!o)return e()},t)}},4243:(e,t,n)=>{"use strict";n.d(t,{H:()=>eS});var r=n(4788),o=n(8188),i=n(1912),a=n(5877),s=n.n(a),l=n(5731),c=n(2690),u=n(8067),d=n(7575),p=n(1250),m=n(1354),f=n(3484),h=n(8847);function v(e,t){var n=e.chain,r=t.mapLocation,o=r.center,i=r.span,a=r.zoom,s=g({searchType:"TEXT",text:n?"chain_id:("+n+")":e.text&&String(e.text),displayText:n?e.text:e["display-text"],correctMisspell:e.noreask?0:void 0,origin:e.source||"url",center:(0,l.P)(e.sll)||o,span:(0,l.P)(e.sspn)||i,zoom:parseInt(e.z,10)||a,sort:e.sort,context:e.sctx,filters:e.filter?e.filter.split(";"):void 0},t),c=s[0];if(c&&(0,h.d)(t)&&(c.request.snippets=t.search.snippets.filter(function(e){return"related_adverts/1.x"!==e}),c.request.maxadv=0),c&&e.debug.includes("bounds")&&(c.showDebugBounds=!0),c){var u=m.As(c)?c.results:void 0;if(f.U5(null==u?void 0:u.filters)){var d=t.mapLocation;c.mapLocationRequest={center:d.center,zoom:d.zoom,bounds:d.bounds,forceApply:!0}}}return s}function g(e,t){var n=t.searchPreloadedResults;if(n){var r=n.branding;(null==r?void 0:r.displayText)&&(e.displayText=r.displayText);var o=m.ql(e.text||"");return[{request:e,results:n,meta:"category"===t.landing.id||"search"===t.landing.id&&(!o||(null==r?void 0:r.displayText))?t.meta:void 0}]}return[{request:e}]}let _=function(e,t){if((null==(r=t.searchPreloadedResults)?void 0:r.exactResult)&&"toponym"===t.searchPreloadedResults.exactResult.type||(e.where?o=(n=(0,l.P)(e.where))?g({searchType:"BUSINESS_LIST",where:n,origin:e.source||"url"},t):[]:e.text&&(o=v(e,t)),!o||0===o.length))return[];var n,r,o,i=o[o.length-1];return i.request.disallowZoom=!0,t.query["show-filters-panel"]&&(i.filterPanelStack=[{type:"list"},{type:"filter",id:t.query["show-filters-panel"]}]),o};n(9297);var y=n(7358);n(5650);var b={common:68,portal:120};n(980);var E={narrow:384,second:384,wide:800},w=(E.second,E.narrow,b.common,b.portal,E.narrow,E.wide,n(7434)),S=n(6102),C=n(9920),R=n(2370),P=n(4381);n(3647),n(8614);var k=n(3272);function x(e){return"toponym"===e.type||"business"===e.type?e.displayCoordinates:e.coordinates}function I(e){var t=e.query["feedback-context"],n=e.query["feedback-client-context"],r=Array.isArray(t)?t[0]:t,o=Array.isArray(n)?n[0]:n;return{formContextId:k.Cb.includes(r)?r:void 0,clientContextId:o?String(o):void 0}}var M={"organization/add":"open","organization/opened":"open","organization/closed/permanently":"closed_permanently","organization/closed/temporary":"closed_temporary","organization/moved":"moved","organization/closed/unknown":"closed_unknown"},T=n(3317),Z=n(7904);let D=function(e,t,n){"__proto__"==t&&Z.Z?(0,Z.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var L=n(9651),A=Object.prototype.hasOwnProperty;let N=function(e,t,n){var r=e[t];A.call(e,t)&&(0,L.Z)(r,n)&&(void 0!==n||t in e)||D(e,t,n)};var z=n(4577),U=n(6009),F=n(7226),O=n(2281);let q=function(e,t,n,r){if(!(0,F.Z)(e))return e;t=(0,z.Z)(t,e);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var l=(0,O.Z)(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(o!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=(0,F.Z)(u)?u:(0,U.Z)(t[o+1])?[]:{})}N(s,l,c),s=s[l]}return e},B=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=(0,T.Z)(e,a);n(s,a)&&q(i,(0,z.Z)(a,e),s)}return i};var H=n(4262),W=n(7961),G=n(3948),j=n(22),V=function(e){return(0,j.Z)((0,G.Z)(e,void 0,W.Z),e+"")}(function(e,t){return null==e?{}:B(e,t,function(t,n){return(0,H.Z)(e,n)})}),Y=/(\d+)(?: (\S+))?/,X=/(\d+)[–-](\d+)(?: (\S+))?/,K=n(6897),$={walk:"pedestrian",transport:"masstransit",transfer:"masstransit"};function J(e){var t=e.routerResponse.routes[e.activeRouteIndex],n=null!==e.activeCargoPresetId;return"auto"===t.type&&n?"truck":t.type}function Q(e){return e?Number(e)||0:void 0}var ee={open:"open","temporary-closed":"closed_temporary","permanent-closed":"closed_permanently","possible-closed":"closed_temporary"},et={"entrance/add":function(e){return{answerData:{name:"",coordinates:e.coordinates},questionData:void 0}},"address/add":function(e){return{answerData:{name:"",addressString:"",coordinates:e.coordinates},questionData:void 0}},"road/add":function(e){return{answerData:{name:"",address:[],points:[],coordinates:e.coordinates},questionData:void 0}},"other/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"transit/stop/add":function(e){return{answerData:{uri:"",name:"",lines:[],coordinates:e.coordinates},questionData:void 0}},"parking/add":function(e){return{answerData:{entrances:[],coordinates:e.coordinates},questionData:void 0}},"barrier/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"fence/add":function(e){return{answerData:{points:[],gates:[],coordinates:e.coordinates},questionData:void 0}},"crosswalk/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"gate/add":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}},"provider/add":function(e){return{answerData:{name:"",siteUrl:"",text:"",uri:"",coordinates:e.coordinates},questionData:void 0}},"assignment/address/add":function(e){var t,n;return{answerData:{name:"",address:[{kind:"street",name:(null==(t=e.result.compositeAddress)?void 0:t.street)||""},{kind:"house",name:(null==(n=e.result.compositeAddress)?void 0:n.house)||""}],coordinates:e.coordinates||e.result.displayCoordinates},questionData:void 0}},"assignment/settlement/scheme/add":function(e){return{answerData:{name:"",address:[],coordinates:e.coordinates},questionData:void 0}},"object/other":function(){return{answerData:{},questionData:void 0}},"address/edit":function(e){var t=e.result.hasEmptyAddress?"":e.result.address;return{answerData:{name:e.result.title,addressString:t,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:e.result.title,addressString:t,coordinates:e.result.displayCoordinates}}},"entrance/edit":function(e){var t,n;return{answerData:{kind:"original",name:null==(t=e.result.compositeAddress)?void 0:t.entrance,coordinates:e.coordinates||e.result.displayCoordinates},questionData:{name:null==(n=e.result.compositeAddress)?void 0:n.entrance,coordinates:e.result.displayCoordinates}}},"object/location/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"object/name/edit":function(e){return{answerData:{name:e.result.title,coordinates:e.result.displayCoordinates},questionData:{name:e.result.title,coordinates:e.result.displayCoordinates}}},"object/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/barrier/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/gate/edit":function(e){return{answerData:{coordinates:e.coordinates||e.result.displayCoordinates},questionData:{coordinates:e.result.displayCoordinates}}},"assignment/entrance/edit":function(e){return{answerData:{kind:"original",name:e.result.name,coordinates:e.result.displayCoordinates||e.coordinates},questionData:{name:e.result.name,coordinates:e.result.displayCoordinates}}},"assignment/organization/status":function(e){return{answerData:en(e),questionData:en(e)}},"transit/stop/not-found":function(e){return{answerData:{},questionData:{coordinates:e.result.coordinates}}},"transit/stop/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=ei(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=ei(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"transit/stop/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=ei(e.result))?void 0:t.coordinates)},questionData:{coordinates:x(e.result)}}},"transit/stop/route/incorrect":function(e){var t,n,r=ei(e.result);return{answerData:{uri:(null==r?void 0:null==(t=r.searchResult)?void 0:t.uri)||"",name:null==r?void 0:r.name,coordinates:e.coordinates||(null==r?void 0:r.coordinates)||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]},questionData:{uri:(null==r?void 0:null==(n=r.searchResult)?void 0:n.uri)||"",name:(null==r?void 0:r.name)||"",coordinates:(null==r?void 0:r.coordinates)||e.coordinates||e.result.coordinates,lines:(null==r?void 0:r.transports.map(function(e){return{uri:e.uri||"",threads:e.threads.map(function(e){return{threadId:e.threadId}})}}))||[]}}},"transit/stop/other":function(){return{answerData:{},questionData:void 0}},"subway/not-found":function(){return{answerData:{},questionData:void 0}},"subway/name/edit":function(e){var t,n;return{answerData:{name:(null==(t=ei(e.result))?void 0:t.name)||"",coordinates:e.result.coordinates},questionData:{name:(null==(n=ei(e.result))?void 0:n.name)||"",coordinates:e.result.coordinates}}},"subway/location/edit":function(e){var t;return{answerData:{coordinates:e.coordinates||(null==(t=ei(e.result))?void 0:t.coordinates)},questionData:{coordinates:x(e.result)}}},"subway/other":function(){return{answerData:{},questionData:void 0}},"organization/add":function(e){return{answerData:er(en(e),e.type),questionData:void 0}},"organization/edit-info":function(e){return{answerData:en(e),questionData:en(e)}},"organization/other":function(e){return{answerData:en(e),questionData:en(e)}},"organization/closed-full":function(e){return{answerData:en(e),questionData:en(e)}},"organization/closed/permanently":function(e){return{answerData:er(en(e),e.type),questionData:en(e)}},"organization/closed/temporary":function(e){return{answerData:er(en(e),e.type),questionData:en(e)}},"organization/closed/unknown":function(e){return{answerData:er(en(e),e.type),questionData:en(e)}},"organization/opened":function(e){return{answerData:er(en(e),e.type),questionData:en(e)}},"organization/moved":function(e){return{answerData:er(en(e),e.type),questionData:en(e)}},"organization/location/edit":function(e){return{answerData:en(e),questionData:en(e)}},"organization/edit-accessibility":function(e){return{answerData:en(e),questionData:en(e)}},"route/edit/better":function(e,t){return{answerData:{segments:[]},questionData:eo(t.routeStackItem)}},"route/incorrect/road-closed":function(e,t){return{answerData:{type:"no_road",coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"route/incorrect/poor-condition":function(e,t){return{answerData:{type:"poor_condition",coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"route/incorrect/prohibiting-sign":function(e,t){return{answerData:{type:"prohibiting_sign",vehicleRestrictions:{},coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"route/incorrect/obstruction":function(e,t){return{answerData:{type:"obstruction",coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"route/incorrect/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"route/other":function(e,t){return{answerData:{type:"other",coordinates:e.coordinates},questionData:eo(t.routeStackItem)}},"spot/other":function(e){return{answerData:{coordinates:e.coordinates},questionData:void 0}}};function en(e){var t,n,r,o,i,a,s,l,c,u,d,p,m,f,h,v=(e||{}).result;return v&&"type"in v&&"business"===v.type?(i=v.categories,a=v.urls,s=v.socialLinks,{id:v.id,name:v.title,status:ee[v.status]||"open",address:v.fullAddress,categories:(void 0===i?[]:i).map(function(e){return{id:e.id,name:e.name}}),coordinates:v.displayCoordinates,phones:null==(n=v.phones)?void 0:n.map(function(e){return e.number}),urls:(void 0===a?[]:a).concat((void 0===s?[]:s).map(function(e){return e.href})),hours:v.workingTime&&Object.keys(t=v.workingTime.reduce(function(e,t,n){if(t){var r={dayOfWeek:P.sb[n],breaks:t.reduce(function(e,n,r){var o=t[r+1];return o&&e.push({startTime:R.BB(n.to),endTime:R.BB(o.from)}),e},[])};t[0]&&t[t.length-1]&&(r.startTime=R.BB(t[0].from),r.endTime=R.BB(t[t.length-1].to)),e.push(r)}return e},[]).reduce(function(e,t){var n=t.startTime+"|"+t.endTime+"|"+JSON.stringify(t.breaks);return e[n]||(e[n]=[]),e[n].push(t),e},{})).map(function(e){return t[e]}),features:(c=(v.features||[]).reduce(function(e,t){var n="text"===t.type?function(e){var t=e.value,n=t.match(X);if(n){var r=Number(n[1]),o=Number(n[2]),i=!isNaN(r),a=!isNaN(o);if(i||a)return{id:e.id,name:e.name,type:"range",value:{from:i?r:void 0,to:a?o:void 0},unit:n[3]}}var s=t.match(Y);if(s){var l=Number(s[1]);if(!isNaN(l))return{id:e.id,name:e.name,type:"number",value:l,unit:s[2]}}return e}(t):t;return"text"!==n.type&&e.push(V(n,"id","name","type","value","unit")),e},[]),(null==(l=v.businessProperties)?void 0:l.closed_for_visitors)!==void 0&&c.push({id:"closed_for_visitors",type:"bool",value:v.businessProperties.closed_for_visitors}),c),entrances:null!=(o=null==(r=v.entrances)?void 0:r.map(function(e){return e.coordinates}))?o:[]}):(d=(u=e||{}).result,p=u.coordinates,m={},(f=d&&"address"in d?d.address:null)&&(m.address=f),(h=(null==d?void 0:d.displayCoordinates)||p)&&(m.coordinates=h),m)}function er(e,t){return(0,r._)({},e,{status:M[t]||e.status})}function eo(e){var t,n,r,o,a,s,l,c=e.routerResponse;if(c){var u=c.routes[e.activeRouteIndex],d="auto"===u.type;return{travelMode:J(e),trafficJams:d&&!e.settings.auto.ignoreTrafficJams,wayPoints:c.waypoints.map(function(e){return e.coordinates}).filter(function(e){return!!e}),viaPoints:null==(l=c.viaIndexes)?void 0:l.map(function(e){var t;return null==(t=u.coordinates)?void 0:t[e]}).filter(function(e){return!!e}),encodedPoints:u.encodedCoordinates,uri:u.uri,segments:(n=(t=e.routerResponse).routes[e.activeRouteIndex],r=(0,i._)(n.coordinates||[]),o=t.waypoints.map(function(e){return e.coordinates}),a=[],s=null!==e.activeCargoPresetId,r&&n.paths.forEach(function(t,n){t.segments.forEach(function(t,i){var l=t.edgePoints,c=(t.isAuto?"auto":t.isMasstransit?"masstransit":t.type&&$[t.type])||J(e),u="auto"===c&&s?"truck":c;if(l){var d=r.findIndex(function(e){return(0,K.J)(e,l[0])}),p=r.findIndex(function(e){return(0,K.J)(e,l[1])}),m=a[a.length-1];0===i||u!==m.travelMode?a.push({travelMode:u,from:r[d],to:r[p]}):m.to=r[p],r.splice(0,p)}else a.push({travelMode:u,from:o[n],to:o[n+1]})})}),a),vehicleRestrictions:function(e){var t,n,r=null==(n=e.cargoPresets.find(function(t){return t.id===e.activeCargoPresetId}))?void 0:n.settings;if(r)return{weight:Q(r.vehicle_weight),max_weight:Q(r.vehicle_max_weight),payload:Q(r.vehicle_payload),axle_weight:Q(r.vehicle_axle_weight),height:Q(r.vehicle_height),length:Q(r.vehicle_length),width:Q(r.vehicle_width),eco_class:(t=r.vehicle_eco_class)?Number(t)||0:void 0,has_trailer:!!r.vehicle_has_trailer||void 0}}(e),departure:function(e,t){var n,r=null==(n=e.routerResponse)?void 0:n.routes[e.activeRouteIndex].type;if("auto"===r||"masstransit"===r){var o=e.settings[r].timeDependent;return o.time&&o.type===t?new Date(o.time).toISOString():void 0}}(e,"departure")}}}function ei(e){return"business"===e.type?e.masstransitStop:e}function ea(e,t){return(0,r._)({},function(e,t){var n,o,i,a,s,l,c,u;switch(e){case"mrc":return{type:e,data:null==(o=t.ugcProfileData)?void 0:null==(n=o.mrc)?void 0:n.data};case"assignments":return{type:e,data:(null==(a=t.ugcProfileData)?void 0:null==(i=a.assignments)?void 0:i.united.data)?function(e,t){var n;return"entrancesEditAssignment"===e.type?{selectedAssignment:e,entrancesData:(null==(n=e.result.entrances)?void 0:n.map(function(n){return(0,r._)({},et["assignment/entrance/edit"]({type:"assignment/entrance/edit",objectUri:e.result.uri,context:I(t),coordinates:n.coordinates,result:{name:n.name,coordinates:n.coordinates,displayCoordinates:n.coordinates}}),{isLoading:!1,isSubmitted:!1})}))||[]}:"gateEditAssignment"===e.type||"barrierEditAssignment"===e.type?{selectedAssignment:e,isCompleted:!1,objectEditQuestion:void 0}:{selectedAssignment:e}}(t.ugcProfileData.assignments.united.data,t):void 0};case"photos":return{type:e,data:null==(l=t.ugcProfileData)?void 0:null==(s=l.photos)?void 0:s.account.data};case"achievement-feed":return{type:e,data:{achievementFeedItems:null==(c=t.ugcProfileData)?void 0:c.achievementFeedItems,achievementId:null==(u=t.ugcProfileData)?void 0:u.achievementId}};default:return{type:e}}}(e,t),{mode:"ugc-profile",mobileViewState:["achievements","stats","achievement-feed"].includes(e)?"expanded":"mini",customHeader:function(e,t){switch(e){case"achievements":return"Достижения";case"stats":return"Статистика";default:return}}(e,0)})}n(8380);let es=function(e,t){if(!C.qv(e.type))return e;var n=et[e.type](e,t);return(0,r._)({},e,{formData:n})};var el=n(1086);n(129),n(9290);var ec=n(3938),eu=n.n(ec),ed=n(8009),ep=n.n(ed),em=n(3213),ef=n.n(em),eh=n(670),ev=n.n(eh),eg=n(3919),e_=n.n(eg);eu(),ep(),ef(),ev(),e_(),n(2133),n(9802),n(1469);function ey(e){return _(e.query,e).map(function(t){var n=e.query.feedback?void 0:m.cQ(t),o=m.ZM(t);if(n||o)return{mode:"masstransit",stops:{loadingId:n,hasError:!1,data:void 0,tab:"overview"},line:{loadingId:o,hasError:!1,data:void 0,tab:"stops"},masstransitMode:o?"line":"stop",selectedVehicleType:void 0,mobileViewState:o?"expanded":"mini"};var i=e.landing.id;return(0,r._)({mode:"search",formText:t.request.displayText||t.request.text,initialPage:Number(e.query.page)||1},t,{mobileViewState:["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===i||"search"===i?"expanded":"mini"})})}function eb(e){var t=e.query,n=null!=(d=t.uri)?d:"",o=e.landing.id,i=["expanded","mini","micro"].includes(e.query["view-state"])?e.query["view-state"]:"category"===o||"search"===o?"expanded":void 0,a=e.uatraits.isMobile&&e.uatraits.isRobot?"expanded":void 0;if(t.poi)return[{mode:"search-result",request:{coordinates:null!=(h=(0,l.P)(t.poi.point))?h:void 0,from:"poi",uri:t.poi.uri,origin:"poi"},response:e.poiPreloadedResults,tab:(0,S.ZI)(t.tab),mobileViewState:a||(t.tab?"expanded":"mini"),selectedPostId:null==(f=e.query.posts)?void 0:f.pid}];var s=p.J6("whatshere",e.landing);if(t.whatshere){var u=(0,l.P)(t.whatshere.point);return u?[{mode:"search-result",response:e.whatsherePreloadedResults,request:{coordinates:u,from:"whatshere",origin:"whatshere",zoom:Number(t.whatshere.zoom)},tab:(0,S.mV)(s,e.whatsherePreloadedResults),mobileViewState:a||("house"===e.landing.id||t.tab?"expanded":"mini")}]:[]}if("biz"===t.ol&&t.oid||(e.uatraits.isMobile||t.text)&&t.orgpage&&t.orgpage.id||e.uatraits.isMobile&&y.k8(n)){var d,f,h,g,_,b,E,w=(0,S.ZI)(null!=(E=p.J6("orgpage",e.landing))?E:p.Mg("orgpage",t.tab)?t.tab:void 0),C=t.oid||t.orgpage&&t.orgpage.id||y.k8(n)&&y.Uu(n),R=null==(g=e.searchPreloadedResults)?void 0:g.items.find(function(e){return"business"===e.type&&e.id===C}),P=ey(e).filter(function(e){return"search"===e.mode}).length>=1?"search":void 0;return[{request:{from:"search",uri:R?y.fS(R):void 0,id:C,origin:R?t.source||"url":"restore",serpId:R?void 0:null==(_=e.searchPreloadedResults)?void 0:_.requestSerpId,text:t.text,displayText:t["display-text"]},response:R?m.qz(R,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults,mapLocationRequest:R?{bounds:R.bounds,center:R.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||(t.orgpage||t.tab?"expanded":"mini"),mode:"search-result",selectedPostId:null==(b=e.query.posts)?void 0:b.pid,tab:w,sourceStackMode:P}]}if("geo"===t.ol&&(t.ouri||t.oll||t.oid)){var k,x,I,M,T=t.oid?null==(k=e.searchPreloadedResults)?void 0:k.items.find(function(e){return e.id===t.oid}):void 0,Z=T?T.uri:t.ouri,D=T?T.coordinates:(0,l.P)(t.oll);if(!Z&&!D)return[];var L=D?null==(x=e.searchPreloadedResults)?void 0:x.items.sort(function(e,t){return e.coordinates?t.coordinates&&(0,c.g)(e.coordinates,D)>(0,c.g)(t.coordinates,D)?1:-1:1})[0]:Z?null==(I=e.searchPreloadedResults)?void 0:I.items.find(function(e){return Z===y.fS(e)}):void 0;t.text||(L=void 0);var A=L?m.qz(L,e.searchPreloadedResults):t.text?void 0:e.searchPreloadedResults;return[{request:{from:"search",uri:Z,origin:L?t.source||"url":"restore",serpId:L?void 0:null==(M=e.searchPreloadedResults)?void 0:M.requestSerpId},response:A,mapLocationRequest:L?{bounds:L.bounds,center:L.displayCoordinates,skipFirstApply:!0}:void 0,mobileViewState:a||"mini",mode:"search-result",tab:(0,S.mV)(t.tab,A)}]}if((t.text||y.Jm(n))&&e.searchPreloadedResults){var N,z,U="chain"===e.landing.id,F="category"===e.landing.id,O=e.searchPreloadedResults.exactResult,q=1===e.searchPreloadedResults.resultsCount?e.searchPreloadedResults.items[0]:void 0,B=v(t,e)[0].request;if(!U&&!F&&q&&"business"===q.type)return[{request:(0,r._)({from:"search"},B),response:e.searchPreloadedResults,mapLocationRequest:{bounds:q.bounds,center:q.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPostId:null==(N=e.query.posts)?void 0:N.pid}];if(O&&"toponym"===O.type)return[{request:(0,r._)({from:"search"},B),response:e.searchPreloadedResults,mapLocationRequest:{bounds:O.bounds,center:O.displayCoordinates,skipFirstApply:!0},mobileViewState:a||i||"mini",mode:"search-result",tab:"overview",selectedPostId:null==(z=e.query.posts)?void 0:z.pid}]}return[]}function eE(e){var t,n,i,a,l,c,u,d=w.JP({}),p=e.query,m=p.rtext,f=p.rt,h=p.via,v=p.rtn,g=p.rtt,_=p.z,b=p.ll,E=p.routes,S=p.uri;if("string"!=typeof m&&"string"!=typeof f&&!y.A(S))return[(0,r._)({mode:"routes"},d)];var C=null==(t=e.routerResponse)?void 0:t.waypoints.map(function(e){return{coords:e.coordinates,value:e.name||""}});null==(i=e.routerResponse)||null==(n=i.viaIndexes)||n.forEach(function(t,n){var r,o,i=null==(o=e.routerResponse)?void 0:null==(r=o.viaPoints)?void 0:r[n];i&&(null==C||C.splice(t,0,{coords:i.coordinates,value:i.name||""}))});var R=w.Vo(),P=e.routePoints||C||R,k=d.routerResponse;e.routerResponse&&(k=e.routerResponse,k=w.NA(k),k=w.GR(k,P));var x=h&&h.split("~").map(Number).filter(Boolean)||(null==(a=e.routerResponse)?void 0:a.viaIndexes)||[],I=P&&P.filter(function(e){return!!e.coords}),M=null==(l=e.routerResponse)?void 0:l.routes[0],T=null==(c=e.routerResponse)?void 0:c.error,Z=M&&"taxiInfo"in M&&"error"in M.taxiInfo&&M.taxiInfo.error,D=P&&(null==I?void 0:I.length)===P.length,L=w.Dn(e),A=v?parseInt(v,10):0,N=null==(u=Object.entries(w.jk).find(function(e){return(0,o._)(e,2)[1]===g}))?void 0:u[0],z=w.S8(e);return[(0,r._)({},d,{mode:"routes",skipApplyBounds:!!(_&&b)&&P.filter(function(e){return e.coords}).length>=2,travelMode:(null==k?void 0:k.type)||N||z||d.travelMode,activeField:P.findIndex(function(e,t){return(!e.value||!e.coords)&&!x.includes(t)}),activeRouteIndex:(null==k?void 0:k.routes)&&A<k.routes.length?A:0,editingCargoPresetId:void 0,activeCargoPresetId:null,cargoPresets:[],activeComparisonMode:E&&E.activeComparisonMode||void 0,viaIndexes:x,sessionId:e.routerResponse?"r:"+s().v4():void 0,settings:L,routePoints:P,routerResponse:k,error:D||T?Z||T:void 0,isLoading:D&&!e.routerResponse,mobileViewState:M?"mini":"expanded"})]}function ew(e){var t,n=e.masstransitStop,r=e.masstransitLine,o=e.query,i=o.masstransit,a=o.ol,s=o.oid,l=o.tab,c=o.reviews,u={loadingId:!i||i.lineId||n?s&&"mtr"===a?s:void 0:i.stopId,hasError:!1,data:n,tab:(0,S.KA)(l)||"overview"},d={loadingId:i&&!r?i.lineId:void 0,hasError:!1,data:r?{color:r.color,threads:r.features,activeThread:r.activeThread,seoThreadIndex:r.seoThreadIndex,dataSources:r.dataSources,vehicles:[],features:[]}:void 0,tab:(0,S.IP)(l)||"stops"};r?t="line":n?t="stop":d.loadingId?t="line":u.loadingId?t="stop":i&&i.vehicleType&&(t="list");var p=i&&i.vehicleType||void 0;return t?[{mode:"masstransit",stops:u,line:d,selectedVehicleType:p,masstransitMode:t,mobileViewState:"list"===t||(null==c?void 0:c.publicId)?"expanded":"mini"}]:[]}function eS(e){return{type:"area"===e.query.rlt?"area":"ruler",isEnabled:!1,points:("string"==typeof e.query.rl?e.query.rl:"").split("~").reduce(function(e,t){var n=(0,l.P)(t);if(!n)return e;var r=e[e.length-1],o=r?[r.coordinates[0]+n[0],r.coordinates[1]+n[1]]:n;return e.push({coordinates:o,value:r?r.value+(0,u.t)(o,r.coordinates):0,showBalloon:!1}),e},[])}}function eC(){return[{mode:"user-profile"}]}},3085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(4788),o=n(8007),i=n(7363),a=n(5645),s=n(4748),l=n(1494),c=n(1104),u={angle:"dropdown-16",triangle:"arrow-down-8"},d=(0,s.Z)("button"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._onMouseEnter=function(e){n.props.title&&!n.state.hideTitle&&n.setState({hideTitle:!0}),n.props.onMouseEnter&&n.props.onMouseEnter(e)},n._onMouseDown=function(e){!n.props.disabled&&(n.setState({pressed:!!n.props.onClick}),n.props.onMouseDown&&n.props.onMouseDown(e))},n._onMouseUp=function(){n.setState({pressed:!1})},n._onMouseOut=function(){n.setState({pressed:!1})},n._onFocus=function(){var e=n.props.forwardedRef,t=void 0===e?n._ref:e;if(n.state.pressed){var r=t.current;r&&r.blur()}},n._renderLink=function(e,t){var o=n.props,a=o.disabled,s=o.url,l=o.rel,c=o.target,u=o.forwardedRef,d=void 0===u?n._ref:u;return i.createElement("a",(0,r._)({href:a?void 0:s,role:"button",target:c||"_parent","aria-disabled":!!a||void 0,ref:d,rel:l},e),t)},n._renderButton=function(e,t){var o=n.props,a=o.disabled,s=o.type,l=o.forwardedRef,c=void 0===l?n._ref:l;return i.createElement("button",(0,r._)({disabled:a,type:void 0===s?"button":s,ref:c},e),t)},n._renderIcon=function(e){var t=n.props;return i.createElement("span",{key:"icon",className:e("icon"),style:{width:t.iconWidth},"aria-hidden":!0},t.icon)},n._renderTick=function(e){var t=u[n.props.tick];return i.createElement(l.Z,{name:t,key:"tick",className:e("tick"),inline:!0})},n.state={pressed:!1,hideTitle:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props,t=[e.icon?this._renderIcon(d):null,e.children?i.createElement("span",{key:"text",className:d("text")},e.children):null,e.tick?this._renderTick(d):null],n=e.ariaHidden?c.x:{"aria-haspopup":void 0!==e.ariaExpanded,"aria-expanded":e.ariaExpanded,"aria-label":e.children?void 0:e.ariaLabel},o=(0,r._)({className:d({view:e.view,ui:!["air","air-alt","air-round","search"].includes(e.view),size:e.size,link:!!e.url,disabled:e.disabled,checked:e.checked,static:e.static,"pin-left":e.pinLeft,"pin-right":e.pinRight,"pin-top":e.pinTop,"pin-bottom":e.pinBottom,pressed:this.state.pressed||e.pressed,tick:e.tick,stretched:e.isStretched,"text-align-left":e.isTextAlignLeft,"flipped-tick":e.flippedTick,hovered:e.hovered,focused:e.focused,"no-shadow":e.noShadow,truncated:e.truncated,"dark-theme-only":e.darkThemeOnly}),title:this.state.hideTitle?void 0:e.title,"aria-pressed":this.state.pressed||e.pressed,itemProp:e.itemProp,onMouseEnter:this._onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.disabled?void 0:e.onClick,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseOut:this._onMouseOut,onFocus:this._onFocus},n);return e.url?this._renderLink(o,t):this._renderButton(o,t)},t}(i.Component);let m=(0,a.Z)(p)},8155:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(4788),o=n(8007),i=n(7363),a=n(1533),s=[],l=function(e,t){var n=e.target,r=t.node,o=t.callback,i=t.stopPropagation,a=t.getExcludedNodes;if(p(r,n))return!i;var s=a&&a();return s&&(s=Array.isArray(s)?s:[s]).some(function(e){return p(e,n)})||o(e),!i},c=function(e){for(var t=s.length-1;t>=0&&l(e,s[t]);t--);},u=function(e){0===(s=s.filter(function(t){return e!==t})).length&&(window.document.removeEventListener("mousedown",c,!0),window.document.removeEventListener("touchstart",c,!0))},d=function(e,t){0===s.length&&(window.document.addEventListener("mousedown",c,!0),window.document.addEventListener("touchstart",c,{capture:!0,passive:!1}));var n=(0,r._)({node:e},t);return s.push(n),function(){return u(n)}};function p(e,t){return e===t||e.contains(t)}let m=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.callback,n=e.stopPropagation,r=e.getExcludedNodes,o=a.findDOMNode(this);o instanceof Element&&(this._unsubscribe=d(o,{callback:t,stopPropagation:n,getExcludedNodes:r}))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return i.Children.only(this.props.children)},t}(i.Component)},1909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(4788),o=n(7363),i=n(4748),a=n(9602),s=n(1336),l=n(3752),c=n(980),u=n(4953),d=n(8741),p=(0,i.Z)("close-button"),m={close:{small:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" rx="8" fill="#878787"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.251 10.749a.857.857 0 0 0 1.212 0L8 9.212l1.537 1.537a.857.857 0 1 0 1.212-1.212L9.212 8l1.537-1.537a.857.857 0 1 0-1.212-1.212L8 6.788 6.463 5.25a.857.857 0 0 0-1.212 1.212L6.788 8 5.25 9.537a.857.857 0 0 0 0 1.212z" fill="#fff"/></svg>',medium:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12c0-6.627-5.373-12-12-12S0 5.373 0 12s5.373 12 12 12 12-5.373 12-12zm-8.293-3.707a1 1 0 0 1 0 1.414L13.414 12l2.293 2.293a1 1 0 0 1-1.414 1.414L12 13.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L10.586 12 8.293 9.707a1 1 0 0 1 1.414-1.414L12 10.586l2.293-2.293a1 1 0 0 1 1.414 0z" fill="currentColor"/></svg>'},cross:{small:d.Z,medium:d.Z}};let f=function(e){var t=e.color,n=e.offset,i=void 0===n?"small":n,d=e.size,f=void 0===d?"medium":d,h=e.onClick,v=e.circle,g=e.relative,_=e.usePortal,y=e.analytics,b=(0,s.ZR)(),E=o.createRef(),w=(0,l.p)({ref:E}),S=v?"close":"cross",C="string"!=typeof i?{top:i.top,right:i.right}:{},R=o.createElement(u.ZP,(0,r._)({name:"close",logClick:!0},y),o.createElement("button",(0,r._)({type:"button","aria-label":"Закрыть",className:p({color:void 0===t?"black":t,circle:v,relative:g,size:"string"==typeof f?f:void 0,offset:"string"==typeof i?i:void 0}),onClick:h,style:(0,c.cq)(b,C),ref:E},w),o.createElement("span",{dangerouslySetInnerHTML:{__html:m[S][f]}})));return _?o.createElement(a.Z,{selector:".body"},R):R}},4499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8007),o=n(7363),i=new Map;let a=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._fetchUrl=function(){var e=t.props.url;e&&function(e){if(i.has(e))return Promise.resolve();var t=new Promise(function(t){var n=window.document.createElement("img");function r(){window.document.body.removeChild(n),n.removeEventListener("load",r),n.removeEventListener("error",r),t()}n.setAttribute("src",e),window.document.body.appendChild(n),n.addEventListener("load",r),n.addEventListener("error",r)});i.set(e,t)}(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchUrl()},n.componentDidUpdate=function(e){e.url!==this.props.url&&this._fetchUrl()},n.render=function(){return null},t}(o.PureComponent)},7105:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u,v6:()=>s,KE:()=>c});var r=n(7363);function o(){}var i=(0,n(4641).Z)("flyover",{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,setLayerInitialized:o,setFlyoverObject:o}),a=i.connect,s=i.Provider,l=i.Context;function c(){return r.useContext(l)}let u=a},9394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(8007),o=n(7363),i=n(1533),a=n(4748),s=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){return this.props.children},t}(o.PureComponent),l=n(3242),c=n(1336),u=(0,a.Z)("hover-hint"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._target=null,n._showTimerId=0,n._hide=function(){window.clearTimeout(n._showTimerId),n._showTimerId=0,n.setState({isShown:!1})},n._onPopupClose=function(){n._hide()},n._onMouseEnter=function(){n._showTimerId||n.props.isDisabled||(n._showTimerId=window.setTimeout(function(){return n.setState({isShown:!0})},n.props.delay||200))},n._onMouseLeave=function(){n._hide()},n._onClick=function(){void 0===n.props.hideOnClick||n.props.hideOnClick?n._hide():n.props.config.uatraits.isMobile&&n._onMouseEnter()},n._renderPopup=function(){var e=n.props,t=e.isAir?"air":"help",r=!!(!e.isDisabled&&(n.state.isShown||e.force));return o.createElement(l.Z,{isShown:r,position:e.position,offset:e.offset,type:t,onScroll:e.onScroll||"reposition",getTarget:function(){return n._target||null},onClose:n._onPopupClose,className:e.className,showArrow:e.showArrow,arrowOffset:e.arrowOffset},o.createElement("div",{className:u({type:t,size:e.size||"m"})},e.text))},n.state={isShown:!!t.isInitialShown},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._target&&(this._target.addEventListener("mouseenter",this._onMouseEnter),this._target.addEventListener("mouseleave",this._onMouseLeave),this._target.addEventListener("click",this._onClick))},n.componentWillUnmount=function(){this._target&&(this._target.removeEventListener("mouseenter",this._onMouseEnter),this._target.removeEventListener("mouseleave",this._onMouseLeave),this._target.removeEventListener("click",this._onClick)),window.clearTimeout(this._showTimerId),this._showTimerId=0},n.componentDidUpdate=function(e){!e.isDisabled&&this.props.isDisabled&&this.state.isShown&&(window.clearTimeout(this._showTimerId),this._showTimerId=0,this.setState({isShown:!1}))},n.render=function(){var e=this,t=this.props;return t.config.uatraits.isMobile&&!t.isNeededOnMobile?t.children:o.createElement(o.Fragment,null,o.createElement(s,{ref:function(t){return e._target=t?i.findDOMNode(t):null}},t.children),this._renderPopup())},t}(o.Component);let p=(0,c.ZP)(d)},1494:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(8188),o=n(7363),i=n(4748),a=n(1336),s=n(3228),l=["luxury-rubrics-gas","pin-alerts-closed-future","pin-alerts-cross-road-control","pin-alerts-drawbridge-future","pin-alerts-lane-control","pin-alerts-mobile-control","pin-alerts-no-stopping-control","pin-alerts-reconstruction","pin-alerts-speed-bump","pin-alerts-speed-camera","poi-alerts-closed-future-24","poi-alerts-closed-future-32","poi-alerts-closed-future-40","poi-alerts-cross-road-control-26","poi-alerts-cross-road-control-32","poi-alerts-cross-road-control-40","poi-alerts-drawbridge-future-24","poi-alerts-drawbridge-future-32","poi-alerts-drawbridge-future-40","poi-alerts-lane-control-26","poi-alerts-lane-control-32","poi-alerts-lane-control-40","poi-alerts-mobile-control-26","poi-alerts-mobile-control-32","poi-alerts-mobile-control-40","poi-alerts-no-stopping-control-24","poi-alerts-no-stopping-control-32","poi-alerts-no-stopping-control-40","poi-alerts-road-reconstruction-24","poi-alerts-road-reconstruction-32","poi-alerts-road-reconstruction-40","poi-alerts-speed-bump-24","poi-alerts-speed-bump-32","poi-alerts-speed-bump-40","poi-alerts-speed-camera-24","poi-alerts-speed-camera-32","poi-alerts-speed-camera-40","rubrics-medical-48","settings-speed-limit-highways-64x52","settings-speed-limit-single-carriageway-64x52","settings-speed-limit-within-towns-64x52","settings-speedlimit-city-in","settings-speedlimit-city-out","settings-speedlimit-highway","sound-off-24"],c=["camera2d-on-40","camera3d-on-40","carplay-aa-lockscreen-glyph","carplay-dash-continue-40","carplay-dash-phone-40","carplay-home-40","carplay-search-my-places-40","carplay-start-route-40","carplay-work-40","checkbox-on-24","child-seat-selected-day-24","child-seat-selected-night-24","collection-rubric-24","collection-rubric-48","collection-rubric-60","collection-rubric-60-no-gradient","cp-dashboard-location-32","cp-dashboard-not-working-32","cp-dashboard-phone-32","cp-dashboard-plus-32","done-36","envelope-36","filters-select-24-flip","gas-48","il-find-places.png","il-low-data.png","il-navigation.png","il-notifications.png","il-parking.png","il-realtime-transport.png","il-road-alerts.png","il-routes.png","il-switcher.png","il-transport-timestable.png","layers-on-24","layers-on-40","loader-progress-100","loader-progress-25","loader-progress-50","loader-progress-75","location-center-40","location-navigate-center-40","map-placemark-compass-64","map-placemark-dot-32","maps-32","mark-actual-24","mark-actual-superscript-12","navi-service-image.png","navimark-48","overview-route-ferry","panorama-on-40-flip","parking-32","parking-on-40","parking-on-48","radio-on-24","search-category-24","tab-navigator","tab-taxi-flip","tab-transport-flip","tab-yndxfuel","taxi-service-image.png","thanks-32-flip","transit-marker-region-24","transit-on-40","transport-service-image.png","warning-36"],u=n(1057),d=(0,i.Z)("icon");let p=function(e){var t,n,i,p,m,f,h,v,g=(0,a.ZR)(),_=(n="dark"===(t={name:e.name,theme:e.theme}).theme?"_night":"",p=(i=(0,r._)(t.name.split("."),2))[0],m=i[1],f=g.isYango&&c.includes(p)?"yangomaps-":"",h=g.isRtl&&l.includes(p)?"_rtl":"",v=""+f+p+h+n+"."+(void 0===m?"svg":m),g.staticHost+"static/v46/icons/core/"+v),y=RegExp("^.*?(?:-(\\d+))?(?:x(\\d+))?(?:-no-gradient)?(?:-flip)?$").exec(e.name),b=(0,r._)(e.name.split("."),2),E=b[0],w=b[1],S=(null==y?void 0:y[1])?Number(y[1]):void 0,C=(null==y?void 0:y[2])?Number(y[2]):S,R=g.isRtl&&E.endsWith("-flip"),P=e.inline&&"svg"===(void 0===w?"svg":w),k=[d({flip:R,img:!P}),e.className].filter(Boolean).join(" "),x=e.onClick?e.ariaLabel:void 0,I=e.ariaHidden||!x;return P?o.createElement(s.Z,{url:_,className:k,onClick:e.onClick,ariaLabel:x,ariaHidden:I},"function"==typeof e.inline?e.inline:void 0):o.createElement(u.Z,{tag:"span",className:k,onClick:e.onClick,ariaLabel:x,ariaHidden:I},o.createElement("img",{alt:x,src:_,width:S||"100%",height:C||"100%"}))}},3242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(2678),o=n(4788),i=n(8007),a=n(7363),s=n(4748),l=n(9602),c=n(8155),u=n(7558),d=n(1392),p=["INPUT","SELECT","TEXTAREA"],m=[],f=function(e,t){var n=e.keyCode,r=e.target.tagName,o=t.handlers,i=t.stopPropagation,a=o.find(function(e){return e.key===n}),s=p.includes(r);return a&&(a.allowInEditable||!s)?(a.callback(e),e.preventDefault(),!1):!(a||i)},h=function(e){for(var t=m.length-1;t>=0&&f(e,m[t]);t--);},v=function(e){e.keyCode!==d.n.PRINT_SCREEN&&h(e)},g=function(e){e.keyCode===d.n.PRINT_SCREEN&&h(e)},_=function(e){0===(m=m.filter(function(t){return e!==t})).length&&(window.document.removeEventListener("keydown",v),window.document.removeEventListener("keyup",g))},y=function(e,t){0===m.length&&(window.document.addEventListener("keydown",v),window.document.addEventListener("keyup",g));var n={handlers:e,stopPropagation:t};return m.push(n),function(){return _(n)}},b=function(e){function t(){return e.apply(this,arguments)}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.stopPropagation,n=e.handlers,r=Array.isArray(n)?n.slice():[n];this._unsubscribe=y(r,!!t)},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return null},t}(a.Component),E=n(9048),w=n(9014),S=n(1690),C=n(111),R=n(1494),P=n(1336),k=(0,s.Z)("popup"),x={bottom:{vertical:!0,bottom:!0,center:!0},"bottom-right":{vertical:!0,bottom:!0,right:!0},"bottom-left":{vertical:!0,bottom:!0,left:!0},"right-bottom":{horizontal:!0,right:!0,bottom:!0},right:{horizontal:!0,right:!0,middle:!0},"right-top":{horizontal:!0,right:!0,top:!0},top:{vertical:!0,top:!0,center:!0},"top-right":{vertical:!0,top:!0,right:!0},"top-left":{vertical:!0,top:!0,left:!0},left:{horizontal:!0,left:!0,middle:!0},"left-bottom":{horizontal:!0,left:!0,bottom:!0},"left-top":{horizontal:!0,left:!0,top:!0}},I=[],M=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popup=a.createRef(),n._getArrowDimensions=function(){if("tooltip"===n.props.type)return{diagonal:24,height:12};var e=Math.round((n._arrow?10:0)*Math.sqrt(2));return{diagonal:e,height:e/2}},n._getPopupSize=function(){var e=n._popup.current.getBoundingClientRect(),t=n.props.getTarget();return{width:Math.round(n.props.isDropdown&&t?t.getBoundingClientRect().width:e.width),height:Math.round(e.height)}},n._getTargetSize=function(){var e=n.props.getTarget();if(e instanceof HTMLElement)return{width:e.offsetWidth,height:e.offsetHeight};if(e&&"getBBox"in e){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:0,height:0}},n._getTargetRect=function(){var e=n.props.getTarget();if(!e)return{top:0,right:0,bottom:0,left:0};var t=n._getTargetSize(),r=e.getBoundingClientRect(),o={top:r.top+T(),left:r.left+Z()};return{top:o.top,right:o.left+t.width,bottom:o.top+t.height,left:o.left}},n._isTargetVisible=function(e,t){var r=t.top,o=t.right,i=t.bottom,a=t.left;if(!n.props.checkTargetVisibility)return!0;var s=window.document.elementFromPoint(a+(o-a)/2,r+(i-r)/2);return e.contains(s)},n._getPositions=function(){var e=Array.isArray(n.props.position)?n.props.position:[n.props.position||"bottom"];return n.props.config.isRtl?e.map(function(e){return e.includes("left")?e.replace("left","right"):e.includes("right")?e.replace("right","left"):e}):e},n._reposition=function(){var e=n.props,t=e.config.isRtl,r=e.getTarget();if(e.isShown&&n._popup.current&&r){var o=n._getTargetRect();if(!n._isTargetVisible(r,o)){n.setState({isTargetVisible:!1});return}var i={main:(e.offset?e.offset.main:0)+3,side:e.offset?e.offset.side:0},a=(v=window.document.documentElement,g=Z(),_=T(),y=v.clientWidth,b=v.clientHeight,_>(E=Math.max(v.scrollHeight,b)-b)&&(_=E),{top:_,right:g+y,bottom:_+b,left:g}),s=n._getPopupSize(),l=n._getArrowDimensions(),c=!n._popupSize||n._popupSize.width!==s.width||n._popupSize.height!==s.height;n.props.onSizeChange&&c&&n.props.onSizeChange(s),n._popupSize=s;var u=-l.height,d=l.height/2,p=s.width*s.height,m=null,f=[];f=f.concat(n._getPositions()),e.restrictPosition||(f=f.concat(Object.keys(x)));for(var h=0;h<f.length;h++){var v,g,_,y,b,E,w=f[h],S=x[w],C={top:0,right:0,bottom:0,left:0},R={top:"auto",right:"auto",bottom:"auto",left:"auto"},P=void 0,k=e.arrowOffset||0,I=(e.positionOffsets||{})[w]||{main:0,side:0};if(S.horizontal){S.left?(C.left=o.left-s.width-l.height-i.main+I.main,R.right=u,P=t?"right":"left"):S.right&&(C.left=o.right+l.height+i.main+I.main,R.left=u,P=t?"left":"right"),S.middle?C.top=(o.top+o.bottom-s.height)/2+i.side+I.side:S.top?C.top=Math.max(o.bottom,(o.top+o.bottom+l.height)/2)+d-s.height-i.side+I.side:S.bottom&&(C.top=Math.min(o.top,(o.top+o.bottom-l.height)/2)-d+i.side+I.side);var M=(o.top+o.bottom-l.diagonal)/2-C.top+i.side+I.side+k;R.top=Math.min(Math.max(0,M),s.height-l.diagonal)}else if(S.vertical){S.top?(C.top=o.top-s.height-l.height-i.main+I.main,R.bottom=u,P="top"):S.bottom&&(C.top=o.bottom+l.height+i.main+I.main,R.top=u,P="bottom"),S.center?C.left=(o.left+o.right-s.width)/2+i.side+I.side:S.left?C.left=Math.max(o.right-s.width,(o.left+o.right+l.height)/2)+d-s.width-i.side+I.side:S.right&&(C.left=Math.min(o.left,(o.left+o.right-l.height)/2)-d+i.side+I.side);var D=(o.left+o.right-l.diagonal)/2-C.left+i.side+k+I.side;R.left=Math.min(Math.max(0,D),s.width-l.diagonal)}C.bottom=C.top+s.height,C.right=C.left+s.width;var L=Math.round(Math.max(0,Math.min(C.right,a.right)-Math.max(C.left,a.left))*Math.max(0,Math.min(C.bottom,a.bottom)-Math.max(C.top,a.top)));if(e.isMinLeftZero&&C.left<0&&S.vertical&&("number"==typeof R.left&&(R.left+=C.left),C.left=0),(!m||L>m.square)&&(m={popupPos:{left:C.left,top:C.top},arrowPos:R,square:L,mainPos:P}),L===p)break}var A=m.popupPos,N={left:Math.floor(A.left),top:Math.floor(A.top)};n.props.isDropdown&&(N.width=n._getTargetSize().width);var z=A.top>0?a.bottom-A.top:void 0;n.setState({style:N,arrowStyle:m.arrowPos,position:m.mainPos,maxContentHeight:e.skipMaxHeight?void 0:z,isShown:!0,isTargetVisible:!0})}},n._onClose=function(e,t){n.props.onClose&&n.props.onClose({reason:t,event:e})},n._onClickOutside=function(e){n.props.isShown&&n._onClose(e,"click-outside")},n._onWindowChange=function(e){n._applyScrollEvent(e)},n._onScroll=function(e,t){t&&n._applyScrollEvent(t)},n._applyScrollEvent=function(e){n.props.isShown&&(n.props.onScroll&&"reposition"!==n.props.onScroll?n._onClose(e,"scroll"):n._repositionThrottled())},n._onEsc=function(e){n.props.isShown&&n._onClose(e,"esc")},n._onShow=function(){I.includes((0,r._)(n))||n.props.ninjaMode||I.push((0,r._)(n));var e=n._getPopupSize();n.state.isShown&&n._popupSize.width===e.width&&n._popupSize.height===e.height||n._reposition()},n._onHide=function(){I=I.filter(function(e){return e!==(0,r._)(n)}),n.setState({style:{top:0,left:0},isShown:!1})},n._onHideEnd=function(){n._onHide(),n.props.onHideEnd&&n.props.onHideEnd()},n._getExcludedNodes=function(){var e=n.props,t=e.getExcludedNodes,r=e.hideOnTargetClick,o=e.getTarget,i=[],a=t&&t();a&&(i=i.concat(a));var s=r?null:o();return s&&(i=i.concat(s)),i},n._renderPopup=function(){var e=n.props,t=n.state,r=t.isTargetVisible&&t.isShown?"visible":"hidden",i=e.noPointerEvents?"none":"auto",s=(0,o._)({zIndex:e.zIndex,visibility:r,pointerEvents:i},t.style),l=e.type||"normal",c=k({type:l,position:t.position,dropdown:e.isDropdown,"full-height":e.fullHeight})+(e.className?" "+e.className:""),u=t.maxContentHeight?{maxHeight:t.maxContentHeight}:{};return a.createElement("div",{className:c,style:s,ref:n._popup,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,role:"dialog"},void 0===e.showArrow||e.showArrow?a.createElement("div",{className:k("arrow",{"arrow-type":e.arrowType}),style:t.arrowStyle,ref:function(e){return n._arrow=e||void 0}},"tooltip"!==l||e.arrowType?null:a.createElement(R.Z,{name:"tips-arrow-vertical-8",className:k("arrow-icon"),inline:!0})):null,a.createElement("div",{className:k("content",{"full-height":e.fullHeight}),style:u},e.children),e.repositionOnContentResize?a.createElement(E.Z,{onResize:n._repositionThrottled}):null,a.createElement(b,{handlers:{key:d.n.ESC,callback:n._onEsc,allowInEditable:!0}}))},n._repositionThrottled=(0,C.Z)(n._reposition,50),n.state={style:{top:0,left:0},arrowStyle:{top:"auto",right:"auto",bottom:"auto",left:"auto"},position:"bottom",isShown:!1,isTargetVisible:!t.checkTargetVisibility},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._observer="IntersectionObserver"in window?new IntersectionObserver(function(){e._repositionThrottled()}):void 0,this.props.checkTargetVisibility&&this._repositionThrottled();var t=this.props.getTarget();t&&this._observer&&this._observer.observe(t)},n.componentDidUpdate=function(e){this.props!==e&&this.props.isShown&&this._repositionThrottled()},n.componentWillUnmount=function(){var e=this;I=I.filter(function(t){return t!==e}),this._repositionThrottled.cancel(),this._observer&&this._observer.disconnect()},n.render=function(){return a.createElement(l.Z,{selector:this.props.selector},a.createElement(S.Z,{animationRef:this._popup,onShow:this._onShow,onHideEnd:this._onHideEnd},this.props.isShown?a.createElement(c.Z,{callback:this._onClickOutside,getExcludedNodes:this._getExcludedNodes},this._renderPopup()):null),a.createElement(u.Z,{type:"resize",listener:this._onWindowChange,options:!0}),a.createElement(w.Z,{eventHandler:this._onScroll,throttleWait:0}),a.createElement(u.Z,{type:"orientationchange",listener:this._onWindowChange,options:!0}),a.createElement(u.Z,{type:"layout-change",listener:this._onWindowChange}))},t}(a.Component);function T(){return window.document.documentElement.scrollTop||window.document.body.scrollTop}function Z(){return window.document.documentElement.scrollLeft||window.document.body.scrollLeft}let D=(0,P.ZP)(M)},9602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8007),o=n(7363),i=n(1533);let a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getContainer=function(){var e=n.props;return e.containerRef?e.containerRef.current||void 0:e.selector?window.document.querySelector(e.selector)||void 0:window.document.body},n._updateContainer=function(){var e=n._getContainer();e!==n.state.container&&n.setState({container:e})},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateContainer()},n.componentDidUpdate=function(e){var t,n;((null==(t=e.containerRef)?void 0:t.current)!==(null==(n=this.props.containerRef)?void 0:n.current)||e.selector!==this.props.selector||e.children!==this.props.children)&&this._updateContainer()},n.render=function(){var e=this.state;return e.container?i.createPortal(this.props.children,e.container):null},t}(o.Component)},9048:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4788),o=n(8007),i=n(7363),a=n(4748),s=n(1104),l=(0,a.Z)("resize-listener");let c=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._measurer=null,t._onResize=function(e){t.props.onResize(e)},t._onIframeLoad=function(){t._measurer.contentWindow.addEventListener("resize",t._onResize)},t._iframeRef=function(e){t._measurer=e},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this._measurer;e.contentWindow?this._onIframeLoad():e.addEventListener("load",this._onIframeLoad)},n.componentWillUnmount=function(){var e=this._measurer;e&&(e.removeEventListener("load",this._onIframeLoad),e.contentWindow&&e.contentWindow.removeEventListener("resize",this._onResize))},n.render=function(){return i.createElement("iframe",(0,r._)({className:l()},s.x,{ref:this._iframeRef}))},t}(i.Component)},3285:(e,t,n)=>{"use strict";function r(){return r}n.d(t,{ZP:()=>s,ID:()=>a}),n(7363);var o=(0,n(4641).Z)("scroll",{addListener:r,getScrollableNode:function(){return null},getCacheScrollPosition:function(){return null},scrollId:"",registerStickyElement:r,unregisterStickyElement:r,updateStickyElement:r,getStickyElementsOffset:function(){return 0}}),i=o.connect,a=o.Provider;o.Context;let s=i},9014:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(8007),o=n(7363),i=n(111),a=n(3285),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._attachListener=function(){var e;t._listener=(0,i.Z)(t.props.eventHandler,null!=(e=t.props.throttleWait)?e:512),t._unsubscribe=t.props.addListener(t._listener)},t._unattachListener=function(){var e;t._unsubscribe(),null==(e=t._listener)||e.cancel()},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._attachListener()},n.componentDidUpdate=function(e){e.eventHandler!==this.props.eventHandler&&(this._unattachListener(),this._attachListener())},n.componentWillUnmount=function(){this._unattachListener()},n.render=function(){return null},t}(o.PureComponent);let l=(0,a.ZP)(s)},4610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(4788),o=n(8007),i=n(7363),a=n(7473),s=n.n(a),l=n(5877),c=n.n(l),u=n(4748),d=n(473),p=n(9048),m=n(7558),f=n(111),h=n(9014),v=n(3285);let g=function(e){var t=this;this._listeners=[],this.addListener=function(e){return t._listeners.push(e),e(t._ref.current,null),function(){return t._removeListener(e)}},this._removeListener=function(e){t._listeners=t._listeners.filter(function(t){return t!==e})},this.fire=function(e){t._listeners.forEach(function(n){return n(t._ref.current,e)})},this._ref=e};var _=n(1336),y=(0,u.Z)("scroll"),b={},E={passive:!0},w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._content=null,n._wrap=i.createRef(),n._scrollbar=null,n._scrollbarThumb=null,n._ratio=1,n._startPageY=0,n._startScrollTop=0,n._onSelectStart=null,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._emitter.fire(e)},n._onResize=function(){n._wrap.current&&n._content&&(n._height=n._wrap.current.clientHeight,n._ratio=n._height/n._content.clientHeight,"dynamic"===n.props.width&&n._fixContentWidth(),n._scrollbarThumb&&(n._updateScrollbarThumbPosition(n._getContainer().current.scrollTop),n._scrollbarThumb.style.height=100*n._ratio+"%"),n._showHideScrollbar(n._ratio<1))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;n._scrollbarThumb&&n._updateScrollbarThumbPosition(e.scrollTop),t.cacheKey&&(b[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._onWheel=function(e){n._getContainer().current.scrollTop=n._getContainer().current.scrollTop+e.deltaY},n._onScrollbarClick=function(e){var t=n._getContainer().current,r=n._scrollbarThumb;e.pageY<r.getBoundingClientRect().top?t.scrollTop-=n._height:t.scrollTop+=n._height},n._onMouseDown=function(e){var t=n._wrap.current,r=n._getContainer().current;t&&r&&(window.addEventListener("mouseup",n._onMouseUp,E),window.addEventListener("mousemove",n._onMouseMoveThrottled,E),t.classList.add("_pressed"),n._startPageY=e.pageY,n._startScrollTop=r.scrollTop,n._onSelectStart=r.onselectstart,r.onselectstart=function(e){e.preventDefault()})},n._onMouseUp=function(){var e=n._wrap.current,t=n._getContainer().current;e&&t&&(n._removeMouseListeners(),e.classList.remove("_pressed"),t.onselectstart=n._onSelectStart)},n._onMouseMove=function(e){var t=n._getContainer().current;n._scrollbar&&(t.scrollTop=n._startScrollTop+(e.pageY-n._startPageY)/n._ratio)},n._removeMouseListeners=function(){window.removeEventListener("mouseup",n._onMouseUp,E),window.removeEventListener("mousemove",n._onMouseMoveThrottled,E)},n._updateScrollbarThumbPosition=function(e){n._scrollbarThumb.style.setProperty((0,d.r1)().styles.transform,"translate3d(0, "+Math.ceil(e*n._ratio)+"px, 0)")},n._fixContentWidth=function(){var e=n._getContainer().current,t=n._content,r=e.offsetWidth-e.clientWidth;t.style.marginRight=-r+"px"},n._showHideScrollbar=function(e){var t=n._scrollbar;t&&(t.style.display=e?"flex":"none")},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&b[e.cacheKey]||0;t.scrollTop!==r&&(0===r?t.scrollTop=r:s()(function(){return t.scrollTop=r}))},n._onResizeThrottled=(0,f.Z)(n._onResize,64),n._onMouseMoveThrottled=(0,f.Z)(n._onMouseMove,64),n._emitter=new g(n._getContainer()),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._onResize(),setTimeout(this._onResize,0),this._restoreScrollPosition(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._getContainer().current.addEventListener("scroll",this._onScroll,E),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._removeMouseListeners(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(null),this._getContainer().current.removeEventListener("scroll",this._onScroll,E),this._emitter.fire(null),this._onResizeThrottled.cancel(),this._onMouseMoveThrottled.cancel()},n.render=function(){var e=this,t=this.props;return i.createElement("div",{className:y({width:t.width||"narrow",disabled:t.disabled,"full-height":t.fullHeight}),ref:this._wrap},i.createElement("div",{className:y("container",{firefox:"Firefox"===t.config.uatraits.BrowserName}),ref:this._getContainer()},i.createElement("div",{className:y("content"),ref:function(t){return e._content=t}},i.createElement(v.ID,{value:{addListener:this._emitter.addListener,getScrollableNode:function(){return e._getContainer().current},getCacheScrollPosition:function(){var t;return e.props.cacheKey&&null!=(t=b[e.props.cacheKey])?t:null},scrollId:this._id,registerStickyElement:this.props.registerStickyElement,unregisterStickyElement:this.props.unregisterStickyElement,updateStickyElement:this.props.updateStickyElement,getStickyElementsOffset:this.props.getStickyElementsOffset}},t.children,i.createElement(h.Z,{eventHandler:this._onScrollSelf,throttleWait:64})),i.createElement(p.Z,{onResize:this._onResizeThrottled})),i.createElement(p.Z,{onResize:this._onResizeThrottled}),i.createElement("div",{className:y("scrollbar",{noprint:!0}),ref:function(t){return e._scrollbar=t},onWheel:this._onWheel},i.createElement("div",{"aria-hidden":!0,className:y("scrollbar-track"),onClick:this._onScrollbarClick}),i.createElement("div",{"aria-hidden":!0,className:y("scrollbar-thumb"),ref:function(t){return e._scrollbarThumb=t},onMouseDown:this._onMouseDown}))),i.createElement(m.Z,{type:"resize",listener:this._onResizeThrottled,options:E}))},t}(i.Component);let S=(0,_.ZP)(w);var C=(0,u.Z)("scroll"),R={},P={passive:!0},k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=c().v4(),n._container=i.createRef(),n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._getContainer().current&&n._emitter.fire(e)},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&R[e.cacheKey]||0;t.scrollTop!==r&&window.requestAnimationFrame(function(){return t.scrollTop=r})},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;t.cacheKey&&(R[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._emitter=new g(n._getContainer()),n._provider={addListener:n._emitter.addListener,getScrollableNode:function(){return n._getContainer().current},getCacheScrollPosition:function(){var e;return n.props.cacheKey&&null!=(e=R[n.props.cacheKey])?e:null},registerStickyElement:n.props.registerStickyElement,unregisterStickyElement:n.props.unregisterStickyElement,updateStickyElement:n.props.updateStickyElement,getStickyElementsOffset:n.props.getStickyElementsOffset,scrollId:n._id,reachedBottom:function(){var e=n._getContainer().current;return!!e&&e.clientHeight+e.scrollTop>=e.scrollHeight-10}},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._restoreScrollPosition(),this._getContainer().current.addEventListener("scroll",this._onScroll,P),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey||t.keepOnUpdate)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._getContainer().current.removeEventListener("scroll",this._onScroll,P),this._emitter.fire(null)},n.render=function(){var e=this.props;return i.createElement("div",{className:C({width:e.width||"narrow",disabled:e.disabled,native:e.native,"full-height":e.fullHeight})},i.createElement("div",{className:C("container"),ref:this._getContainer()},i.createElement("div",{className:C("content")},i.createElement(v.ID,{value:this._provider},e.children,i.createElement(h.Z,{eventHandler:this._onScrollSelf,throttleWait:64})))))},t}(i.Component),x=n(4953),I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._analyticsRef=i.createRef(),n._registerStickyElement=function(e,t,r,o){n._stickyHeights[r][e]=0,n._stickyRefs[r][e]=t,n._stickyListeners[r][e]=o,n._calcStickyPositions(Math.max(e-1,0),r)},n._unregisterStickyElement=function(e,t){delete n._stickyHeights[t][e],delete n._stickyRefs[t][e]},n._updateStickyElement=function(e,t,r){n._stickyHeights[r][e]=t,n._calcStickyPositions(e,r)},n._calcStickyPositions=function(e,t){for(var r,o,i=0,a=0;a<=e;a++)"number"==typeof n._stickyHeights[t][a]&&(i+=n._stickyHeights[t][a]);for(var s=e+1;s<n._stickyHeights[t].length;s++)null==(r=(o=n._stickyListeners[t])[s])||r.call(o,i),"number"==typeof n._stickyHeights[t][s]&&(i+=n._stickyHeights[t][s])},n._isNodeWithinStickyElement=function(e){return n._stickyRefs.top.concat(n._stickyRefs.bottom).some(function(t){var n;return null==(n=t.current)?void 0:n.contains(e)})},n._getStickyElementsOffset=function(e){return n._stickyHeights[e].filter(Boolean).reduce(function(e,t){return e+t},0)},n._onScrollAnalytics=function(e){var t;e&&(null==(t=n._analyticsRef.current)||t.logEvent("onscroll",{height:null==e?void 0:e.clientHeight,scrollHeight:null==e?void 0:e.scrollHeight,scrollPosition:null==e?void 0:e.scrollTop}))},n._renderAnalytics=function(){return n.props.useAnalytics?i.createElement(i.Fragment,null,i.createElement(x.ZP,{name:"scroll",nodeRef:n._analyticsRef}),i.createElement(h.Z,{eventHandler:n._onScrollAnalytics})):null},n._stickyListeners={top:[],bottom:[]},n._stickyHeights={top:[],bottom:[]},n._stickyRefs={top:[],bottom:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,this._isNodeWithinStickyElement)},n.componentWillUnmount=function(){null==this.props.setIsNodeWithinStickyElementRef||this.props.setIsNodeWithinStickyElementRef.call(this.props,void 0)},n.render=function(){var e=this.props.config.uatraits.isMobile||this.props.native?k:S,t=i.createElement(i.Fragment,null,this.props.children,this._renderAnalytics());return i.createElement(e,(0,r._)({},this.props,{children:t,getStickyElementsOffset:this._getStickyElementsOffset,registerStickyElement:this._registerStickyElement,unregisterStickyElement:this._unregisterStickyElement,updateStickyElement:this._updateStickyElement}))},t}(i.Component);let M=(0,_.ZP)(I)},6969:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7363),o=n(4748);let i=function(e){var t=e.view,n=e.withoutMargin,i=e.color,a=(0,o.Z)("spinner-view_"+t);return r.createElement("div",{className:a({"without-margin":n,color:i})},r.createElement("div",{className:a("circle")}))}},7558:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8007),o=n(7363),i=n(576);let a=function(e){function t(){return e.apply(this,arguments)}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;window.addEventListener(e.type,e.listener,e.options)},n.componentDidUpdate=function(e){var t=this.props;e.listener===t.listener&&(0,i.Z)(e.options,t.options)||(window.removeEventListener(e.type,e.listener,e.options),window.addEventListener(t.type,t.listener,t.options))},n.componentWillUnmount=function(){var e=this.props;window.removeEventListener(e.type,e.listener,e.options)},n.render=function(){return null},t}(o.Component)},3546:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(8188),o=n(7363),i=n(4748),a=n(1336),s=n(3085),l=n(9394),c=n(4953),u=n(3988),d=(0,i.Z)("zoom-control");let p=function(e){var t,n=(0,a.ZR)(),i=!!n.mapWidget,p=null!=(t=e.size)?t:n.uatraits.isMobile?"xmedium":"medium",m=(0,r._)(n.uatraits.isMobile&&!i?[u.zoomIn48Icon,u.zoomOut48Icon]:['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.992c0-.537.448-.992 1-.992.556 0 1 .444 1 .992V11h5.008c.537 0 .992.448.992 1 0 .556-.444 1-.992 1H13v5.008c0 .537-.448.992-1 .992-.556 0-1-.444-1-.992V13H5.992C5.455 13 5 12.552 5 12c0-.556.444-1 .992-1H11V5.992z" fill="currentColor"/></svg>','<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 12a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z" fill="currentColor"/></svg>'],2),f=m[0],h=m[1];return o.createElement("div",{className:d()},o.createElement("div",{className:d("group")},o.createElement("div",{className:d("zoom-in")},o.createElement(l.Z,{text:"Приблизить",position:"left",isDisabled:e.disabledZoomIn,isAir:!0},o.createElement(c.ZP,{name:"zoom_in",logClick:!0},o.createElement(s.Z,{view:"air",size:p,icon:o.createElement("div",{className:d("icon"),dangerouslySetInnerHTML:{__html:f}}),onClick:e.onZoomIn,ariaLabel:"Приблизить",disabled:e.disabledZoomIn,pinBottom:!n.uatraits.isMobile||i})))),o.createElement("div",{className:d("zoom-out")},o.createElement(l.Z,{text:"Отдалить",position:"left",isDisabled:e.disabledZoomOut,isAir:!0},o.createElement(c.ZP,{name:"zoom_out",logClick:!0},o.createElement(s.Z,{view:"air",size:p,icon:o.createElement("div",{className:d("icon"),dangerouslySetInnerHTML:{__html:h}}),ariaLabel:"Отдалить",onClick:e.onZoomOut,disabled:e.disabledZoomOut,pinTop:!n.uatraits.isMobile||i}))))))}},3911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(7363),o=n(2850),i=n(4953);let a=function(e){return r.createElement(o.Z,{type:"mapNode"},r.createElement(i.ZP,e,e.children))}},1690:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8007),o=n(7363),i=n(1533),a=n(473);let s=function(e){function t(t){var n;return(n=e.call(this,t)||this)._addListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.addEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.addEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._removeListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.removeEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.removeEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._onHideAnimationEnd=function(){var e;(null==(e=n.props.animationRef)?void 0:e.current)&&n._removeListeners(n.props.animationRef.current),i.flushSync(function(){n.setState({content:null},n.props.onHideEnd)})},n.state={content:t.children},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.children&&this.setState({content:this.props.children},this.props.onShow)},n.componentDidUpdate=function(e){var t=this.props.children;if(t)t!==e.children&&this.setState({content:t},this.state.content?void 0:this.props.onShow);else{var n,r=null==(n=this.props.animationRef)?void 0:n.current;r&&(this._addListeners(r),r.classList.add("_animation-hide")),this.props.onHideStart&&this.props.onHideStart()}},n.componentWillUnmount=function(){var e;(null==(e=this.props.animationRef)?void 0:e.current)&&this._removeListeners(this.props.animationRef.current)},n.render=function(){return this.state.content},t}(o.Component)},5164:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,o=n(4788),i=n(2467),a=n(6145),s=n(129);let l=function(e){var t=s.stringify(e,{sort:function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}});return t?String(function(e){for(var t=e.length,n=5381,r=0;r<t;r++)n=33*n^e.charCodeAt(r);return n>>>0}(t)):""},c=function e(t,n,s,c){var u={csrfToken:r||s.csrfToken,sessionId:s.counters.analytics.sessionId,host_config:s.hostConfig,ajax:"1"};s.query["no-mail"]&&(u["no-mail"]=!0),s.query["no-cache"]&&(u["no-cache"]=!0),s.query.debug&&(u.debug=s.query.debug),s.mocks&&(u.mocks=0!==Object.keys(s.mocks).length?s.mocks:"1");var d={url:(n.baseUrl||s.baseUrl)+"/api/"+t,method:"body"in n&&n.body?"POST":"GET",headers:(0,o._)({"X-Retpath-Y":window.location.href},n.headers)};"body"in n&&n.body&&(d.body=JSON.stringify(n.body),d.headers=(0,o._)({},d.headers,{"Content-Type":"application/json; charset=utf-8"}));var p=(0,o._)({},u,"query"in n&&n.query?n.query:{}),m=l(p);return d.query=(0,o._)({},p,{s:m}),"prestable"===s.environment&&(d.headers=(0,o._)({},d.headers,{"X-Ya-Maps-Prestable":"1"})),(0,i.Z)(d).then(function(o){if("type"in o&&"captcha"===o.type)throw window.location.href=o.captcha["captcha-page"],Error("Response is captcha");if("csrfToken"in o){if(!1!==c)return r=o.csrfToken,e(t,n,s,!1);throw Error("Invalid csrf token")}if(o.debug&&(0,a.v)(o.debug),"error"in o)throw"message"in o.error?Error(o.error.message):o.error;return o.data})}},2869:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r={create:function(e,t){var n=t.success,r=t.fail,o=t.always,i=!1;return e.then(function(e){!i&&(n&&n(e),o&&o(null,e))},function(e){!i&&(r&&r(e),o&&o(e))}),{cancel:function(){return i=!0}}},cancel:function(e){e&&e.cancel()}}},473:(e,t,n)=>{"use strict";n.d(t,{r1:()=>o});var r=n(2967);n(5650);var o=function(){return{events:{transitionEnd:i("transition"),animationEnd:i("animation")},styles:{transform:s("transform"),transition:s("transition"),userSelect:s("user-select")},cssStyles:{transform:a("transform"),transformOrigin:a("transform-origin")},has:{touch:"ontouchstart"in window||!!window.navigator.maxTouchPoints,retinaDisplay:window.devicePixelRatio>1,printColorAdjust:null!==l("printColorAdjust"),snapAlign:null!==l("scrollSnapAlign"),objectFit:null!==l("objectFit")}}};function i(e){var t=l(e);return t?t+(0,r.Z)(e)+"End":null!==t?e+"end":null}function a(e){var t=l(e);return t?"-"+t+"-"+e:null!==t?e:null}function s(e){var t=l(e);return t?t+c(e):null!==t?e:null}function l(e){var t=window.document.createElement("div");return void 0!==t.style[e]?"":void 0!==t.style["webkit"+c(e)]?"webkit":void 0!==t.style["Moz"+c(e)]?"Moz":void 0!==t.style["ms"+c(e)]?"ms":null}function c(e){return e.split("-").map(function(e){return(0,r.Z)(e)}).join("")}},1057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4788),o=n(224),i=n(7363),a=n(1392),s=n(3752),l=n(5645),c=function(e){var t,n=i.useRef(null),o=e.clickableRef||n,l=(0,s.p)({ref:o,skipBlurOnPress:e.skipBlurOnPress}),c=(t=({callback:e.callback}).callback,i.useCallback(function(e,n){if(e.keyCode===a.n.ENTER||e.keyCode===a.n.SPACE){var r=n||t;null==r||r(e)}},[t]));return(0,r._)({},l,{onKeyDown:c,ref:o})};let u=(0,l.Z)(function(e){var t=e.children,n=e.tag,a=e.forwardedRef,s=e.ariaHidden,l=e.ariaLabel,u=e.onClick,d=e.role,p=e.skipBlurOnPress,m=(0,o._)(e,["children","tag","forwardedRef","ariaHidden","ariaLabel","onClick","role","skipBlurOnPress"]),f=c({callback:e.onClick,clickableRef:a,skipBlurOnPress:p}),h=s||!u,v="string"==typeof t?t:l,g=i.useCallback(function(t){f.onMouseLeave(t),null==e.onMouseLeave||e.onMouseLeave.call(e,t)},[f,e]),_=i.useCallback(function(t){f.onMouseDown(t),null==e.onMouseDown||e.onMouseDown.call(e,t)},[f,e]);return i.createElement(void 0===n?"div":n,(0,r._)({},m,f,{onMouseDown:_,onMouseLeave:g,onClick:u,"aria-hidden":h,"aria-label":v,role:d||"button",tabIndex:h?-1:0}),t)})},5650:(e,t,n)=>{"use strict";n(6504),n(5462)},5645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4788),o=n(7363);let i=function(e){return o.forwardRef(function(t,n){return o.createElement(e,(0,r._)({},t,{forwardedRef:n||void 0}),t.children)})}},18:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4788),o=n(8188),i=n(129),a=n(770),s=n(4430),l=["","permission_denied","position_unavailable","timeout","unknown"],c=function(e){this.message=e,this.code=l.indexOf(e)},u={ERROR_TYPES:l,getCurrentPosition:function(e,t){var n,r,o;return(void 0===t&&(t=6e4),(null==(n=e.query.mocks)?void 0:n.geolocation)==="denied")?Promise.reject(new c("permission_denied")):(null==(r=e.query.mocks)?void 0:r.geolocation)==="unavailable"?Promise.reject(new c("position_unavailable")):(null==(o=(0,s.W)())||o.logEvent("geolocation_request"),p({timeout:t}).then(function(t){var n,r,o,i=t.coords;null==(n=(0,s.W)())||n.logEvent("geolocation_success",{accuracy:i.accuracy});var a=f(null==(r=e.query.mocks)?void 0:r.geolocation),l=a?{accuracy:null!=(o=a.accuracy)?o:i.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:i;return d(l,e),l}).catch(function(e){var t;if(null==(t=(0,s.W)())||t.logEvent("geolocation_fail",{type:(null==e?void 0:e.code)?u.ERROR_TYPES[e.code]:"unknown"}),e)throw e;throw new c("unknown")}))},watchPosition:function(e,t,n){if(void 0===n&&(n=6e4),(null==(h=t.query.mocks)?void 0:h.geolocation)==="denied")return e.onError("permission_denied"),0;if((null==(v=t.query.mocks)?void 0:v.geolocation)==="unavailable")return e.onError("position_unavailable"),0;null==(g=(0,s.W)())||g.logEvent("geolocation_watch_request");var o,i,a,l,c,m,h,v,g,_=!1;return o=function(n){_||(null==(o=(0,s.W)())||o.logEvent("geolocation_watch_success",{accuracy:n.coords.accuracy}),_=!0);var r,o,i,a=f(null==(r=t.query.mocks)?void 0:r.geolocation),l=a?{accuracy:null!=(i=a.accuracy)?i:n.coords.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:n.coords;d(l,t),e.onSuccess(l)},i=function(t){var n,r=(null==t?void 0:t.code)?u.ERROR_TYPES[t.code]:"unknown";_||(null==(n=(0,s.W)())||n.logEvent("geolocation_watch_fail",{type:r}),_=!0),e.onError(r)},a={timeout:n},(null==(c=window.yandex)?void 0:null==(l=c.mapsApp)?void 0:l.getCurrentUserLocation)?window.setInterval(function(){return p(a).then(o).catch(i)},null!=(m=null==a?void 0:a.timeout)?m:6e4):window.navigator.geolocation.watchPosition(o,i,(0,r._)({enableHighAccuracy:!0},a))},clearWatch:function(e){var t,n;(null==(n=window.yandex)?void 0:null==(t=n.mapsApp)?void 0:t.getCurrentUserLocation)?window.clearInterval(e):window.navigator.geolocation.clearWatch(e)},checkPermission:function(e){var t,n;return(null==(t=e.query.mocks)?void 0:t.geolocation)==="denied"||(null==(n=e.query.mocks)?void 0:n.geolocation)==="unavailable"?Promise.reject("denied"):window.navigator.permissions?Promise.race([window.navigator.permissions.query({name:"geolocation"}).then(function(e){return e.state}),a.Vs(2e3)]).catch(function(){}):Promise.resolve(void 0)}};function d(e,t){t.isYango||!e||e.accuracy>5e3||(new window.Image().src=t.morda.url+"/gpsave?"+i.stringify({sk:t.xscriptCsrfToken,lat:e.latitude,lon:e.longitude,precision:e.accuracy}))}function p(e){var t,n,o,i=null==(n=window.yandex)?void 0:null==(t=n.mapsApp)?void 0:t.getCurrentUserLocation;return i?Promise.race([i().then(function(e){return"string"==typeof e?JSON.parse(e):e}).catch(function(){throw new c("position_unavailable")}),a.Vs(null!=(o=null==e?void 0:e.timeout)?o:6e4).then(function(){throw new c("timeout")})]):new Promise(function(t,n){return window.navigator.geolocation.getCurrentPosition(t,n,(0,r._)({enableHighAccuracy:!0},e))})}var m=/^\d+\.?(\d+)?,\d+\.?(\d+)?(,\d+)?$/;function f(e){if(m.test(e)){var t=(0,o._)(e.split(",").map(Number),3);return{latitude:t[0],longitude:t[1],accuracy:t[2]}}}let h=u},3752:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(4788),o=n(8188),i=n(7363);function a(e){var t=(0,o._)(i.useState(!1),2),n=t[0],a=t[1],s=i.useCallback(function(){return a(!1)},[a]),l=i.useCallback(function(){return a(!0)},[a]),c=i.useCallback(function(){if(n&&e.ref.current===window.document.activeElement&&!e.skipBlurOnPress){var t;null==(t=e.ref.current)||t.blur()}},[e,n]);return(0,r._)({},{onMouseLeave:s,onMouseDown:l,onFocus:c})}},3228:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4788),o=n(8007),i=n(7363),a=n(4748),s=n(2467),l=n(2869),c=n(1057),u=n(5877),d=n.n(u),p={},m={},f=(0,a.Z)("inline-image");let h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._load=function(){l.Z.cancel(n._loadAction);var e=n.props.url;""!==e&&(m[e]||(m[e]=(0,s.Z)({url:e,parser:"string"}),m[e].then(function(t){return p[e]=t},function(){return delete m[e]})),n._loadAction=l.Z.create(m[e],{success:function(){return n.setState({loaded:!0})}}))},n._generatedId=d().v4(),n.state={loaded:!!p[n.props.url]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.loaded||this._load()},n.componentDidUpdate=function(e){if(this.props.url!==e.url){l.Z.cancel(this._loadAction);var t=!!p[this.props.url];this.setState({loaded:t}),t||this._load()}},n.componentWillUnmount=function(){l.Z.cancel(this._loadAction)},n.render=function(){var e,t=this.props,n=p[t.url],o=null==n?void 0:null==(e=n.match(/<clipPath[^>]+id="([^"]+)"/))?void 0:e[1];return(o&&(n=n.replace(RegExp(o,"g"),this._generatedId)),t.children)?t.children(n||""):i.createElement(c.Z,{tag:"span",key:this.state.loaded?0:1,style:(0,r._)({},t.style,{fontSize:0,lineHeight:0}),ariaLabel:t.ariaLabel,ariaHidden:t.ariaHidden,className:f({loaded:this.state.loaded})+(t.className?" "+t.className:""),onClick:t.onClick,dangerouslySetInnerHTML:{__html:n||""}})},t}(i.PureComponent)},427:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1912),o={};let i=function(e,t){var n=e.toString();return o[n]||Object.keys(t).reduce(function(t,i){return t[i]=function(){for(var t=arguments.length,a=Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(t){var s,l=function(e){return t((s=e)[i].apply(s,(0,r._)(a)))};return o[n]?l(o[n]):e().then(function(e){var t=e.default;return l(o[n]=t)},function(e){var n;return t((n=e.message,function(e,t){e({type:"EXTEND",payload:{loadingErrors:(0,r._)(t().loadingErrors).concat([n])}})}))})}},t},{})}},8599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8007),o=n(224),i=n(7363),a=n(8216);let s=function(e,t,n){void 0===n&&(n={});var s=!1,l=function(t){function a(){return t.apply(this,arguments)}(0,r._)(a,t);var l=a.prototype;return l.shouldComponentUpdate=function(e){return n.withSideEffect?e.shouldRender:!s&&!this.props.shouldRender&&e.shouldRender},l.componentDidUpdate=function(e){!e.shouldRender&&this.props.shouldRender&&(s=!0)},l.render=function(){var t=this.props,r=t.shouldRender,a=(0,o._)(t,["shouldRender"]);return r?i.createElement(e,a):n.placeholder||null},a}(i.Component);return a.$j(function(e){return{shouldRender:t(e)}})(l)}},3272:(e,t,n)=>{"use strict";n.d(t,{k7:()=>o,sL:()=>i,M8:()=>l,Uc:()=>c,h9:()=>f,OO:()=>h,b:()=>v,aC:()=>a,EB:()=>s,mH:()=>u,B1:()=>d,iR:()=>p,WN:()=>m,mu:()=>g,US:()=>_,az:()=>y,Uv:()=>b,cg:()=>E,Cb:()=>w});var r=n(1912),o=["object/add"],i=["entrance/add","address/add","road/add","other/add","transit/stop/add","parking/add","barrier/add","fence/add","crosswalk/add","gate/add","provider/add"],a=["object/edit"],s=["object/other","address/edit","entrance/edit","object/location/edit","object/name/edit","object/not-found"],l=["assignment/organization/status"],c=["assignment/barrier/edit","assignment/gate/edit","assignment/entrance/edit","assignment/settlement/scheme/add","assignment/address/add"],u=["transit/stop/edit"],d=["transit/stop/not-found","transit/stop/name/edit","transit/stop/location/edit","transit/stop/route/incorrect","transit/stop/other"],p=["subway/edit"],m=["subway/not-found","subway/name/edit","subway/location/edit","subway/other"],f=["organization/add"],h=["organization/edit","organization/closed"],v=["organization/edit-info","organization/other","organization/closed-full","organization/closed/permanently","organization/closed/temporary","organization/closed/unknown","organization/opened","organization/moved","organization/location/edit","organization/edit-accessibility"],g=["route/edit","route/incorrect"],_=["route/edit/better","route/incorrect/road-closed","route/incorrect/poor-condition","route/incorrect/prohibiting-sign","route/incorrect/obstruction","route/incorrect/other","route/other"],y=["object/select"],b=["map/edit"],E=["spot/other"];(0,r._)(["ru.yandex.yandexnavi","ru.yandex.yandexnavi.inhouse","ru.yandex.yandexnavi.sandbox","ru.yandex.yandexnavi.debug","ru.yandex.yandexnavi.pr","ru.yandex.mobile.navigator","ru.yandex.mobile.navigator.inhouse","ru.yandex.mobile.navigator.sandbox"]).concat((0,r._)(["desktop-yango-maps","touch-yango-maps","com.yango.maps.android.pr","com.yango.maps.android.debug","com.yango.maps.ios.inhouse","com.yango.maps.ios.sandbox","com.yango.maps.android","com.yango.maps.ios","ru.yandex.yango","ru.yandex.yango.develop","ru.yandex.yango.inhouse","com.yandex.yango","com.yandex.yango.develop","com.yandex.yango.debug","com.yango.driver","com.yango.driver.beta","com.yango.driver.flutter.ios","com.yango.driver.flutter.ios.develop","ru.yandex.taximeter","ru.yandex.taximeter.flutter.ios","ru.yandex.taximeter.flutter.ios.develop","ru.yandex.taximeter.flutter.ios.develop.debug","ru.yandex.taximeter.flutter.ios.inhouse","ru.yandex.taximeter.beta"]),["web","mobile_maps_android","mobile_maps_ios","serp","tycoon","webview_form","ugc","nyak","ru.yandex.searchplugin","ru.yandex.yandexmaps","ru.yandex.traffic","ru.yandex.traffic.sandbox","ru.yandex.traffic.inhouse","ru.yandex.yandexmaps.debug","ru.yandex.yandexmaps.pr","com.yandex.maps.TestApp","com.yandex.maps.testapp","com.yandex.maps.mrctestapp","com.yandex.maps.mrctestapp.testing","com.yandex.browser","ru.yandex.mobile","ru.yandex.mobile.search","desktop-maps","touch-maps","touch-nmaps"]);var w=["feedback.common.error_in_geo_object_menu","feedback.common.add_object_to_map","feedback.spot_other.finish","feedback.finish_form.edit_status_carousel","toponym.add_finish","toponym.edit_finish","organization.add_finish","organization.edit_finish","ugc_profile.feedbacks_footer","ugc_profile.feedbacks_footer.edit_map","ugc_profile.feedbacks_footer.add_object","ugc_profile.feedbacks_placeholder","ugc_profile.feedbacks_drafts.feedbacks_draft","ugc_profile.assignments_placeholder.add_object","ugc_profile.assignments_push_placeholder.edit_object","ugc_profile.organization_edit_status_assignment.edit","ugc_profile.organization_edit_status_assignment.submit","ugc_profile.barrier_assignment.edit","ugc_profile.gate_assignment.edit","ugc_profile.add_address_assignment.edit","ugc_profile.settlement_scheme_assignment.edit","ugc_profile.entrances_assignment.edit","ugc_profile.review_impression.closed","map.context","map.controls","organization.footer","organization.features","organization.search_result","toponym.search_results","toponym.default","toponym.building","toponym.building_without_address","toponym.add_object","route.routes_list","route.detailed_info","user_profile.edit_map","masstransit.default","masstransit.subway"]},9920:(e,t,n)=>{"use strict";n.d(t,{qv:()=>S,W3:()=>i,bl:()=>l,RP:()=>a,Qr:()=>s,NM:()=>c,OI:()=>u,ai:()=>d,mR:()=>p,KT:()=>m,LB:()=>f,Rf:()=>g,UZ:()=>h,pj:()=>v,xT:()=>y,cV:()=>C,T_:()=>b,XS:()=>E,fU:()=>w});var r=n(3272);function o(e){return r.sL.includes(e)}function i(e){return r.k7.includes(e)||o(e)}function a(e){return r.aC.includes(e)}function s(e){return r.EB.includes(e)}function l(e){return a(e)||s(e)}function c(e){return r.mH.includes(e)}function u(e){return r.B1.includes(e)}function d(e){return r.iR.includes(e)}function p(e){return r.WN.includes(e)}function m(e){var t;return d(e)||p(e)||c(t=e)||u(t)}function f(e){return r.h9.includes(e)}function h(e){return r.OO.includes(e)}function v(e){return r.b.includes(e)}function g(e){return h(e)||v(e)}function _(e){return r.US.includes(e)}function y(e){return r.mu.includes(e)||_(e)}function b(e){return r.az.includes(e)}function E(e){return r.Uv.includes(e)}function w(e){return r.cg.includes(e)}function S(e){var t;return r.M8.includes(e)||r.Uc.includes(e)||o(e)||s(e)||u(e)||p(e)||v(t=e)||f(t)||_(e)||w(e)}function C(e){return o(e)||_(e)||w(e)||["transit/stop/location/edit","object/location/edit","entrance/edit","subway/location/edit"].includes(e)}},5128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(8007),o=n(7363),i=n(4748),a=n(6653),s=n(1336),l=n(4953),c=n(7313),u=n(4054),d=n(1494),p=n(5172),m=(0,i.Z)("geolocation-pin"),f={fill:"#000",fillOpacity:.05,stroke:[{width:1,opacity:.07,color:"#000"}],interactive:!1,zIndex:c.I.minimum,simplificationRate:0},h=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(o.Fragment,null,o.createElement(l.ZP,{name:"geolocation_pin"},o.createElement(a.Z,{coordinates:e.currentPosition,zIndex:c.I.minimum,nonInteractive:!0},o.createElement("div",{className:m()},o.createElement("div",{className:m("shadow")},o.createElement(d.Z,{name:"map-placemark-dot-shadow-32"})),o.createElement("div",{className:m("placemark")},o.createElement(d.Z,{name:"map-placemark-dot-32",theme:e.theme}))))),e.config.uatraits.isMobile?o.createElement(u.Z,{center:e.currentPosition,radius:e.accuracy,drawingStyle:f}):null)},t}(o.Component);let v=(0,p.ZP)((0,s.ZP)(h))},9290:(e,t,n)=>{},5663:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var r=n(4788),o=n(8007),i=n(8188),a=n(1912),s=n(7363),l=n(1533),c=n(9705),u=n(5846),d=n(9297),p=n(7434),m=n(3647),f=n(3688),h=n(7677),v=n(2869),g=n(7418),_=n(18),y=n(2830),b=n(1336),E=n(4243),w=n(3418),S=n(5128),C=n(3109),R=n(7477),P=n(9360),k=n(5348),x=n(734),I=n(3428),M=n(9687),T=n(7840),Z=n(5684),D=n(6187),L=n(1815),A=n(2002),N=n(7297),z=n(4479),U=n(8225),F=n(7575),O=(0,u.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,2708))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2708}},{ssr:!1}),q=(0,u.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,6276))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 6276}},{ssr:!1}),B=[50,70,72,50],H={passive:!1},W=function(e){function t(t){(n=e.call(this,t)||this)._getInitialContent=function(){var e=n.props,t=null==(i=e.config.mapWidget)?void 0:i.activeMode,r=null==(a=n.props.config.poiPreloadedResults)?void 0:a.items[0];if("routes"===t&&n.props.config.routerResponse)return{type:"route",data:{}};if("poi"===t&&r)return{type:"search",data:{result:r,coordinates:r.coordinates}};if("stop"===t&&e.config.masstransitStop)return{type:"masstransit-stop",data:{stop:e.config.masstransitStop,coordinates:e.config.masstransitStop.coordinates}};if("whatshere"===t&&(null==(s=n.props.config.whatsherePreloadedResults)?void 0:s.items[0])){var o=n.props.config.whatsherePreloadedResults.items[0];return{type:"search",data:{result:o,coordinates:o.coordinates}}}if("search"===t&&(n.props.config.searchPreloadedResults||(null==(l=n.props.config.mapWidget)?void 0:l.activeObject))){var i,a,s,l,c,u,d,p,m=null==(u=n.props.config.mapWidget)?void 0:null==(c=u.activeObject)?void 0:c.items[0],f=(null==(d=n.props.config.searchPreloadedResults)?void 0:d.resultsCount)===1?n.props.config.searchPreloadedResults.items[0]:void 0,h=m||(null==(p=n.props.config.searchPreloadedResults)?void 0:p.exactResult)||f;if((null==h?void 0:h.type)==="business"||(null==h?void 0:h.type)==="toponym")return{type:"search",data:{result:h,coordinates:h.coordinates}};if(!h&&!(0,N.h)(e.mapSize))return{type:"search-list"}}return null},n._getInitialRoutesState=function(){var e,t=null!=(e=({auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"})[n.props.config.query.rtt])?e:"auto";return{routerResponse:n.props.config.routerResponse?p.NA(n.props.config.routerResponse):null,routePoints:n.props.config.routePoints||[],travelMode:t,activeRouteIndex:Number(n.props.config.query.rtn)||0,formActiveFieldIndex:-1,isPointDragging:!1,isFormFocused:!1,isFormOpened:!1}},n._isRichRoutesClient=function(){var e;return!!(null==(e=n.props.config.mapWidget)?void 0:e.constructorApiValidKey)},n._onRouterResponseLoad=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e,activeRouteIndex:0})})),n._updateContentData({type:"route",data:{}})},n._onRouterResponseError=function(e){n.setState((0,r._)({},n.state,{routes:(0,r._)({},n.state.routes,{routerResponse:e})}))},n._getIsPoiEnabled=function(e,t){return e>=295&&t>=400},n._deepSetState=function(e,t){n.setState(function(t){return(0,g.Z)(t,e)},t)},n._onGeolocationControlClick=function(){n._makeGeolocationRequest()},n._makeGeolocationRequest=function(){var e=n.props.config;n.setState({geolocation:{isStarted:!0}}),n._getLocationAction=v.Z.create(_.Z.getCurrentPosition(e,1500),{success:n._onGeolocationSuccess,fail:n._onGeolocationFail})},n._onGeolocationSuccess=function(e){n._updateLocationRequest({center:[e.longitude,e.latitude],duration:1e3,zoom:e.accuracy<=200?16:void 0}),n._deepSetState({geolocation:{isStarted:!1,accuracy:e.accuracy,currentPosition:[e.longitude,e.latitude]}})},n._onGeolocationFail=function(){var e;(null==(e=n.props.config.mapWidget)?void 0:e.userCoordinates)&&(n._updateLocationRequest({center:n.props.config.mapWidget.userCoordinates,duration:1e3}),n._deepSetState({geolocation:{isStarted:!1,currentPosition:n.props.config.mapWidget.userCoordinates,accuracy:1e3}}))},n._updateLocation=function(e){n._deepSetState({map:{location:e}})},n._updateLocationRequest=function(e){n.setState(function(t){return{map:(0,r._)({},t.map,{locationRequest:e})}})},n._onRoutesBoundsChange=function(e){var t=d.$Y({bounds:e},B,n.state.map.size);n._updateLocationRequest(t)},n._onSearchBoundsChange=function(e){var t=d.$Y({bounds:e},B,n.state.map.size);n._updateLocationRequest(t)},n._updateRuler=function(e){n._deepSetState({ruler:e})},n._onTrafficLevelChange=function(e){n._deepSetState({traffic:{level:e}})},n._onTrafficControlClick=function(){var e=n._getContentData("traffic");n._deepSetState({traffic:{isActive:!n.state.traffic.isActive},content:e?void 0:n.state.content})},n._onRichRoutesControlClick=function(){var e=!n.state.routes.isFormOpened,t=2===n.state.routes.routePoints.length,o=t?n.state.routes.routePoints:[p.Yo(),p.Yo()];n._deepSetState({routes:(0,r._)({isFormOpened:e},e?{isFormFocused:!0,routePoints:o,routerResponse:t?n.state.routes.routerResponse:null}:{})},function(){n._deepSetState({routes:{formActiveFieldIndex:n._getEmptyRoutePointIndex()}})})},n._setMapSize=function(e){n._deepSetState({map:{size:e}})},n._updateContentData=function(e){n.setState({content:e})},n._processMapObjectClick=function(e,t){var r=n._getEmptyRoutePointIndex();-1!==r?n._updateRoutePointByMap(e,r):t()},n._onTrafficLayerClick=function(e,t){var r,o=n.props;if(e){var i=e.properties,a=i.HotspotMetaData,s=i.vectorMetadata,l=(null==s?void 0:s.get("objectId"))||(null==a?void 0:a.id);if(l){var c=null==(r=e.geometry)?void 0:r.coordinates;n._processMapObjectClick({value:"",coords:c&&2===c.length?c:t.coordinates},function(){c&&2===c.length&&(v.Z.cancel(n._asyncRoadEventAction),n._asyncRoadEventAction=v.Z.create(y.Z.getRoadEvent(l,o.config),{success:function(e){e&&e.position&&n._updateContentData({type:"traffic",data:{event:e,coordinates:e.position}})},fail:function(){return n._resetContentData()}}))})}}},n._onRouteClick=function(e,t){var r,o=((null==(r=n.state.routes.routerResponse)?void 0:r.routes)||[]).indexOf(e);n._updateContentData({type:"route",data:{coordinates:t}}),n._deepSetState({routes:{activeRouteIndex:-1!==o?o:0}})},n._onUserMapsFeatureClick=function(e,t){n._processMapObjectClick({coords:t,value:""},function(){var r,o=null==(r=n.props.config.userMap)?void 0:r.features[e];o&&n._updateContentData({type:"user-maps",data:{feature:o,coordinates:t}})})},n._onPlacemarkClick=function(e){var t={coords:e.coordinates,value:e.title,uri:e.uri};n._processMapObjectClick(t,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"search",data:{result:e,coordinates:e.coordinates}});else{var t="business"===e.type?m.S$({id:e.id,seoname:e.seoname}):m.hL(e,e.region,{skipPointCheck:!0});if(t){var r=(0,f._)(m.e_("/"+t,n.props.config));window.open(r,"_blank")}}})},n._onMasstransitPlacemarkClick=function(e){var t,r={coords:e.coordinates,value:e.name,uri:null==(t=e.searchResult)?void 0:t.uri};n._processMapObjectClick(r,function(){if(n.state.isPoiEnabled)n._updateContentData({type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}});else{var t=e.region?m.uf(e,e.region):"";if(t){var r=(0,f._)(m.e_("/"+t,n.props.config));window.open(r,"_blank")}}})},n._resetContentData=function(){n._deepSetState({content:null})},n._updateRoutePointDragging=function(e){l.flushSync(function(){var t;n._deepSetState({routes:{isPointDragging:e},content:(null==(t=n.state.content)?void 0:t.type)==="route"?null:n.state.content})})},n._updateRoutePointByMap=function(e,t){if(n.state.routes.isPointDragging){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})}else n._getRoutePointAction=v.Z.create((0,w.Kc)(e,n.props.config,"router").catch(function(){return null}),{success:function(r){r?(e.value=(null==r?void 0:r.title)||"",e.input=(null==r?void 0:r.title)||"",e.searchResult=r):e.coords&&(e.value=(0,c.s)(e.coords),e.input=(0,c.s)(e.coords));var o=(0,a._)(n.state.routes.routePoints);o[t]=e,n._deepSetState({routes:{routePoints:o}})}})},n._getEmptyRoutePointIndex=function(e){return(void 0===e&&(e=n.state.routes.routePoints),n._isRichRoutesClient()&&!n.state.routes.isFormOpened)?-1:e.findIndex(function(e){return!e.coords})},n._getRoutePointsDraggableIndexes=function(){return n._isRichRoutesClient()?(n.state.routes.routePoints||[]).map(function(e,t){return t}):(n.props.config.routePoints||[]).reduce(function(e,t,n){return t.coords||e.push(n),e},[])},n._onRoutesFormTravelModeChange=function(e){n._deepSetState({routes:{travelMode:e}})},n._onRoutesFormFocus=function(e){n._deepSetState({routes:{isFormFocused:!0,formActiveFieldIndex:e}})},n._onRoutesFormBlur=function(){n._deepSetState({routes:{isFormFocused:!1,formActiveFieldIndex:-1}})},n._onRoutesFormReset=function(){n._deepSetState({routes:{routePoints:[p.Yo(),p.Yo()],routerResponse:null}})},n._onRoutesFormClose=function(){n._deepSetState({routes:{isFormOpened:!1}})},n._onRoutesFormRoutePointSubmit=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e;var o=n._getEmptyRoutePointIndex(r);n._deepSetState({routes:{routePoints:r,formActiveFieldIndex:o}})},n._onRoutesFormRoutePointInputChange=function(e,t){var r=(0,a._)(n.state.routes.routePoints);r[t]=e,n._deepSetState({routes:{routePoints:r}})},n._onRoutesFormRoutePointClear=function(e){var t=(0,a._)(n.state.routes.routePoints);t[e]=p.Yo(),n._deepSetState({routes:{routePoints:t,routerResponse:null}})},n._onRoutesFormRoutePointMovePosition=function(e,t){var r=(0,a._)(n.state.routes.routePoints),o=(0,i._)(r.splice(e,1),1)[0];r.splice(t,0,o),n._deepSetState({routes:{routePoints:r}})},n._onPoiClick=function(e,t){var r=e.properties.uri,o=e.geometry&&e.geometry.coordinates||t.coordinates;n._processMapObjectClick({coords:o,value:e.properties.name||"",uri:r},function(){n.setState({poiData:{coordinates:o,feature:e}})})},n._getCursor=function(){var e=n._getEmptyRoutePointIndex();if(-1!==e&&!n.props.config.uatraits.isPhone&&!n.state.ruler.isEnabled)return p.Bq(e,n.state.routes.routePoints)+"_"+e},n._getContentData=function(e){var t;if((null==(t=n.state.content)?void 0:t.type)===e)return n.state.content},n._preventZoomByPinching=function(e){"scale"in e&&1!==e.scale&&e.touches.length>1&&e.preventDefault()},n._renderRichRoutesControl=function(){return n._isRichRoutesClient()?s.createElement(O,{isActive:n.state.routes.isFormOpened,onClick:n._onRichRoutesControlClick}):null},n._renderInMapsControl=function(e){return F.md(n.props.config)?null:s.createElement(z.Z,{state:n.state,size:e})},n._renderGeolocationPin=function(){return n.state.geolocation.currentPosition&&n.state.geolocation.accuracy?s.createElement(S.Z,{currentPosition:n.state.geolocation.currentPosition,accuracy:n.state.geolocation.accuracy}):null},n._renderTrafficLayer=function(){return n.state.traffic.isActive?s.createElement(x.Z,{mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onClick:n._onTrafficLayerClick,onTrafficLevelChange:n._onTrafficLevelChange,resetContentData:n._resetContentData,content:n._getContentData("traffic")}):null},n._renderUserMaps=function(){return n.props.config.userMap?s.createElement(M.Z,{userMap:n.props.config.userMap,mapLocation:n.state.map.location,mapSize:n.state.map.size,updateLocationRequest:n._updateLocationRequest,onFeatureClick:n._onUserMapsFeatureClick,cursor:n._getCursor(),resetContentData:n._resetContentData,content:n._getContentData("user-maps")}):null},n._renderSearchResult=function(){return s.createElement(T.Z,{mapSize:n.state.map.size,mapLocation:n.state.map.location,isTrafficLayerEnabled:n.state.traffic.isActive,updateLocationRequest:n._updateLocationRequest,content:n.state.isPoiEnabled?n._getContentData("search"):void 0,onContentClose:n._resetContentData,onStaticPlacemarkClick:n._onPlacemarkClick})},n._renderSearchComponentWithControl=function(){var e;return s.createElement(A.Z,{mapLocation:n.state.map.location,mapSize:n.state.map.size,activeResult:null==(e=n._getContentData("search"))?void 0:e.data.result,onSearchBoundsChange:n._onSearchBoundsChange,isResultsListShown:!!n._getContentData("search-list"),onResultClick:n._onPlacemarkClick,onResultsListOpen:function(){return n._updateContentData({type:"search-list"})},onResultsListClose:function(){return n._updateContentData(null)}})},n._renderRichRoutesForm=function(){var e=n.state;return n._isRichRoutesClient()&&e.routes.isFormOpened?s.createElement(q,{travelMode:e.routes.travelMode,routePoints:e.routes.routePoints,routerResponse:e.routes.routerResponse,activeFieldIndex:e.routes.formActiveFieldIndex,isFocused:e.routes.isFormFocused,mapLocation:e.map.location,mapSize:e.map.size,onTravelModeChange:n._onRoutesFormTravelModeChange,onReset:n._onRoutesFormReset,onClose:n._onRoutesFormClose,onFocus:n._onRoutesFormFocus,onBlur:n._onRoutesFormBlur,onRoutePointSubmit:n._onRoutesFormRoutePointSubmit,onRoutePointInputChange:n._onRoutesFormRoutePointInputChange,onRoutePointClear:n._onRoutesFormRoutePointClear,onRoutePointMovePosition:n._onRoutesFormRoutePointMovePosition}):null},n._renderRoutes=function(){var e=n.state;return s.createElement(s.Fragment,null,s.createElement(I.Z,{routerResponse:e.routes.routerResponse,activeRouteIndex:e.routes.activeRouteIndex,routePoints:e.routes.routePoints,mapLocation:e.map.location,mapSize:e.map.size,emptyPointIndex:n._getEmptyRoutePointIndex(),isTrafficLayerEnabled:e.traffic.isActive,isRoutePointDragging:e.routes.isPointDragging,cursor:n._getCursor(),setDragging:n._updateRoutePointDragging,draggablePointIndexes:n._getRoutePointsDraggableIndexes(),updateRoutePoint:n._updateRoutePointByMap,onRouteClick:n._onRouteClick,onBoundsChange:n._onRoutesBoundsChange,resetContentData:n._resetContentData,content:n._getContentData("route")}),s.createElement(L.Z,{routePoints:e.routes.routePoints,travelMode:e.routes.travelMode,onLoad:n._onRouterResponseLoad,onError:n._onRouterResponseError}),n._renderRichRoutesForm())},n._renderBanner=function(){if(!(null==(e=n.props.config.banner)?void 0:e.blockIds.widget))return null;var e,t=n.props.config.banner.blockIds.widget,r=n.props.config.banner.blockIds.largeWidget;return s.createElement(U.default,{id:t,largeBannerId:r,mapSize:n.state.map.size,usePortal:!0})};var n,o,u,b=d.$Y(n.props.config.mapLocation,B,{width:t.mapSize.width,height:t.mapSize.height}),C=n._getIsPoiEnabled(t.mapSize.width,t.mapSize.height);return n.state={placemarks:t.config.query.pt?h.Q(t.config.query.pt):void 0,map:{location:b,size:t.mapSize},geolocation:{isStarted:!1},ruler:(0,E.H)(t.config),traffic:{isActive:(null==(o=t.config.query.l)?void 0:o.includes("trf"))||(null==(u=t.config.userMap)?void 0:u.isTrafficShown),level:null},routes:n._getInitialRoutesState(),content:n._getInitialContent(),isPoiEnabled:C},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.body.classList.add("_app_ready"),document.addEventListener("touchmove",this._preventZoomByPinching,H)},n.componentDidUpdate=function(e,t){if(t.map.size!==this.state.map.size){var n=this._getIsPoiEnabled(this.state.map.size.width,this.state.map.size.height);this._deepSetState({isPoiEnabled:n})}},n.componentWillUnmount=function(){v.Z.cancel(this._getLocationAction),v.Z.cancel(this._getRoutePointAction)},n.render=function(){var e,t=this.state,n=!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled),r=F.md(this.props.config);return s.createElement(R.Z,{location:t.map.location,locationRequest:t.map.locationRequest,margin:B,onLocationChange:this._updateLocation,onSizeChange:this._setMapSize,isPoiEnabled:!n&&!r&&this.state.isPoiEnabled,onPoiClick:n||r?void 0:this._onPoiClick},s.createElement(P.ZP,{mapSize:t.map.size,geolocation:{isStarted:t.geolocation.isStarted,onClick:this._onGeolocationControlClick},location:t.map.location,ruler:{isEnabled:t.ruler.isEnabled,updateRuler:this._updateRuler},traffic:{isActive:t.traffic.isActive,level:t.traffic.level,onClick:this._onTrafficControlClick},search:{render:this._renderSearchComponentWithControl},inMaps:{render:this._renderInMapsControl},routes:{render:this._renderRichRoutesControl}}),this._renderBanner(),this._renderUserMaps(),this._renderGeolocationPin(),this._renderTrafficLayer(),this._renderRoutes(),this._renderSearchResult(),s.createElement(k.Z,{ruler:t.ruler,updateRuler:this._updateRuler}),s.createElement(C.Z,{points:t.placemarks}),s.createElement(Z.Z,{content:t.isPoiEnabled?this._getContentData("masstransit-stop"):void 0,mapSize:t.map.size,mapLocation:t.map.location,updateLocationRequest:this._updateLocationRequest,onContentClose:this._resetContentData,onStaticPlacemarkClick:this._onMasstransitPlacemarkClick}),s.createElement(D.Z,{poiData:t.poiData,updateContent:this._updateContentData}))},t}(s.Component);let G=(0,b.ZP)(W)},8225:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var r,o,i=n(8188),a=n(7363),s=n(4748),l=n(8007),c=n(5807),u="yaContextCb",d=!1;let p={load:function(e){return d||(r=new Promise(function(t,n){Array.isArray(window[u])||(window[u]=[]),window[u].push(function(){return t(window.Ya.Context.AdvManager)}),(0,c.Z)(e).catch(n)})).then(function(){d=!0}),r}};var m=n(2869),f=n(1336),h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onLoadEnd=function(e){n.props.onLoadEnd&&n.props.onLoadEnd(e)},n.state={advertManager:o,isLoadingFailed:!1},n}(0,l._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props.config.hosts.advertLoader;!o&&t&&(this._loadAction=m.Z.create(p.load(t),{success:function(t){o=t,e.setState({advertManager:o},function(){return e._onLoadEnd(o)})},fail:function(){e.setState({isLoadingFailed:!0},function(){return e._onLoadEnd()})}}))},n.componentWillUnmount=function(){m.Z.cancel(this._loadAction)},n.render=function(){return this.state.advertManager?this.props.children(this.state.advertManager):this.state.isLoadingFailed&&this.props.renderFallback?this.props.renderFallback():null},t}(a.Component);let v=(0,f.ZP)(h);var g=n(4788),_=n(5877),y=n.n(_),b=n(7809),E=n(8342),w=n(7558),S=n(9481),C=n(4953);let R=function(e){var t=(0,i._)((0,S.Y)({threshold:.5,triggerOnce:!0}),3),n=t[0],r=t[2];return a.createElement(a.Fragment,null,e.children(n),void 0!==r?a.createElement(C.ZP,{name:"advert_visible",nodeState:{visible_part:r.intersectionRatio}}):null)};var P=n(1740),k=n(5172),x=(0,s.Z)("banner-view");function I(e){return Math.floor(e.getTime()/1e3)}let M=(0,b.Z)(f.ZP,E.ZP,k.ZP)(function(e){function t(t){var n;return(n=e.call(this,t)||this)._isWindowActive=!1,n._refreshCount=0,n._lastShowSeconds=0,n._isVisibleEnough=!1,n._setWindowActive=function(){n._isWindowActive=!0},n._setWindowInactive=function(){n._isWindowActive=!1},n._getElementId=function(){return String(n._bannerContainerId)+n.props.id},n._init=function(){n._refreshCount=0,n._refresh(),n._refreshBannerIntervalId&&window.clearInterval(n._refreshBannerIntervalId),n._refreshBannerIntervalId=window.setInterval(n._clockTick,1e3)},n._refresh=function(){var e,t=n.props,r=null==(e=t.id)?void 0:e.trim();if(r){n._lastShowSeconds=I(t.getToday()),n._refreshCount++;var o=(0,g._)({},t.extParams,{"test-ids":t.testIds});t.advertManager.render({blockId:r,renderTo:n._getElementId(),cspNonce:t.cspNonce,extParams:o,format:t.format,position:t.position,darkTheme:"dark"===t.theme,allowRepeatAds:{screen:-1},onError:n._onError,onRender:n._onRender,onHide:t.onHide},t.altCallback)}},n._onError=function(e){var t=n.props,r=t.config;null==t.onDisplay||t.onDisplay.call(t),null==t.onError||t.onError.call(t),"VIDEO_ERROR"!==e.code&&(0,P.H)(Error("AdvertManager "+e.type+" ("+e.code+"): "+e.text),{config:r,block:"BannerView",additional:{id:t.id,format:t.format,position:t.position}})},n._onRender=function(e){n.state.isAdvertRendered||n.setState({isAdvertRendered:!0}),null==n.props.onRender||n.props.onRender.call(n.props,e),null==n.props.onDisplay||n.props.onDisplay.call(n.props)},n._clockTick=function(){!(n._refreshCount>20)&&n._isWindowActive&&n._isVisibleEnough&&I(n.props.getToday())-n._lastShowSeconds>=35&&n._refresh()},n._onIntersectionChange=function(e){n._isVisibleEnough=e},n._bannerContainerId=y().v4().replace(/-/g,""),n.state={isAdvertRendered:!1},n}(0,l._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isWindowActive=!0,window.document.addEventListener("keydown",this._setWindowActive),this._init()},n.componentDidUpdate=function(e){e.id!==this.props.id&&this._init()},n.componentWillUnmount=function(){window.document.removeEventListener("keydown",this._setWindowActive),window.clearInterval(this._refreshBannerIntervalId)},n.render=function(){var e=this,t=[x(),this.props.className].filter(Boolean).join(" ");return a.createElement("div",{"aria-hidden":!0,"aria-live":"polite"},a.createElement(S.Z,{as:"div",threshold:.3,onChange:this._onIntersectionChange},a.createElement(R,null,function(n){return a.createElement("div",{ref:e.state.isAdvertRendered?n:void 0,className:t,id:e._getElementId(),style:{maxHeight:e.props.maxHeight}})})),a.createElement(w.Z,{type:"focus",listener:this._setWindowActive}),a.createElement(w.Z,{type:"blur",listener:this._setWindowInactive}))},t}(a.Component));var T=n(9360),Z=(0,s.Z)("map-widget-banner-component");let D=function(e){var t=(0,f.ZR)(),n=(0,i._)(a.useState(!1),2),r=n[0],o=n[1],s=(0,i._)(a.useState(!1),2),l=s[0],c=s[1],u=(0,i._)(a.useState(!1),2),d=u[0],p=u[1],m=(0,i._)(a.useState(!1),2),h=m[0],g=m[1],_=e.mapSize,y=t.uatraits.isMobile;a.useEffect(function(){g(!(y?_.height>=250&&_.width>=250:_.height>=200&&_.width>=250)),p(_.height>600&&!t.uatraits.isMobile)},[_,g,y,t]);var b=d?e.largeBannerId:e.id,E="string"==typeof b?b:void 0;if(r||h||!E)return null;var w=e.usePortal?T.v7:a.Fragment;return a.createElement(w,null,a.createElement("div",{className:Z({displayed:l,large:d})},a.createElement("div",{className:Z("content")},a.createElement(v,{onLoadEnd:function(e){return o(!e)},renderFallback:function(){return null}},function(e){return a.createElement(M,{id:E,maxHeight:d?"90px":y?"50px":"56px",advertManager:e,cspNonce:t.cspNonce,onError:function(){return o(!0)},onDisplay:function(){return c(!0)}})}))))}},4479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(7363),o=n(8005),i=n(4788),a=n(8188),s=n(1912),l=n(9705),c=n(5930),u=n(283),d=n(4670);function p(e){return e[0][0]=Math.round(e[0][0]),e[0][1]=Math.round(e[0][1]),e[1][0]=Math.round(e[1][0]),e[1][1]=Math.round(e[1][1]),e}var m=n(7048),f=n(7806),h=n(6897),v=n(8848),g=n(3647),_=n(7434),y=n(5692);function b(e){return e.isPoiEnabled&&!!(e.content&&["masstransit-stop","search"].includes(e.content.type))}function E(e){return{params:{ll:(0,l.s)(e.map.location.center),z:Math.round(100*e.map.location.zoom)/100}}}function w(e){var t;return e.isPoiEnabled&&(null==(t=e.content)?void 0:t.type)==="masstransit-stop"?{params:{masstransit:{stopId:e.content.data.stop.id},mode:"stop"}}:{}}function S(e,t){var n,r,o,i,a=null==(r=t.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items[0];if(e.isPoiEnabled&&(null==(o=e.content)?void 0:o.type)==="search"){var s=e.content.data.result,l={};return"business"!==s.type||e.routes.routerResponse||t.searchPreloadedResults?l.poi={uri:s.uri,point:s.coordinates}:l.orgpage={id:s.id},{params:l}}return!b(e)&&a&&(null==(i=t.mapWidget)?void 0:i.activeMode)==="search"?{params:{poi:{uri:a.uri,point:a.coordinates}}}:{}}function C(e,t){var n,r,o,i;return(null==(n=t.mapWidget)?void 0:n.activeMode)==="search"?{params:{filter:t.query.filter,text:null==(r=t.searchPreloadedResults)?void 0:r.requestQuery,"display-text":null==(i=t.searchPreloadedResults)?void 0:null==(o=i.chain)?void 0:o.name}}:{}}function R(e,t){var n=T(e,t);if(n)return{textContent:"Как добраться",params:(0,i._)({},_.DP({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:0,viaIndexes:[],routePoints:[_.Yo(),n]},t),{mode:"routes"})};if(e.routes.routePoints.length>0){var r,o,a,s,l,h,v,g,y,E=_.DP({routerResponse:null,travelMode:e.routes.travelMode,detailedIndex:-1,activeRouteIndex:e.routes.activeRouteIndex,viaIndexes:(null==(h=e.routes.routerResponse)?void 0:h.viaIndexes)||[],routePoints:e.routes.routePoints},t),w=(0,i._)({},E,{rtm:t.query.rtm,mode:(null==(v=t.mapWidget)?void 0:v.activeMode)!=="routes"||b(e)?void 0:"routes"}),S=null==(g=e.routes.routerResponse)?void 0:g.routes[e.routes.activeRouteIndex];return{params:w,textContent:!b(e)&&(!t.searchPreloadedResults||(null==(y=t.mapWidget)?void 0:y.activeMode)==="routes")&&(null==S?void 0:S.bounds)&&(r=e.map.location.bounds,o=S.bounds,a=(0,c.Z)(f.m6),s=(0,u.C)((0,m.n)(r,f.m6),a),l=(0,u.C)((0,m.n)(o,f.m6),a),s.some(function(e){return l.some(function(t){return(0,d.Y)(p(e),p(t))})}))?"Открыть маршрут":void 0}}return{}}function P(e,t){return{params:{rl:e.ruler.points.slice(0,t.ruler.maxCount).map(function(e,t,n){var r=e.coordinates,o=n[t-1]&&n[t-1].coordinates,i=0===t?r:[r[0]-o[0],r[1]-o[1]];return(0,l.s)(i)}).join("~")||null}}}function k(e,t){return{layers:{trf:e.traffic.isActive,trfe:e.traffic.isActive&&y.W(t)}}}function x(e,t){var n=t.userMap;return n?{params:{um:n.id}}:{}}function I(e,t){var n,r,o,i,a,c,u,d,p,m=T(e,t),f=e.content&&"data"in e.content&&e.content.data.coordinates,v=b(e)||(null==(n=t.mapWidget)?void 0:n.activeMode)!=="search"?null==(i=t.mapWidget)?void 0:null==(o=i.activeObject)?void 0:null==(r=o.items[0])?void 0:r.coordinates:void 0,g=null==(c=t.poiPreloadedResults)?void 0:null==(a=c.items[0])?void 0:a.coordinates,_=null==(d=t.whatsherePreloadedResults)?void 0:null==(u=d.items[0])?void 0:u.coordinates,y=null==(p=t.masstransitStop)?void 0:p.coordinates,E=(0,s._)((e.placemarks||[]).map(function(e){return e.coordinates})).concat([v,g,_,y]).filter(function(e){return!!(e&&(!(null==m?void 0:m.coords)||!(0,h.J)(null==m?void 0:m.coords,e))&&(!f||!(0,h.J)(f,e)))});return{params:{pt:E.length>0?E.map(function(e){return(0,l.s)(e)}).join("~"):void 0}}}function M(){return{params:{source:"mapframe",utm_source:"mapframe",from:"mapframe"}}}function T(e,t){if(!((null==(n=t.mapWidget)?void 0:n.activeMode)==="search"||b(e))){var n,r=[];return t.poiPreloadedResults&&t.poiPreloadedResults.resultsCount>0&&r.push({coords:t.poiPreloadedResults.items[0].coordinates,value:t.poiPreloadedResults.items[0].title}),t.whatsherePreloadedResults&&t.whatsherePreloadedResults.resultsCount>0&&r.push({coords:t.whatsherePreloadedResults.items[0].coordinates,value:t.whatsherePreloadedResults.items[0].title}),t.masstransitStop&&r.push({coords:t.masstransitStop.coordinates,value:t.masstransitStop.name}),r.find(function(t){return(0,v.V)(e.map.location.bounds,t.coords)})}}var Z=n(1336),D=n(9394),L=n(7793);let A=function(e){var t,n,l,c,u,d,p,m=(0,Z.ZR)(),f=(t=e.state,c=void 0===(l=(n=[E,w,S,C,R,P,k,x,I,M].reduce(function(e,n){var r=n(t,m);return{textContent:e.textContent||r.textContent,params:(0,i._)({},e.params||{},r.params||{}),layers:(0,i._)({},e.layers||{},r.layers||{})}},{})).params)?{}:l,u=n.layers,d=n.textContent,c.l=Object.entries(void 0===u?{}:u).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return(0,s._)(e.filter(function(e){return e!==r})).concat((0,s._)(o?[r]:[]))},[]).join(",")||null,p=Object.entries(c).reduce(function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1];return null!==o&&(e[r]=o),e},{}),{url:g.sY(m.hosts.maps,p),textContent:d}),h=f.url,v=f.textContent,_=(0,L.d)(e.state.map.size,m),y=r.createElement("div",{style:{marginLeft:""+_.toFixed(0)+"px"}},r.createElement(o.Z,{url:h},function(){switch(e.size){case"tiny":break;case"small":return"Открыть в Картах";case"medium":return v||"Открыть в Яндекс Картах"}return null}()));return"tiny"===e.size?r.createElement(D.Z,{text:"Открыть в Яндекс Картах",position:"right",isAir:!0},y):y}},7477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ed});var r,o,i=n(4788),a=n(8007),s=n(1912),l=n(7363),c=n(4748),u=n(1336),d=n(3840);function p(e,t,n){return(p=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,d.b)(o,n.prototype),o}:Reflect.construct).apply(null,arguments)}var m=n(2267),f=n(8188),h=n(7809),v=n(473),g=n(9870),_=n(8597),y=n(2869),b=n(6897),E=n(9297),w=n(2574),S=n(9048),C=n(7558),R=n(576),P=n(9111),k=n(8510),x=n(1372),I={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},M=[{renderer:/SwiftShader/},{renderer:/Parallels/}];function T(e){try{var t=document.createElement("canvas");t.width=1,t.height=1;var n=(0,x.pi)({},I);(null==e?void 0:e.allowSoftware)&&(n.failIfMajorPerformanceCaveat=!1);var r=t.getContext("webgl",n);if(r)return r}catch(o){}Z()}function Z(){r={supported:!1,reasonsFailed:["HasWebGl"],info:{}}}var D=n(4238),L=n(8614),A=n(4953),N=n(1740),z=n(1251),U="undefined"==typeof window,F=[],O=0;function q(){U=!0,F.forEach(function(e){return e()}),o&&o.disconnect()}U||(0,z.Z)(function(){if(!window.PerformanceLongTaskTiming||!window.performance||!window.performance.now){setTimeout(q,5e3);return}(o=new window.PerformanceObserver(function(e){var t=e.getEntries().pop();t&&(O=t.startTime+t.duration)})).observe({entryTypes:["longtask"]}),function e(){var t=window.performance.now();if(t>2e4){q();return}(O?3e3-(t-O):3e3)<=0?q():setTimeout(e,1e3)}()});let B=function(e){U?e():F.push(e)};var H=n(8898),W=n(5172),G=function(){function e(){}var t=e.prototype;return t.submit=function(e,t){if("0"!==t.visible)for(var n=this._getViewportSuffix(t),r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],a=parseFloat(t[i]);"firstViewport"!==i&&"visible"!==i&&Number.isFinite(a)&&(0,N.HR)(""+e+n+"."+i,a)}},t._getViewportSuffix=function(e){if(!("firstViewport"in e))return"";switch(e.firstViewport){case"0":return".viewport_regular";case"1":return".viewport_first"}return""},e}(),j=function(){return Promise.all([n.e("ymaps").then(n.bind(n,3380)),n.e("ymaps").then(n.bind(n,9377)),n.e("ymaps").then(n.t.bind(n,8040,23))]).then(function(e){var t=(0,f._)(e,3),n=t[0],r=t[1].EventBlockerLayer,o=t[2];return new Promise(function(e){return setTimeout(function(){return e([(0,i._)({},n,{EventBlockerLayer:r}),o.default])},0)})})};let V=(0,h.Z)(u.ZP,W.ZP)(function(e){function t(t){(o=e.call(this,t)||this)._isMapCreated=!1,o._ref=l.createRef(),o._onYmaps3Load=function(e){var t=(0,f._)(e,2),n=t[0],r=t[1];o._ymaps3=n,n.errorLoggerFactory(function(e){var t=new r;return t.initErrors(e),t.logError}),o._createMap()},o._handleMapLocationRequest=function(e){var t=o._map;if(o._location&&e&&t){var n=o._location,r="bounds"in e?(0,E.$Y)({bounds:e.bounds},o._margin,o._getSize(),o.props.config.uatraits.isMobile||"snap"===t.effectiveZoomRounding):void 0,i=n.center,a=n.zoom;r?i=r.center:"center"in e&&(i=e.center),r?a=r.zoom:"zoom"in e&&e.zoom&&(a=e.zoom),a===n.zoom&&(0,b.J)(i,n.center)||t.animateCenterAndZoom(i,a,e.duration||0)}},o._createMap=function(){var e=o.props,t=o.state,i=o._isElementProvided?e.element:o._ref.current;if(i&&!o._isMapCreated&&o._ymaps3){o._isMapCreated=!0,e.config.query["disable-vector-force"]?(L.Z.set("disable_vector_force",!0),o.setState({isVectorDisabledForce:!0})):L.Z.get("disable_vector_force")&&o.setState({isVectorDisabledForce:!0});var a,l,c,u,d,m,h,_,y=e.locationRequest,b=y&&"center"in y&&y.center||e.initialLocation.center,E=y&&"zoom"in y&&y.zoom||e.initialLocation.zoom;o._location={center:b,zoom:E},o._margin=e.marginRequest,o._camera=e.initialCamera||{azimuth:0,tilt:0};var w=(0,g.mt)(e.config,e.theme),S=o._getMapMode(),C=o._ymaps3.YaMap,R=Object.values(g.UZ),P=(0,g.c8)(R,o._ymaps3.EventBlockerLayer,e.config),k=P.topRasterLayers,x=P.mainLayers;i.dir="ltr";var I=new C({mode:S,element:i,center:b,zoom:E,margin:o._margin,zoomRange:e.zoomRange||{min:2,max:21},dataSources:w,topRasterLayers:k,mainLayers:x,behaviors:e.behaviors,zoomRounding:e.zoomRounding,eventObjectsFilter:e.eventObjectsFilter,nonRotatableRasterSources:g.Iw});e.initialCamera&&(e.initialCamera.azimuth||e.initialCamera.tilt)&&I.on("vectorStart",function(){var t,n;(null==(t=e.initialCamera)?void 0:t.azimuth)&&(0,H.Cm)(I,e.initialCamera.azimuth),(null==(n=e.initialCamera)?void 0:n.tilt)&&(0,H.lp)(I,e.initialCamera.tilt)}),window.yandex_map=I,I.events.clickTimeout=300,I.events.waitHotspotsTimeout=1e3,(0,v.r1)().has.touch?o._ymaps3.loadHotspotsForViewport(I):o._ymaps3.loadHotspotsByPointerPosition(I),e.vector&&e.config.isVectorEnabled&&!t.isVectorDisabledForce&&((r?!r.supported:(!window.WebGLRenderingContext||(u=navigator.userAgent,!(/YandexSearch\//.test(u)||/YaApp/.test(u)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(u))&&!/MiuiBrowser\//.test(u)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(u)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(u)||(m=null===(d=navigator.userAgent)||void 0===d?void 0:d.match(/WebKit\/?(\d+)/i))&&537>Number(m[1])||(_=null===(h=navigator.userAgent)||void 0===h?void 0:h.match(/Chrome\/(\d+)/i))&&57>Number(_[1])))&&(Z(),1))?o.setState({isVectorSupported:!1}):Promise.all([(a=e.config.baseUrl,l=e.config.experiments.ui,c=new G,Promise.all([n.e("ymaps-vector").then(n.bind(n,8771)),n.e("ymaps-vector").then(n.t.bind(n,6259,23)),a+new URL(n(2448),n.b).pathname]).then(function(e){var t=(0,f._)(e,3),n=t[0],r=t[1],o=t[2];return function(e){return function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return p(n.VectorMapEngine,[r.default,o,e,c].concat((0,s._)(i)))}}})),new Promise(function(e,t){setTimeout(function(){var n=T();n&&function(e){if(void 0===r){var t=e||T();t?r=function(e){for(var t=!0,n=[],r=0,o=["requestAnimationFrame","Worker","URL","Blob","XMLHttpRequest","Set","Map"];r<o.length;r++){var i=o[r];window[i]||(t=!1,n.push("WindowPropertyNotExist-".concat(i)))}"function"!=typeof Math.trunc&&(t=!1,n.push("MathTrunc")),0===e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(t=!1,n.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS")),e.getExtension("OES_vertex_array_object")||(t=!1,n.push("OES_vertex_array_object")),e.getExtension("OES_standard_derivatives")||(t=!1,n.push("OES_standard_derivatives"));var a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);a&&0!==a.precision||(t=!1,n.push("Highp")),!function(e){if(!e)return!1;var t=e.createShader(e.VERTEX_SHADER);if(!t)return!1;e.shaderSource(t,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),e.compileShader(t);var n=e.createShader(e.FRAGMENT_SHADER);if(!n)return!1;e.shaderSource(n,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),e.compileShader(n);var r=e.createProgram();if(!r)return!1;e.attachShader(r,t),e.attachShader(r,n),e.bindAttribLocation(r,0,"p"),e.linkProgram(r);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(r),e.drawArrays(e.POINTS,0,1);var i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteBuffer(o),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),255===i[0]}(e)&&(t=!1,n.push("TestPoints"));for(var s=e.getExtension("WEBGL_debug_renderer_info"),l=s&&e.getParameter(s.UNMASKED_VENDOR_WEBGL),c=s&&e.getParameter(s.UNMASKED_RENDERER_WEBGL),u="string"==typeof l?l:"",d="string"==typeof c?c:"",p=navigator.userAgent,m=0;m<M.length;m++)if(function(e,t){return Object.keys(e).every(function(n){var r=e[n],o=t[n];return!r||r.test(o)})}(M[m],{vendor:u,renderer:d,ua:p})){t=!1,n.push("BlacklistedGpu");break}return{supported:t,reasonsFailed:n,info:{vendor:u,renderer:d}}}(t):Z()}return r}(n).supported||t(Error("Vector is not supported")),e(n)})})]).then(function(e){var t=(0,f._)(e,2),n=t[0],r=t[1];I.destroyed||I.provideVectorMapEngineFactory(n(r))}).catch(function(){o.setState({isVectorSupported:!1})})),o._map=I,o._onMapUpdate(),o._onZoomRoundingChange(),o._onMapSizeChange(),o._addFilter(),null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,o._margin||[0,0,0,0]),e.onReady&&e.onReady(I),o._handleMapLocationRequest(y),o.forceUpdate()}},o._addFilter=function(){var e=o.props.getFilter;e&&(o._filter=e(o._ymaps3),o._map.addObjectFilter(o._filter))},o._onMapUpdate=function(){var e=o._map;if(!e.isInAction){var t=[e.center[0],e.center[1]],n=o._location.zoom!==e.zoom||!(0,b.J)(o._location.center,t);(0,R.Z)(o._margin,e.margin)||(o._margin=e.margin,null==o.props.onMarginChange||o.props.onMarginChange.call(o.props,e.margin)),n&&(o._location={zoom:Math.round(100*e.zoom)/100,center:t},o._onLocationChange()),(o._camera.azimuth!==e.azimuth||o._camera.tilt!==e.tilt)&&(o._camera={azimuth:e.azimuth,tilt:e.tilt},o.props.onCameraChange&&o.props.onCameraChange(o._camera))}},o._onLocationChange=function(){var e=o.props.onLocationChange;if(e){var t=(0,E.$Y)(o._location,o._margin,o._getSize()),n=t.bounds,r=t.span;e((0,i._)({},o._location,{bounds:n,span:r}))}},o._onMapSizeChange=function(){o.props.onSizeChange&&o.props.onSizeChange(o._getSize(),o._map.offset),o._onLocationChange()},o._getSize=function(){var e=o._map.size;return{width:e.x,height:e.y}},o._onResize=function(){var e=o._map;e&&e.resize()},o._onDragStart=function(){o.setState({isDragged:!0})},o._onDragEnd=function(){o.setState({isDragged:!1})},o._onZoomRoundingChange=function(){o.props.onZoomRoundingChange&&o._map&&o.props.onZoomRoundingChange(o._map.effectiveZoomRounding)},o._onThemeChange=function(){var e=o.props,t=o._map;Object.entries((0,g.mt)(e.config,e.theme)).filter(function(e){return"tile"===(0,f._)(e,2)[1].type}).forEach(function(e){var n=(0,f._)(e,2),r=n[0],o=n[1];null==t||t.updateTileDataSource(r,o)})},o._renderLayers=function(){var e=o.props;return"satellite"===e.type?l.createElement(k.ZP,{layer:"sat"}):"hybrid"===e.type?l.createElement(l.Fragment,null,l.createElement(k.ZP,{layer:"sat"}),l.createElement(k.ZP,{layer:"skl",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}})):l.createElement(l.Fragment,null,l.createElement(k.ZP,{layer:"map",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}}),!e.disablePersonalizedPoi&&!e.config.bunker.disablePersonalizedPoi&&e.config.authorization&&e.config.hosts.tilesApi?l.createElement(k.ZP,{layer:"personalizedPoi",onClick:e.onPoiClick,shouldHover:function(){return!!(e.isPoiEnabled||e.isHoverForceEnabled)}}):null)},o.state={isDragged:!1,isVectorSupported:!0,isVectorDisabledForce:!1};var o,a=o.props.updateTimeout||300;return o._onMapUpdateDebounced=(0,P.Z)(o._onMapUpdate,a),"undefined"!=typeof window&&(t.delayLoad?(o._loadDelayStart=Date.now(),(0,N.J3)("mapLoadDelay",o._loadDelayStart),B(function(){o._loadAction||((0,N.J3)("mapLoadDelayCompleted",Date.now()-o._loadDelayStart),o._loadAction=y.Z.create(j(),{success:o._onYmaps3Load}))})):o._loadAction=y.Z.create(j(),{success:o._onYmaps3Load})),o}(0,a._)(t,e);var o=t.prototype;return o.componentDidMount=function(){this._createMap(),this._previousWindowMap=window.yandex_map},o.componentDidUpdate=function(e){!e.delayLoad||this.props.delayLoad||this._loadAction||((0,N.J3)("mapLoadDelayAborted",Date.now()-this._loadDelayStart),this._loadAction=y.Z.create(j(),{success:this._onYmaps3Load}));var t=this._map;if(!t)return this._createMap();var n=this.props;n.behaviors&&!(0,R.Z)(n.behaviors,e.behaviors)&&t.behaviors.setEnabled(n.behaviors);var r=n.locationRequest;r!==e.locationRequest&&this._handleMapLocationRequest(r),(0,R.Z)(n.marginRequest,e.marginRequest)||t.setMargin(n.marginRequest);var o=this._getMapMode();t.setMode(o),n.getFilter!==e.getFilter&&(this._filter&&(t.removeObjectFilter(this._filter),this._filter=void 0),this._addFilter()),e.theme!==n.theme&&this._onThemeChange()},o.componentWillUnmount=function(){y.Z.cancel(this._loadAction),this._onMapUpdateDebounced.cancel(),this._map&&this._map.destroy(),window.yandex_map=this._previousWindowMap||window.yandex_map},o._getMapMode=function(){var e=this.state.isVectorSupported&&this.props.vector&&this.props.config.isVectorEnabled&&!this.state.isVectorDisabledForce,t=this.props.config.uatraits.isMobile;return e?t?"vector":"auto":"raster"},o.render=function(){var e=this.props,t=this.state;return l.createElement(l.Fragment,null,this._isElementProvided?null:l.createElement("div",{className:e.className,ref:this._ref}),l.createElement(_.Ib,{value:{map:this._map,ymaps3:this._ymaps3}},this._renderLayers(),l.createElement(w.Z,{onUpdate:this._onMapUpdateDebounced,onDragStart:this._onDragStart,onInertiaStart:this._onDragEnd,onDragEnd:this._onDragEnd,onResize:this._onMapSizeChange,onZoomRoundingChanged:this._onZoomRoundingChange}),e.children,this.state.isDragged?l.createElement(D.Z,{cursor:"grabbing"}):null),l.createElement(S.Z,{onResize:this._onResize}),l.createElement(C.Z,{type:"resize",listener:this._onResize}),t.isVectorDisabledForce?l.createElement(A.ZP,{name:"disable_vector_force"}):null)},(0,m._)(t,[{key:"_isElementProvided",get:function(){return"element"in this.props}}]),t}(l.Component));var Y=n(4063);let X=(0,h.Z)(u.ZP,(0,_.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){var e=n.props,t=e.map.getLayers(),r=t.topRasterLayers,o=t.mainLayers,i=(0,s._)(r).concat((0,s._)(o)).map(function(e){return e.split(":")[0]}),a=g.Hi.filter(function(e){return i.includes(e)});y.Z.cancel(n._loadAction);var l=(0,R.Z)(a,["map"])?Promise.resolve({map:{copyrights:["© Яндекс"]}}):Y.Z.getLayers({layers:a,center:e.map.center,zoom:e.map.zoom},e.config);n._loadAction=y.Z.create(l,{success:n._onDataLoad})},n._onDataLoad=function(e){var t=n.props.map;Object.entries(e).forEach(function(e){var n=(0,f._)(e,2),r=n[0],o=n[1];if(o){var a=t.getDataSource(r),s=(0,i._)({},a);if("zoomRange"in o&&o.zoomRange){var l=(0,f._)(o.zoomRange,2),c=l[0],u=l[1];s.zoomRange={min:c,max:u}}s.copyrights="copyrights"in o?o.copyrights:void 0,(0,R.Z)(a,s)||t.updateTileDataSource(r,s)}})},n._updateDebounced=(0,P.Z)(n._update,500),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateDebounced()},n.componentWillUnmount=function(){this._updateDebounced.cancel(),y.Z.cancel(this._loadAction)},n.render=function(){return l.createElement(w.Z,{onUpdate:this._updateDebounced})},t}(l.Component));var K=n(2467),$=["map","indoor","personalizedPoi","directPoi"],J=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._loadFile=function(){var e=t.props,n=e.config.staticHost+"static/v46/map-customizations/"+e.name+".json";y.Z.cancel(t._loaderAction),t._loaderAction=y.Z.create((0,K.Z)({url:n,parser:"json"}),{success:t._setMapCustomization})},t._setMapCustomization=function(e){void 0===e&&(e={});var n,r=t.props;(null!=(n=r.dataSourceIds)?n:$).forEach(function(t){var n=r.map.getDataSource(t);n&&"tile"===n.type&&r.map.updateTileDataSource(t,(0,g._I)(n,e))})},t}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadFile()},n.componentDidUpdate=function(e){this.props.name!==e.name&&this._loadFile()},n.componentWillUnmount=function(){this._setMapCustomization(),y.Z.cancel(this._loaderAction)},n.render=function(){return null},t}(l.PureComponent);let Q=(0,u.ZP)((0,_.ZP)({shouldWait:!0})(J));var ee=n(7105),et=n(9322),en=n(1086),er=function(e){function t(t){var r;return(r=e.call(this,t)||this)._shouldHover=function(e){var t,n;return(r.props.shouldHover?r.props.shouldHover(e):!!r.props.onClick)&&(!!(null==(t=e.properties.vectorMetadata)?void 0:t.has("uri"))||Number(null==(n=e.properties.vectorMetadata)?void 0:n.get("itemId"))>0)},r._dataSource={type:"tile3d",priority:"high",theme:(0,g.gh)(t.theme),workerUrl:r.props.config.baseUrl+new URL(n(1367),n.b).pathname},r}(0,a._)(t,e);var r=t.prototype;return r.componentDidMount=function(){this._addLayer()},r.componentDidUpdate=function(e){this.props.theme!==e.theme&&(this._dataSource=(0,i._)({},this._dataSource,{theme:(0,g.gh)(this.props.theme)}),this.props.map.updateTile3dDataSource(en.Y0,this._dataSource))},r.componentWillUnmount=function(){this._removeLayer()},r._getMapLayers=function(){var e=this.props.map.getLayers(),t=e.mainLayers,n=e.topRasterLayers;return(0,s._)(t).concat((0,s._)(n))},r._setMapLayers=function(e){this.props.map.setLayers((0,g.c8)(e,this.props.ymaps3.EventBlockerLayer,this.props.config))},r._addLayer=function(){this.props.map.addDataSource(en.Y0,this._dataSource);var e=this._getMapLayers();e.push.apply(e,(0,s._)((0,g.se)(en.Y0))),this._setMapLayers(e)},r._removeLayer=function(){var e=(0,g.se)(en.Y0),t=this._getMapLayers().filter(function(t){return!e.includes(t)});this._setMapLayers(t),this.props.map.getDataSource(en.Y0)&&this.props.map.removeDataSource(en.Y0)},r.render=function(){return l.createElement(et.Z,(0,i._)({layer:en.Y0},this.props,{shouldHover:this._shouldHover}))},t}(l.Component);let eo=(0,h.Z)(u.ZP,(0,_.ZP)({shouldWait:!0}),W.ZP)(er);var ei="_vector_ready",ea=["drag","dblClick","magnifier","oneFingerZoom","pinchZoom"],es=["scrollZoom"],el=["mouseRotate","pinchRotate","mouseTilt","panTilt"],ec=(0,c.Z)("map-widget-map-component"),eu=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onReady=function(e){window.document.body.classList.add("_map_ready"),n._map=e,n.setState({isReady:!0})},n._getBehaviors=function(){var e;return(0,s._)(ea).concat((0,s._)((null==(e=n.props.config.flyover)?void 0:e.isEnabled)?el:[]),(0,s._)(n.props.config.isScrollDisabled?[]:es))},n._onMainEngineChanged=function(){var e;(null==(e=n._map)?void 0:e.getEffectiveMode())!=="vector"||window.document.body.classList.contains(ei)||window.document.body.classList.add(ei)},n._setTile3dLayerInitialized=function(){n.state.flyover.isLayerInitialized||n.setState(function(e){return{flyover:(0,i._)({},e.flyover,{isLayerInitialized:!0})}})},n._setFlyoverObject=function(e){var t;(null==(t=n.state.flyover.flyoverObject)?void 0:t.tile.id)!==(null==e?void 0:e.tile.id)&&n.setState(function(t){var n;return{flyover:(0,i._)({},t.flyover,{flyoverObject:e,activeTile3dId:null!=(n=null==e?void 0:e.tile.id)?n:null})}})},n.state={isReady:!1,flyover:{isLayerInitialized:!1,activeTile3dId:null,flyoverObject:null,setLayerInitialized:n._setTile3dLayerInitialized,setFlyoverObject:n._setFlyoverObject}},n}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this.props,n=(null==(e=t.config.flyover)?void 0:e.isEnabled)&&this.state.flyover.isLayerInitialized;return l.createElement(V,{className:ec(),type:t.config.mapType,initialLocation:t.location,vector:t.config.isVectorEnabled,isPoiEnabled:t.isPoiEnabled,onReady:this._onReady,locationRequest:t.locationRequest,marginRequest:t.margin,onPoiClick:t.onPoiClick,onLocationChange:t.onLocationChange,onSizeChange:t.onSizeChange,behaviors:this._getBehaviors()},l.createElement(X,null),n?l.createElement(l.Fragment,null,l.createElement(eo,null),l.createElement(Q,{name:"realty",dataSourceIds:["map"]})):null,this.state.isReady?l.createElement(ee.v6,{value:this.state.flyover},t.children):null,l.createElement(w.Z,{onMainEngineChanged:this._onMainEngineChanged}))},t}(l.Component);let ed=(0,u.ZP)(eu)},5684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(8007),o=n(7363),i=n(1336),a=n(6076),s=n(4748),l=n(9705),c=n(3647),u=n(3688),d=n(3085),p=n(1494),m=n(2584),f=n(5172),h=(0,s.Z)("masstransit-underground-line-name-view");let v=function(e){var t,n,r=e.transport,i=(0,f.Fg)(),a=r.transportSystemId?null==(t=m.x[r.transportSystemId])?void 0:t.small:null;return o.createElement("div",{className:h()},a?o.createElement("div",{className:h("icon")},o.createElement(p.Z,{inline:!0,name:a,theme:i})):null,o.createElement("div",{className:h("line-number"),style:{backgroundColor:r.Style&&r.Style.color||"transparent"}},null!=(n=r.shortName)?n:null),o.createElement("div",{className:h("line-name")},r.name))};var g=n(8371),_=n(6665),y=(0,s.Z)("map-widget-masstransit-stop-content-view");let b=function(e){var t,n,r,a=(0,i.ZR)(),s=e.content.data.stop,p=s.region?c.uf(s,s.region):"",m=(0,u._)(c.e_("/"+p,a)),f={coords:s.coordinates,value:"",uri:null==(t=s.searchResult)?void 0:t.uri},h=(0,u.V)([{coords:null,value:""},f],{},a);return o.createElement("div",{className:y()},o.createElement(g.Z,{title:("underground"===s.type?"Станция метро":"railway"===s.type?"Ж/д станция":"Остановка")+" "+s.name,titleUrl:m,subtitle:"underground"!==s.type?null==(n=s.searchResult)?void 0:n.description:void 0}),"underground"===s.type&&s.transports[0]?o.createElement("div",{className:y("underground-title")},o.createElement(v,{transport:s.transports[0]})):null,o.createElement("div",{className:y("buttons-container")},o.createElement("div",{className:y("button-container")},o.createElement(d.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:h,target:"_blank"},"Как добраться")),o.createElement("div",{className:y("button-container")},o.createElement(d.Z,{view:"primary",size:"small",isStretched:!0,url:function(){if("railway"===s.type){var e,t=null==(e=s.links)?void 0:e.find(function(e){return"timetable"===e.type});return null==t?void 0:t.href}if("underground"===s.type)return c.WU(a.hosts.metro,{ll:(0,l.s)(s.coordinates)});if("urban"===s.type&&s.region){var n=c.uf(s,s.region)||"";return(0,u._)(c.e_("/"+n,a))}}(),target:"_blank"},"underground"===s.type?"Схема метро":"railway"===s.type?"Показать расписание":"Список маршрутов"))),(null==(r=s.searchResult)?void 0:r.metro)&&"underground"!==s.type?o.createElement("div",{className:y("nearest-stops")},o.createElement(_.Z,{result:s.searchResult})):null)};var E=n(3363),w=n(3911),S=n(3228),C=n(6653),R=n(1111),P=n(7313),k=n(7358),x={bus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},minibus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},tramway:{small:"rubrics-tram-stop-14",normal:"rubrics-tram-stop-24"},trolleybus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},water:{small:"rubrics-pier-14",normal:"rubrics-pier-24"},underground:{small:"rubrics-subway-fallback-14",normal:"rubrics-subway-fallback-24"},suburban:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},suburban_express:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},funicular:{small:"rubrics-funicular-14",normal:"rubrics-funicular-24"},cable:{small:"rubrics-cableway-14",normal:"rubrics-cableway-24"},aeroexpress:{small:"aeroexpress-14",normal:"aeroexpress-24"},fallback:{small:"rubrics-fallback-14",normal:"rubrics-fallback-24"}};let I=function(e){var t,n,r,i,a=(0,f.Fg)();if(!e.vehicleType)return null;var s=null==(t=m.x[null!=(i=e.transportSystemId)?i:""])?void 0:t[e.size],l=s||(null==(n=x[e.vehicleType])?void 0:n[e.size])||(null==(r=x.fallback)?void 0:r[e.size]);return l?o.createElement(p.Z,{inline:!0,name:l,className:e.className,theme:s?a:void 0}):null};var M=n(4373),T=n.n(M),Z=n(7022),D=n.n(Z),L=n(5119),A=n.n(L),N=(0,s.Z)("masstransit-stop-placemark"),z=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(w.Z,{name:"masstransit_stop_placemark",logClick:!0},o.createElement(C.Z,{coordinates:e.coordinates,onClick:e.onClick,zIndex:P.I.masstransitStop},o.createElement("div",{className:N({bookmark:e.isBookmark})},!e.hotspotIconUrl||e.isBookmark?o.createElement(I,{className:N("content-icon"),size:"normal",vehicleType:e.type,transportSystemId:e.transportSystemId}):null,e.hotspotIconUrl&&!e.isBookmark?o.createElement("img",{alt:"",src:e.hotspotIconUrl,className:N("background-icon"),width:"60",height:"68"}):o.createElement(S.Z,{className:N("background-icon"),url:e.isBookmark?D():e.transportSystemId?A():T()}),e.name?o.createElement("div",{className:N("name")},e.name):null)),e.id?o.createElement(R.Z,{uri:k.p1(e.id)}):null)},t}(o.PureComponent);let U=(0,i.ZP)(z);var F=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStopPlacemark=function(e,t){var n,r=(0,E.Od)(e);return"underground"===r&&(n=e.transports[0].transportSystemId),o.createElement(U,{id:e.id,type:r,coordinates:e.coordinates,transportSystemId:n,name:e.name,isBookmark:!1,onClick:function(){return null==t?void 0:t(e)}})},t._renderStaticStop=function(){var e,n=t.props.config.masstransitStop;return n&&n.id!==(null==(e=t.props.content)?void 0:e.data.stop.id)?t._renderStopPlacemark(n,t.props.onStaticPlacemarkClick):null},t._renderContentStop=function(){var e=t._getDisplayType();return t.props.content?o.createElement(o.Fragment,null,o.createElement(a.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,displayType:e,mapSize:t.props.mapSize},o.createElement(b,{content:t.props.content})),"panel"===e?t._renderStopPlacemark(t.props.content.data.stop):null):null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderContentStop(),this._renderStaticStop())},t}(o.Component);let O=(0,i.ZP)(F)},6187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7363),o=n(7358),i=n(1336),a=n(2869),s=n(646),l=n(4788),c=(n(1912),n(7961),n(5164));n(9705);let u={getStopInfo:function(e,t){return(0,c.Z)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.locale,lang:t.lang,mode:"prognosis"}},t).then(function(e){if(!e)throw Error("Stop no data");return e})}},d=function(e){var t=(0,i.ZR)(),n=e.poiData,c=e.updateContent;return r.useEffect(function(){var e;if(n){a.Z.cancel(e);var r,i,d,p,m,f,h,v,g,_,y,b=o.lB(n.feature.properties.uri)?(i=(r=n.feature).properties,d=r.properties.uri,(p={id:o.QT(d),uri:d,hotspotProperties:i,hotspotCoordinates:n.coordinates,clearLine:!0},u.getStopInfo(p,t).then(function(e){return(0,l._)({},e,{coordinates:p.hotspotCoordinates||e.coordinates})})).then(function(e){return{type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}}})):(g=(v=n.feature).properties,_=v.properties.uri,y={clientId:null==(m=t.mapWidget)?void 0:m.clientId,origin:null!=(h=null==(f=t.mapWidget)?void 0:f.origin)?h:"poi",from:"poi",coordinates:n.coordinates,hotspotProperties:g,uri:_},s.Z.fetchSearchResult(y,t).then(function(e){var t=null==e?void 0:e.items[0];return t?{type:"search",data:{result:t,coordinates:n.coordinates}}:null}));e=a.Z.create(b,{success:function(e){e&&c(e)}})}return function(){a.Z.cancel(e)}},[n,c,t]),null}},1815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(8007),o=n(7363),i=n(9111),a=n(576),s=n(1336),l=n(2869),c=n(7434),u=n(5692),d=n(4788),p=n(5164);n(770);let m={buildRoute:function(e,t){return(0,p.Z)("router/buildRoute",{query:(0,d._)({},e,{locale:t.locale,lang:t.lang})},t)}};var f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._buildRoute=function(){var e=n.props;if(c.Qh(e.routePoints,[])){e.onError({waypoints:[],error:"invalid_points",type:e.travelMode,routes:[]});return}var t=c.Ht(e.config,{travelMode:e.travelMode,routerResponse:null,routePoints:e.routePoints,activeRouteIndex:-1,viaIndexes:[],settings:{auto:{ignoreTrafficJams:u.a(e.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},{});l.Z.cancel(n._buildRouteAction),n._buildRouteAction=l.Z.create(m.buildRoute(t,e.config).then(function(e){if(!e)throw Error("Unknown Error");return e}),{success:function(t){var n=c.NA(t);n.error?e.onError(n):e.onLoad(n)},fail:function(){e.onError({waypoints:[],error:"unknown_error",type:e.travelMode,routes:[]})}})},n._buildRouteDebounced=(0,i.Z)(n._buildRoute,100),n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=e.routePoints.map(function(e){return e.coords}).filter(Boolean),n=this.props.routePoints.map(function(e){return e.coords}).filter(Boolean);(!(0,a.Z)(t,n)||e.travelMode!==this.props.travelMode)&&n.length>=2&&this._buildRouteDebounced()},n.componentWillUnmount=function(){l.Z.cancel(this._buildRouteAction)},n.render=function(){return null},t}(o.Component);let h=(0,s.ZP)(f)},2002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(4788),o=n(8188),i=n(1912),a=n(7363),s=n(4332),l=n(7839),c=n(5846),u=n(1336),d=n(646),p=n(3369),m=n(7439),f=n(2004),h=n(7297),v=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,2617))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2617}},{ssr:!1}),g=(0,c.Z)({resolved:{},chunkName:function(){return"map-widget-rich-client"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("map-widget-rich-client").then(n.bind(n,2617)).then(function(e){return{default:e.MapWidgetSearchFormResultsListIconView}})},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2617}},{ssr:!1});let _=function(e){var t,n,c,_,y,b,E,w,S,C,R,P,k,x,I,M,T,Z,D,L,A,N,z,U,F=(0,u.ZR)(),O=(t=e.mapLocation,n=e.activeResult,c=e.onSearchBoundsChange,C=(S=(0,u.ZR)()).searchPreloadedResults,P=(R=(0,o._)(a.useState((null==C?void 0:C.chain)!==void 0||(null==C?void 0:C.requestQuery)!==void 0?{text:null==C?void 0:C.requestQuery,displayText:S.query["display-text"],chain:(null==C?void 0:C.chain)?{id:C.chain.id,name:C.chain.name}:void 0,filters:null==(y=S.query)?void 0:null==(_=y.filter)?void 0:_.split(";"),mapLocation:t}:void 0),2))[0],k=R[1],I=(x=(0,o._)(s.Z(function(e,t,o){if(k(e),!e)return Promise.resolve(void 0);var a,s,l,c,u=null==n?void 0:n.id,p=null==o?void 0:o.items.find(function(e){return e.id===u}),m=null!=(l=null==o?void 0:o.requestResults)?l:10,f={text:e.chain?"chain_id:("+e.chain.id+")":e.text,filters:e.filters,clientId:null==(a=S.mapWidget)?void 0:a.clientId,origin:null==(s=S.mapWidget)?void 0:s.origin,center:e.mapLocation.center,span:e.mapLocation.span,bounds:e.mapLocation.bounds,zoom:e.mapLocation.zoom,count:null==o?void 0:o.requestResults,type:["biz","geo"],context:null==o?void 0:o.requestContext,skip:t?Math.floor((null!=(c=null==o?void 0:o.pageCount)?c:0)/m)*m:void 0};return d.Z.fetch(f,S).then(function(e){var n=e.items;return!p||n.find(function(e){return e.id===p.id})||t&&(null==o?void 0:o.items.find(function(e){return e.id===p.id}))||n.push(p),(0,r._)({},e,{items:t&&o?(0,i._)(o.items).concat((0,i._)(n)):n})}).catch(function(){return o})},[S],{value:C,loading:!1}),2))[0],M=x[1],l.Z(function(){P&&M((0,r._)({},P,{mapLocation:t}),!1,I.value)},[t]),{request:P,response:I.value,isLoading:I.loading,searchDisplayText:(null==P?void 0:P.displayText)||(null==P?void 0:null==(b=P.chain)?void 0:b.name)||(null==(E=I.value)?void 0:E.requestCorrectedQuery)||(null==(w=I.value)?void 0:w.requestQuery)||(null==P?void 0:P.text)||"",fetchMore:function(){M(P,!0,I.value)},update:function(e){M({text:e,mapLocation:t},!1,void 0).then(function(e){var t;return(null==e?void 0:null==(t=e.exactResult)?void 0:t.bounds)&&(!e.items||1===e.resultsCount)?c(e.exactResult.bounds):(null==e?void 0:e.bounds)&&c(e.bounds),e})},clear:function(){M(void 0,!1,void 0)}}),q=(T=e.mapSize,D=(Z=(0,o._)(a.useState(!1),2))[0],L=Z[1],a.useEffect(function(){L(T.width<295||T.height<250)},[T]),D),B=!!(null==(U=F.mapWidget)?void 0:U.constructorApiValidKey),H=function(){O.clear(),e.onResultsListClose()},W=function(t){""===t.trim()?H():(O.update(t),(0,h.h)(e.mapSize)||e.onResultsListOpen())};return a.createElement(a.Fragment,null,function(){if(!B)return null;var t=!!O.response;return a.createElement(v,{value:O.searchDisplayText,mapLocation:e.mapLocation,mapSize:e.mapSize,submitSearch:W,onClear:H},t||e.isResultsListShown?a.createElement(g,{isActive:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}):null)}(),!(O.request&&!q)||B?null:a.createElement(m.Z,{resultsCount:null!=(N=null==(A=O.response)?void 0:A.totalResultCount)?N:0,checked:e.isResultsListShown,onClick:e.isResultsListShown?e.onResultsListClose:e.onResultsListOpen}),e.isResultsListShown?a.createElement(h.Z,{searchFormMode:B,mapSize:e.mapSize,onClose:e.onResultsListClose},a.createElement(f.Z,{searchResultsCount:B?null==(z=O.response)?void 0:z.totalResultCount:void 0,searchDisplayText:O.searchDisplayText,searchRequest:O.request,searchResults:O.response,isLoading:O.isLoading,onListItemClick:e.onResultClick,onLoadMoreClick:function(){return O.fetchMore()}})):null,function(){if(!O.response)return null;var t,n,r,o,i=[e.activeResult,null==(n=F.mapWidget)?void 0:null==(t=n.activeObject)?void 0:t.items[0],null==(r=F.poiPreloadedResults)?void 0:r.items[0],null==(o=F.whatsherePreloadedResults)?void 0:o.items[0]].filter(function(e){return!!e});return a.createElement(p.Z,{hiddenResults:i,results:O.response,onPlacemarkClick:e.onResultClick})}())}},7840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(4788),o=n(8007),i=n(7363),a=n(1336),s=n(9625),l=n(7293),c=n(6076),u=n(9160),d=n(829),p=n(1111),m=n(4061),f=(0,n(5846).Z)({resolved:{},chunkName:function(){return"flyover"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("flyover").then(n.bind(n,2612))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2612}}),h={advert:void 0,brandingId:void 0},v=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStaticSearchResult=function(e){var n;return e&&e.id!==(null==(n=t.props.content)?void 0:n.data.result.id)?i.createElement(i.Fragment,null,i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[e]},mapLocation:t.props.mapLocation}),i.createElement(d.Z,{result:(0,r._)({},e,h),coordinates:e.coordinates,mode:"active",onClick:t.props.onStaticPlacemarkClick}),i.createElement(p.Z,{uri:e.uri})):null},t._renderContentSearchResult=function(){var e=t.props.content,n=t._getDisplayType();if(!e)return null;var o=e.data.result;return i.createElement(i.Fragment,null,i.createElement(c.Z,{coordinates:e.data.coordinates,mapLocation:t.props.mapLocation,displayType:n,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,mapSize:t.props.mapSize},"business"===o.type?i.createElement(l.Z,{result:o}):i.createElement(u.Z,{result:o,isTrafficLayerEnabled:t.props.isTrafficLayerEnabled})),i.createElement(s.Z,{searchResults:{requestId:"",requestResults:1,totalResultCount:1,pageCount:1,resultsCount:1,items:[o]},mapLocation:t.props.mapLocation}),"panel"===n?i.createElement(i.Fragment,null,i.createElement(d.Z,{result:(0,r._)({},o,h),coordinates:o.displayCoordinates,mode:"active"}),i.createElement(p.Z,{uri:o.uri})):null)},t._renderBusinessGeometry=function(e){return e&&"business"===e.type?i.createElement(m.Z,{result:e}):null},t._renderFlyover=function(){var e,n=null==(e=t.props.content)?void 0:e.data.result;return n&&"business"===n.type?i.createElement(f,{result:n,zoom:t.props.mapLocation.zoom}):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e,t,n,r,o,a=this.props.config,s=null==(e=a.whatsherePreloadedResults)?void 0:e.items[0],l=null==(t=a.poiPreloadedResults)?void 0:t.items[0],c=null==(r=a.mapWidget)?void 0:null==(n=r.activeObject)?void 0:n.items[0],u=!!(null==(o=a.flyover)?void 0:o.isEnabled);return i.createElement(i.Fragment,null,this._renderStaticSearchResult(s),this._renderStaticSearchResult(l),this._renderStaticSearchResult(c),this._renderBusinessGeometry(c),this._renderBusinessGeometry(l),u?this._renderFlyover():this._renderContentSearchResult())},t}(i.Component);let g=(0,a.ZP)(v)},5692:(e,t,n)=>{"use strict";function r(e){var t,n;return(null==(t=e.query.l)?void 0:t.includes("trfe"))||(null==(n=e.userMap)?void 0:n.isTrafficShown)}function o(e){return"atm"===e.query.rtm}n.d(t,{W:()=>r,a:()=>o})},7793:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var r=function(e,t){var n,r=t.uatraits.isMobile?620:e.height>600?1014:814;return(null==(n=t.banner)?void 0:n.blockIds.widget)&&!(e.width<=r)?Math.ceil((e.width-r)/2):0}},3688:(e,t,n)=>{"use strict";n.d(t,{V:()=>d,_:()=>u});var r=n(4788),o=n(8188),i=n(129),a=n.n(i),s=n(9705),l=n(3647),c=n(7434);function u(e){var t=(0,o._)(e.split("?"),2),n=t[0],i=t[1];return n+"?"+a().stringify((0,r._)({},a().parse(void 0===i?"":i),{from:"mapframe"}))}function d(e,t,n){var o,i=c.DP({routePoints:e,viaIndexes:[],travelMode:t.travelMode||"auto",activeRouteIndex:0,routerResponse:null,detailedIndex:0,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}},startNavigationInApp:!0},n),a=e.some(function(e){return!e.coords})?null==(o=e.find(function(e){return e.coords}))?void 0:o.coords:void 0;return u(l.e_(l.sY("/",(0,r._)({ll:a?(0,s.s)(a):void 0,z:a?14:void 0},i)),n))}},7293:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var r=n(8007),o=n(7363),i=n(4748),a=n(1336),s=n(3647),l=n(1354),c=n(3688),u=n(2253),d=n(4788),p=n(8188),m=n(2626),f=n(1494),h=(0,i.Z)("flip-icon");let v=function(e){var t=e.isFlipped;return o.createElement(f.Z,{name:"arrow-down-8",className:h({flipped:t}),inline:!0})};var g=n(9394),_=(0,i.Z)("map-widget-business-working-intervals-view");let y=function(e){var t=(0,a.ZR)(),n=(0,p._)(o.useState(!1),2),r=n[0],i=n[1],s=m.lR(e.result,t),l=m.bL(e.result,t)||[],c=l.length>0;return o.createElement("div",{className:_()},o.createElement("div",{className:_("labels")},e.children?o.createElement("div",{className:_("extra-label")},e.children):null,o.createElement("div",{className:_("time-label",(0,d._)({},s.state,{clickable:c})),onClick:c?function(){i(!r)}:void 0},o.createElement("span",{className:_("label-text")},s.text),c?o.createElement("div",{className:_("working-status-control")},o.createElement(v,{isFlipped:r})):null)),r?o.createElement("div",{className:_("intervals")},l.map(function(e,t){var n=e.changedDate?o.createElement(o.Fragment,null,e.dayName,", ",o.createElement("span",{className:_("date")},e.changedDate)):e.dayName;return o.createElement(g.Z,{key:t,isDisabled:!e.changedDate,position:["right"],text:"Праздничный день"},o.createElement("div",{className:_("interval")},o.createElement("div",{className:_("day")},n),o.createElement("span",{className:_("time")},Array.isArray(e.text)?e.text.join(", "):e.text)))})):null)};var b=n(1640),E=n(958),w=(0,i.Z)("map-widget-business-contacts-view");let S=function(e){var t,n,r=(0,a.ZR)(),i=(0,p._)(o.useState(!1),2),l=i[0],c=i[1],u=(0,b._)((0,E.Po)(e.result,r)),d=u[0],m=u.slice(1),h=null==(n=e.result.urls)?void 0:n[0];return o.createElement("div",{className:w()},e.result.fullAddress?o.createElement("div",{className:w("item")},o.createElement(f.Z,{inline:!0,name:"logo-24",className:w("icon")}),e.result.fullAddress):null,d?o.createElement("div",{className:w("item")},o.createElement("div",null,d?o.createElement("div",{className:w("phone-container")},o.createElement("a",{className:w("main-phone"),href:"tel:"+(null!=(t=d.value)?t:d.number)},o.createElement(f.Z,{inline:!0,name:"call-24",className:w("icon")}),d.number),m.length>0?o.createElement("div",{className:w("flip"),onClick:function(){c(!l)}},m.length,o.createElement(v,{isFlipped:l})):null):null,l?m.map(function(e){var t;return o.createElement("a",{key:e.number,className:w("phone"),href:"tel:"+(null!=(t=e.value)?t:e.number)},e.number)}):null)):null,h?o.createElement("div",{className:w("item")},o.createElement(f.Z,{inline:!0,name:"web-24",className:w("icon")}),o.createElement("a",{className:w("url"),href:h,target:"_blank"},s.DJ(h,!0))):null)};var C=n(6665),R=n(3085),P=(0,i.Z)("map-widget-business-buttons-view"),k=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderGetToButton=function(){if(l.Wv(t.props.result))return null;var e={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},n=(0,c._)((0,c.V)([{coords:null,value:""},e],{},t.props.config));return o.createElement("div",{className:P("button-container")},o.createElement(R.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Как добраться"))},t._renderAboutButton=function(){return o.createElement("div",{className:P("button-container")},o.createElement(R.Z,{view:"primary",size:"small",isStretched:!0,url:t.props.businessUrl,target:"_blank"},"Об организации"))},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement("div",{className:P()},this._renderGetToButton(),this._renderAboutButton())},t}(o.Component);let x=(0,a.ZP)(k);var I=n(4332),M=n(5164),T=n(9705);let Z={checkCoverage:function(e,t){return(0,M.Z)("taxi/checkCoverage",{query:{ll:(0,T.s)(e.center),lang:t.locale}},t)}};var D=(0,i.Z)("map-widget-taxi-link-view");let L=function(e){var t=(0,a.ZR)(),n=(0,p._)(I.Z(function(){return Z.checkCoverage({center:e.endPoint},t)},[e.endPoint,t],{value:null,loading:!1}),2),r=n[0],i=n[1];return(o.useEffect(function(){i()},[e.endPoint,i]),r.value||r.loading)?o.createElement("div",{className:D()},o.createElement(f.Z,{name:"yndx-taxi-16",className:D("icon")}),o.createElement("a",{className:D("link"),href:function(){var n,r,o,i=null==(n=t.mapWidget)?void 0:n.taxi,a=t.uatraits.isMobile;if(i){var l=(0,p._)((null==(r=e.startPoint)?void 0:r.map(String))||[],2),c=l[0],u=l[1],d=(0,p._)(e.endPoint.map(String),2),m=d[0],f=d[1];return s.Ow({urlTemplate:a?i.mobileUrlTemplate:i.urlTemplate,domain:i.domain,startLat:void 0===u?"":u,startLon:void 0===c?"":c,endLat:void 0===f?"":f,endLon:void 0===m?"":m,tariffClass:"",lang:null!=(o=i.lang)?o:"ru"})}}(),target:"_blank"},"Вызвать такси")):null};var A=n(8371),N=(0,i.Z)("map-widget-business-content-view"),z=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getCategories=function(){if(t.props.result.categories&&0!==t.props.result.categories.length)return t.props.result.categories.map(function(e){return e.name}).join(", ")},t._renderFeedbackUrl=function(){var e=t.props,n=s.ne(e.result.id),r=(0,c._)(s.e_(n,e.config));return o.createElement("a",{className:N("feedback-link"),href:r,target:"_blank"},"Сообщить об ошибке")},t._renderTaxiUrl=function(){var e=t.props;return l.Wv(e.result)?null:o.createElement(L,{endPoint:e.result.coordinates,startPoint:e.userCoordinates})},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=s.S$({id:e.result.id,seoname:e.result.seoname}),n=(0,c._)(s.e_("/"+t,e.config));return o.createElement("div",{className:N()},o.createElement(A.Z,{title:e.result.title,titleUrl:n,subtitle:this._getCategories()}),o.createElement(y,{result:this.props.result},o.createElement(u.Z,{result:e.result})),o.createElement(S,{result:e.result}),o.createElement("div",{className:N("stops")},o.createElement(C.Z,{result:e.result})),o.createElement("div",{className:N("business-buttons")},o.createElement(x,{businessUrl:n,result:e.result})),o.createElement("div",{className:N("bottom-links")},this._renderTaxiUrl(),this._renderFeedbackUrl()))},t}(o.Component);let U=(0,a.ZP)(z)},2253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(8007),o=n(7363),i=n(4748),a=n(1336),s=n(3647),l=n(3688),c=n(7809),u=n(1494),d=n(4953),p=n(1469),m=(0,i.Z)("a11y-hidden");let f=function(e){var t=e.children,n=e.tag;return t?o.createElement(void 0===n?"span":n,{className:m()},t):null};var h=n(5172),v=(0,i.Z)("business-rating-badge-view");let g=(0,c.Z)(a.ZP,h.ZP)(function(e){var t=Math.round(2*e.ratingValue),n=Math.floor(t/2),r=!1;2*n!==t&&(r=!0);var i=e.size||"m",a=e.weight||"medium",s=e.collapseStars?1:5;return o.createElement(d.ZP,{name:"business_rating"},o.createElement("div",{className:v({size:i,weight:a})},o.createElement("div",{className:v("stars")},Array(s).fill(null).map(function(t,i){var a=r&&i===n,s=i>=(r?n+1:n);return o.createElement(u.Z,{name:a?"place-half-star-16-fullsize-flip":"place-rating-star-16-fullsize",className:v("star",{full:!s&&!a,empty:s,half:a}),theme:a?e.theme:void 0,key:i,inline:!0})})),e.onlyStars?null:o.createElement("div",{className:v("rating")},o.createElement(f,null,"Рейтинг"," "),o.createElement("span",{className:v("rating-text")},p.D$(e.ratingValue,e.config.lang,{min:1,max:1})))))});var _=n(9394),y=(0,i.Z)("map-widget-business-rating-view"),b=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getReviewUrl=function(){if(!t.props.disableLink){var e=s.S$(t.props.result,{sublanding:"reviews"},{},{"add-review":""});return(0,l._)(s.e_("/"+e,t.props.config))}},t._renderContent=function(){var e,n=t.props;return n.result.ratingData?n.result.ratingData.ratingValue?o.createElement(g,{ratingValue:n.result.ratingData.ratingValue}):(e={count:n.result.ratingData.reviewCount}).count?e.count+" "+(e.count%10==1&&e.count%100!=11?"отзыв":e.count%10>1&&e.count%10<5&&(e.count%100<10||e.count%100>20)?"отзыва":"отзывов"):"Ещё нет отзывов":null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(_.Z,{text:"Оценить место",position:"bottom",isAir:!0},o.createElement("a",{className:y(),href:this._getReviewUrl(),target:"_blank"},this._renderContent()))},t}(o.Component);let E=(0,a.ZP)(b)},8371:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7363),o=(0,n(4748).Z)("map-widget-content-title-view");let i=function(e){return r.createElement(r.Fragment,null,r.createElement("a",{href:e.titleUrl,target:"_blank",className:o("title",{disabled:!e.titleUrl})},e.title),e.subtitle?r.createElement("div",{className:o("subtitle")},e.subtitle):null)}},6076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(8007),o=n(7363),i=n(4748),a=n(576),s=n(1912),l=n(8848),c=n(5900),u=n(309),d=n(3340),p=n(4610),m=n(1909),f=n(9360),h=(0,i.Z)("map-widget-content-view"),v={top:10,right:8};let g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=null,n._updateMapLocation=function(){if(n.props.updateLocationRequest){var e,t,r,o,i=n.state.maxHeight||n.state.height,a=null==(o=n._containerRef)?void 0:o.offsetWidth;if(i&&a){var d="panel"===n.props.displayType?(e=n.props.mapLocation,t=n.props.coordinates,r=(0,c.f)(t,e.zoom),r[1]+=32,(0,u.W)(r,e.zoom)):function(e,t,n,r){var o,i=e.bounds,a=(0,l.V)(i,t)?e.center:t,d=(0,l.V)(i,t)?t:e.center,p=(0,c.f)(a,e.zoom),m=(0,c.f)(d,e.zoom),f=i.map(function(t){return(0,c.f)(t,e.zoom)}),h=m[0]-f[0][0],v=f[1][0]-m[0],g=m[1]-f[1][1],_=Math.min(h,v),y=(0,s._)(p),b=Math.ceil(n.width/2);if(_<b){var E=b-_;h>=v?y[0]+=E:y[0]-=E}var w=n.height+(null!=(o=null==r?void 0:r.main)?o:0);return g<w&&(y[1]-=w-g+10),(0,u.W)(y,e.zoom)}(n.props.mapLocation,n.props.coordinates,{width:a,height:i},n.props.offset);n.props.updateLocationRequest({center:d,duration:300})}}},n._updateWidthHeight=function(){if(n._containerRef){var e,t,r,o;n.setState({height:n._containerRef.clientHeight,width:"balloon"===n.props.displayType?n._containerRef.clientWidth+20:void 0,maxHeight:"balloon"===n.props.displayType?(e=n.props.mapLocation,t=n._containerRef.clientHeight,(o=(r=e.bounds.map(function(t){return(0,c.f)(t,e.zoom)}))[0][1]-r[1][1]+22)<t?o:t):Math.ceil(n.props.mapSize.height/2),ready:!0},function(){return n._updateMapLocation()})}},n._setContainerRef=function(e){n._containerRef=e,n._updateWidthHeight()},n._renderContainer=function(){return o.createElement("div",{className:h("container",{ready:n.state.ready}),ref:n._setContainerRef,style:{height:n.state.height,maxHeight:n.state.maxHeight,width:n.state.width}},o.createElement(p.Z,{width:"dynamic"},o.createElement("div",{className:h("frame")},n.props.children)))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;e.coordinates===this.props.coordinates&&e.displayType===this.props.displayType&&(0,a.Z)(this.props.mapSize,e.mapSize)||this.setState({height:void 0,width:void 0,maxHeight:void 0,ready:void 0},function(){t._updateWidthHeight()})},n.render=function(){var e=this.props;return"balloon"===e.displayType?o.createElement(d.Z,{coordinates:e.coordinates,key:e.coordinates.join(),position:"top",restrictPosition:!0,type:"normal",skipMaxHeight:!0,offset:e.offset,isShown:!0},o.createElement("div",{className:h("balloon")},o.createElement(m.Z,{offset:v,onClick:e.onClose}),this._renderContainer())):o.createElement(f.v7,null,o.createElement("div",{className:h("panel"),key:e.coordinates.join()},o.createElement(m.Z,{offset:v,onClick:e.onClose}),this._renderContainer()))},t}(o.Component)},8005:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7363),o=n(4748),i=n(3085),a=n(1494),s=(0,o.Z)("map-widget-in-maps-button");let l=function(e){var t=r.createElement(a.Z,{name:"logo-24",inline:!0,className:s("icon")});return r.createElement(i.Z,{view:"air",size:"small",icon:t,url:e.url,target:"_blank"},e.children)}},9360:(e,t,n)=>{"use strict";n.d(t,{v7:()=>e_,ZP:()=>ey});var r=n(2267),o=n(5766),i=n(4788),a=n(8007),s=n(8188),l=n(1912),c=n(7363),u=n(576),d=n(4748);let p=function(e){var t=null,n=null,r=!1,o=!1,i=-1;function a(){for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];if(o){r=!0,t=l,n=this;return}e.apply(this,l),o=!0,i=window.requestAnimationFrame(function(){o=!1,r&&(r=!1,n=null,t=null,a.apply(n,t))})}return a.scheduled=o,Object.defineProperty(a,"scheduled",{get:function(){return o}}),a.cancel=function(){window.cancelAnimationFrame(i),i=-1,o=!1,r=!1,n=null,t=null},a};var m=n(1336),f=n(9048),h=n(9602),v=n(8597),g=n(3546),_=n(2574);let y=(0,v.ZP)()(function(e){function t(t){var n;return(n=e.call(this,t)||this)._getState=function(){var e=n.props.map;if(!e)return{zoomOutIsEnabled:!1,zoomInIsEnabled:!1};var t=Math.round(100*e.zoom)/100;return{zoomOutIsEnabled:t>e.zoomRange.min,zoomInIsEnabled:t<e.zoomRange.max}},n._updateButtons=function(){n.setState(n._getState())},n._changeZoom=function(e){var t=n.props.map;if(t){var r,o=null!=(r=n._targetZoom)?r:t.zoom;n._targetZoom=o+e;var i=n._targetZoom;t.animateCenterAndZoom(t.center,n._targetZoom,200).then(function(){i===n._targetZoom&&(n._targetZoom=void 0)})}},n._onZoomIn=function(e){e.preventDefault(),n._changeZoom(1)},n._onZoomOut=function(e){e.preventDefault(),n._changeZoom(-1)},n.state=n._getState(),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.map&&this.props.map&&this._updateButtons()},n.render=function(){return c.createElement(c.Fragment,null,c.createElement(_.Z,{onUpdate:this._updateButtons,onZoomRangeChange:this._updateButtons}),c.createElement(g.Z,{onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut,disabledZoomIn:!this.state.zoomInIsEnabled,disabledZoomOut:!this.state.zoomOutIsEnabled,size:this.props.size}))},t}(c.PureComponent));var b=n(4185),E=n(2669),w=n(4953),S=n(3085),C=n(9394),R=n(6969),P=n(1784),k=(0,d.Z)("map-geolocation-control"),x=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){e.preventDefault(),t.props.onClick()},t._renderIcon=function(){var e=t.props;if(e.isLoading)return c.createElement("div",{className:k("spinner")},c.createElement(R.Z,{view:"small",withoutMargin:!0}));var n=!!e.config.mapWidget;return c.createElement("div",{className:k("icon"),dangerouslySetInnerHTML:{__html:e.config.uatraits.isMobile&&!n?P.location48Icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.385 12.42l16.01-7.614a.6.6 0 0 1 .8.8l-7.616 16.009a.6.6 0 0 1-1.11-.068l-2.005-6.012-6.01-2.003a.6.6 0 0 1-.069-1.111z" fill="currentColor"/></svg>'}})},t}return(0,a._)(t,e),t.prototype.render=function(){var e,t=this.props,n=null!=(e=t.size)?e:t.config.uatraits.isMobile?"large":"medium",r=!!t.config.mapWidget;return c.createElement("div",{className:k({noprint:!0})},c.createElement(C.Z,{text:"Моё местоположение",position:"left",isAir:!0},c.createElement(w.ZP,{name:"geolocation",logClick:!0},c.createElement(S.Z,{view:t.config.uatraits.isMobile&&!r?"air-round":"air",size:n,icon:this._renderIcon(),onClick:this._onClick,disabled:t.isLoading,checked:t.isChecked,ariaLabel:"Моё местоположение"}))))},t}(c.Component);let I=(0,m.ZP)(x);var M=n(2751),T=(0,d.Z)("map-widget-map-scale-line-view");let Z=function(e){return c.createElement("div",{className:T()},c.createElement(M.default,{center:e.location.center,zoom:e.location.zoom}))};var D=(0,d.Z)("map-widget-ruler-control-view");let L=function(e){return c.createElement("div",{className:D()},c.createElement(C.Z,{text:"Линейка",position:"left",isAir:!0},c.createElement(S.Z,{ariaHidden:!0,icon:c.createElement("div",{className:D("icon"),dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.56 14.363L14.363 3.56a1.91 1.91 0 0 1 2.7 0l3.377 3.376a1.91 1.91 0 0 1 0 2.7L9.636 20.442a1.91 1.91 0 0 1-2.7 0l-3.377-3.377a1.91 1.91 0 0 1 0-2.7zm4.12-.743l1.282-1.282 1.823 1.824a.764.764 0 1 0 1.08-1.082l-1.824-1.822 1.216-1.215 1.148 1.145a.763.763 0 0 0 1.318-.534.765.765 0 0 0-.237-.545l-1.148-1.147 1.282-1.283 1.824 1.824a.764.764 0 0 0 1.08-1.082l-1.825-1.824 1.014-1.012a.478.478 0 1 0-.676-.675L4.91 15.038a.478.478 0 0 0 .675.675l1.012-1.012 1.15 1.146a.764.764 0 1 0 1.08-1.079L7.679 13.62v.001z" fill="currentColor"/></svg>'}}),view:"air",size:"small",onClick:function(){return e.updateRuler({isEnabled:!e.isEnabled})},checked:e.isEnabled})))};var A=n(9270),N=(0,d.Z)("traffic-raw-icon");let z=(0,m.ZP)(function(e){var t=e.checked?A.ZU(e.level):"none",n=e.config.isRtl&&!e.config.uatraits.isPhone;return c.createElement("div",{className:N({color:t})},c.createElement("div",{className:N("icon"),style:{transform:n?"scaleX(-1)":void 0},dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10z" fill="#CCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10zm18.333 0a8.333 8.333 0 1 1-16.666 0 8.333 8.333 0 0 1 16.666 0z" fill="#4D4D4D"/><path d="M9.75 2h2.5c5.514 0 10 4.486 10 10a5.605 5.605 0 0 1-3.976-1.65c-1.018-1.018-1.68-2.104-3.22-3.906C13.694 4.857 11.818 3.25 9.75 3.25c-4.136 0-7.5 3.926-7.5 8.75C1.456 11.059 1 10.005 1 8.875 1 5.085 3.547 2 9.75 2z" fill="#4D4D4D"/></svg>'}}),c.createElement("div",{className:N("text")},e.checked?e.level:null))});var U=(0,d.Z)("map-widget-traffic-control-view");let F=function(e){var t=c.createElement(z,{checked:e.isActive,level:e.level});return c.createElement("div",{className:U()},c.createElement(S.Z,{onClick:e.onClick,icon:t,size:"small",view:"air"},e.hasText?"Пробки":null))};var O=(0,d.Z)("layout-control-group"),q=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._onUpdate=function(){var e=n.props,t=n._root.current.clientHeight,r=n._root.current.clientWidth;e.height>0&&t>0&&e.height===t||e.onUpdate(e.type,{height:t,width:r})},n._onResize=function(){n._onUpdate()},n._onResizeThrottled=p(n._onResize),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate(e.type,{position:e.position,height:t,width:n})},n.componentDidUpdate=function(e){this.props.position!==e.position&&this.props.onUpdate(this.props.type,{position:this.props.position})},n.render=function(){var e=this.props,t=!e.visible,n=(0,s._)("left"===e.side?[""+e.sideLeftMargin+"px",void 0]:"right"===e.side?[void 0,""+e.sideRightMargin+"px"]:[""+e.sideLeftMargin+"px",""+e.sideRightMargin+"px"],2),r=n[0],o=n[1];return c.createElement(w.ZP,{group:!0,hidden:t},c.createElement("div",{ref:this._root,className:O({side:e.side||"right",hidden:t,animated:e.animated}),"data-type":e.type,style:{transform:"translateY("+e.top+"px)",left:r,right:o,pointerEvents:e.pointerEventsNone?"none":void 0}},e.children,c.createElement(f.Z,{onResize:this._onResizeThrottled})))},t}(c.Component);function B(e){for(var t={},n=0,r=0,o=e.controlsOrder;r<o.length;r++){var a=(0,s._)(o[r],1)[0],l=0,c=e.controlGroups[a];if(c&&0!==c[e.dimension]){var u=!t[c.type];u&&(l+=c[e.dimension]+e.betweenMargin);var d=n+l;if(d>e.viewport+e.betweenMargin)break;u&&(t[a]=(0,i._)({},c)),n=d}}return{controlGroups:t}}var H=function(e,t,n){var r={top:W(n.betweenMargin),center:W(n.betweenMargin),bottom:W(n.betweenMargin)};e.forEach(function(e){r[e.position].height+=e.height+n.betweenMargin}),r.top.height=Math.max(r.top.height,0),r.center.height=Math.max(r.center.height,0),r.bottom.height=Math.max(r.bottom.height,0),r.top.top=n.topSizes.minTop;var a=r.top.top+r.top.height+n.betweenMargin;return r.bottom.top=j(n.topSizes.maxTop-r.bottom.height,a,n.topSizes.maxTop),r.center.top=j(n.topSizes.middle-Math.round(r.center.height/2),a,r.bottom.top-n.betweenMargin-r.center.height),e.reduce(function(e,a){var s=r[a.position],l=s.top,c=Math.abs(a.top-l),u=c>20&&c<300&&n.enableAnimation,d=(0,i._)({},t[a.type],{animated:u,top:l});return s.top+=a.height+n.betweenMargin,(0,i._)({},e,(0,o._)({},a.type,d))},{})};function W(e){return{top:0,height:-e,width:-e}}function G(e,t){return Object.values(e).filter(function(e){return!!e}).sort(function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)})}function j(e,t,n){return Math.max(Math.min(e,n),t)}var V=n(7793),Y=n(6003),X=n(7823),K=n(111),$=n(1494),J=(0,d.Z)("flyover-button");let Q=function(e){return c.createElement("div",{className:J({active:e.active})},c.createElement(S.Z,{ariaHidden:!0,view:"air",size:"medium",icon:e.iconName?c.createElement("div",{className:J("icon")},e.isLoading?c.createElement("div",{className:J("spinner")},c.createElement(R.Z,{view:"small",withoutMargin:!0})):c.createElement($.Z,{name:e.iconName,inline:!0})):void 0,onClick:e.isLoading?void 0:e.onClick,disabled:e.isLoading},e.text?c.createElement("div",{className:J("text")},e.text):null))};var ee=n(6657),et=n(7105),en=n(1086),er=(0,d.Z)("map-flyover-control");let eo=function(){var e=(0,v.Sx)().map,t=(0,et.KE)().flyoverObject,n=(0,s._)(c.useState(!1),2),r=n[0],o=n[1],i=(0,s._)(c.useState(!1),2),a=i[0],l=i[1],u=null==t?void 0:t.center,d=function(){ee.p_("flyover"),o(!1)},p=function(){if(e&&u){o(!0);var t=null==e?void 0:e.projection.toWorldCoordinates(u);ee.zR(e,{worldCenter:t},function(){o(!1)})}};c.useEffect(function(){d()},[u]);var m=(0,K.Z)(function(){e.zoom<16&&r&&d()},100),f=function(){var n="ready"!==(t?en.go(t.tile.uri,e):null);n!==a&&l(n)};return(0,Y.Z)(function(){f()}),(0,X.Z)(function(){d(),m.cancel()}),u?c.createElement("div",{className:er()},c.createElement(w.ZP,{name:"flyover_control",logClick:!0},c.createElement(Q,{active:r,onClick:function(){if(ee.p_(),r){d();return}p()},iconName:"view360-24",text:"Обзор 360°",isLoading:a})),c.createElement(_.Z,{onActionStart:function(e){["scrollZoom","drag"].includes(e)||d()},onUpdate:m,onTile3dChanged:f})):null};var ei=(0,d.Z)("map-widget-layout-view"),ea=["zoom","rulers","top-right-controls","geolocation"],es=["top-right-controls","zoom","3D"],el=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],ec=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],eu=[["zoom"],["top-right-controls"],["geolocation"],["3D"]],ed=[["top-right-controls"],["zoom"],["3D"]],ep=[["open-in-maps-medium"],["open-in-maps-small"],["open-in-maps-tiny"],["top-left-controls"]],em=[["open-in-maps-small"]],ef=[["open-in-maps-medium"]],eh=ei("top-panel"),ev=ei("bottom-panel"),eg=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=c.createRef(),n._getFittingBottomLayout=function(){var e,t=n.state,r=((null==(e=n._root.current)?void 0:e.clientWidth)||0)-305,o=Object.keys(B({controlsOrder:ef,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups),i=Object.keys(B({controlsOrder:em,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups);return 1===o.length?["open-in-maps-medium"]:1===i.length?["open-in-maps-small"]:["open-in-maps-tiny","rulers"]},n._reposition=function(){var e,t=n.state,r=(null==(e=n._root.current)?void 0:e.clientHeight)||0,o=10+r,a=j(o,10,r),c=Math.round((o+10)/2),d=n._getFittingBottomLayout(),p=B({controlsOrder:ep.filter(function(e){var t=(0,s._)(e,1)[0];return!ec.includes(t)||d.includes(t)}),viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),m=B({controlsOrder:n._isFlyover?ed:eu,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),f=G(p.controlGroups,el),h=H(G(m.controlGroups,n._isFlyover?es:ea),n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),v=H(f,n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:c},enableAnimation:!0}),g=(0,l._)(Object.keys(h)).concat((0,l._)(Object.keys(v))),_=(0,i._)({},t.controlGroups,h,v);(0,u.Z)(t.controlGroups,_)&&(0,u.Z)(t.visibleControlGroups,g)||n.setState({visibleControlGroups:g,controlGroups:_})},n._onControlGroupUpdate=function(e,t){n.setState(function(n){return(0,i._)({},n,{controlGroups:(0,i._)({},n.controlGroups,(0,o._)({},e,(0,i._)({type:e},n.controlGroups[e],t)))})},n._reposition)},n._getControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"right",children:n._renderTopRightControls()},{type:"zoom",position:n.state.visibleControlGroups.length<=2?"top":"center",side:"right",children:n._renderZoomControls("small")},{type:"geolocation",position:"center",side:"right",children:n._renderGeolocationControl()},{type:"open-in-maps-medium",position:"bottom",side:"left",children:n._renderInMaps("medium")},{type:"open-in-maps-small",position:"bottom",side:"left",children:n._renderInMaps("small")},{type:"open-in-maps-tiny",position:"bottom",side:"left",children:n._renderInMaps("tiny")},{type:"top-left-controls",position:"top",side:"left",children:n._renderTopLeftControls()}]},n._getFlyoverControlGroups=function(){return[{type:"top-right-controls",position:"top",side:"both",children:n._renderFlyoverTopControls()},{type:"zoom",position:"center",side:"right",sideRightMargin:12,children:n._renderZoomControls()},{type:"3D",position:"center",side:"right",sideRightMargin:12,children:n._render3DControl()}]},n._renderFlyoverControl=function(){return c.createElement("div",{className:ei("flyover")},c.createElement(eo,null))},n._renderGeolocationControl=function(){return c.createElement("div",{className:ei("geolocation")},c.createElement(I,{onClick:n.props.geolocation.onClick,isLoading:n.props.geolocation.isStarted,size:"small"}))},n._render3DControl=function(){return c.createElement("div",{className:ei("3d")},c.createElement(b.Z,null))},n._renderFlyoverTopControls=function(){return c.createElement("div",{className:ei("top-flyover-control")},n._renderFlyoverControl())},n._renderTopRightControls=function(){return c.createElement("div",{className:ei("top-right-controls")},n._renderRuler(),n._renderTrafficControl())},n._renderTopLeftControls=function(){return c.createElement("div",{className:ei("top-left-controls")},c.createElement("div",{className:ei("search")},n.props.search.render()),c.createElement("div",{className:ei("routes")},n.props.routes.render()))},n._renderTrafficControl=function(){return c.createElement(F,(0,i._)({},n.props.traffic,{hasText:n.props.mapSize.width>400}))},n._renderRuler=function(){return c.createElement("div",{className:ei("ruler")},c.createElement(L,n.props.ruler))},n._renderInMaps=function(e){return c.createElement("div",{className:ei("maps-links")},n.props.inMaps.render(e))},n._renderZoomControls=function(e){return c.createElement("div",{className:ei("zoom-controls")},c.createElement(y,{size:e}))},n.state={visibleControlGroups:[],controlGroups:{}},n._repositionThrottled=p(n._reposition),n}(0,a._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._repositionThrottled()},n.render=function(){var e=this,t=this._isFlyover?this._getFlyoverControlGroups():this._getControlGroups(),n=(0,V.d)(this.props.mapSize,this.props.config);return c.createElement("div",{className:ei()},c.createElement("div",{className:ei("layout")},c.createElement("div",{ref:this._root,className:ei("controls")},t.map(function(t){var n,r,o,a,s;return c.createElement(q,(0,i._)({},t,{key:t.type,sideLeftMargin:t.sideLeftMargin||8,sideRightMargin:t.sideRightMargin||8,visible:e.state.visibleControlGroups.includes(t.type),animated:null==(n=e.state.controlGroups[t.type])?void 0:n.animated,height:null!=(a=null==(r=e.state.controlGroups[t.type])?void 0:r.height)?a:0,top:null!=(s=null==(o=e.state.controlGroups[t.type])?void 0:o.top)?s:0,onUpdate:e._onControlGroupUpdate,pointerEventsNone:"top-left-controls"===t.type}))})),c.createElement("div",{className:ei("bottom-layout"),style:{marginRight:""+n.toFixed(0)+"px"}},c.createElement("div",{className:ei("copyrights")},c.createElement(E.Z,{right:100,copyrightOnly:!0})),c.createElement("div",{className:ei("scale-line")},c.createElement(Z,{location:this.props.location}))),c.createElement(f.Z,{onResize:this._repositionThrottled})),c.createElement("div",{className:eh}),c.createElement("div",{className:ev}))},(0,r._)(t,[{key:"_isFlyover",get:function(){var e;return!!(null==(e=this.props.config.flyover)?void 0:e.isEnabled)}}]),t}(c.Component),e_=function(e){return c.createElement(h.Z,{selector:"."+ev},e.children)};let ey=(0,m.ZP)(eg)},6665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(8007),o=n(7363),i=n(4748),a=n(1336),s=n(3688),l=n(1494),c=(0,i.Z)("map-widget-nearest-stops-view"),u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderFromStopDistance=function(e){var n={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},r={coords:e.coordinates,value:""},i=(0,s._)((0,s.V)([r,n],{travelMode:"pedestrian"},t.props.config));return o.createElement("a",{className:c("distance"),href:i,target:"_blank"},o.createElement("div",{className:c("distance-icon")},o.createElement(l.Z,{name:"pedestrian-24-flip",inline:!0,className:c("distance-icon-inner")})),o.createElement("div",{className:c("distance-text")},e.distance))},t._renderStop=function(e){var n="metro"===e.type?e.color:void 0;return o.createElement("div",{className:c("stop"),key:e.id},o.createElement("div",{className:c("metro-icon"),style:{color:n}},o.createElement(l.Z,{name:"metro-stop-24",inline:!0})),o.createElement("div",null,e.name),t._renderFromStopDistance(e))},t}return(0,r._)(t,e),t.prototype.render=function(){return this.props.result.metro?this.props.result.metro.map(this._renderStop):null},t}(o.Component);let d=(0,a.ZP)(u)},3428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>nh});var r=n(4788),o=n(8007),i=n(7363),a=n(1336),s=n(7434),l=n(1886),c=n(2574),u=n(1912),d=n(4748),p=n(3228),m=n(4670),f=n(5900),h=n(9209),v={};function g(e,t){if(!t.offset||!t.size)return{left:0,right:0,bottom:0,top:0};var n=t.offset[0],r=t.offset[0],o=t.offset[1],i=t.offset[1]+t.size.height;return"MASSTRANSIT"===e.pinType&&(n+=e.rotated?-t.size.width:-7,r+=e.rotated?7:t.size.width),"CONSTRUCTION"===e.pinType&&(n+=-10,r=r+t.size.width+-10,o+=-30,i+=-30),"ROUTEPOINT"===e.pinType&&(n-=t.size.width/2,r+=t.size.width/2,o=o+8-10,i+=8),"SPECIAL"===e.pinType&&(n+=-12,r=r+t.size.width+-12,o+=-24,i+=-24),{left:n,right:r,top:o,bottom:i}}function _(e,t,n,r){return Promise.all(e.map(function(e){var o;return v[o=b(e)]=v[o]||(0,h.Z)(function(){return t(e)},r),v[o].then(function(t){var r=(0,f.f)(n.bounds[0],n.zoom),o=(0,f.f)(e.coordinates,n.zoom);return{size:t,offset:[o[0]-r[0],o[1]-r[1]]}})})).then(function(t){return e.map(function(n,r){return function(e,t,n){var r=e[n],o=t[n];if(!o.offset||!o.size)return[];var i=g(r,o);return i.left===i.right||i.top===i.bottom?[]:e.reduce(function(e,n,o){if(r===n)return e;var a=t[o];if(!a.offset||!a.size)return e;var s=g(n,a);return s.left===s.right||s.top===s.bottom?e:(0,m.Y)([[i.left,i.top],[i.right,i.bottom]],[[s.left,s.top],[s.right,s.bottom]])?e.concat(o):e},[])}(e,t,r)})})}function y(e,t,n,r){return _(e,t,n,r).then(function(e){return e.every(function(e){return 0===e.length})})}function b(e){switch(e.pinType){case"CONSTRUCTION":return e.coordinates.join(",")+e.pinType;case"MASSTRANSIT":return(e.balloonItems&&String(e.balloonItems.length)||"0")+("string"==typeof e.text?e.text:e.cacheText||"")+(e.dotSize||"")+(e.rotated||"")+e.pinType+e.coordinates.join(",")+e.pinIndex;case"ROUTEPOINT":return(String(e.index)||0)+(e.value||"")+e.pinType+(e.isLast&&"last");case"SPECIAL":return e.coordinates.join(",")+e.position+e.pinType}}var E=n(6653),w=n(8597),S=n(9297),C=n(111),R={ROUTEPOINT:"ROUTEPOINT",MASSTRANSIT:"MASSTRANSIT",CONSTRUCTION:"CONSTRUCTION",SPECIAL:"SPECIAL"},P=function(e){function t(t){var n;return(n=e.call(this,t)||this)._validityChecksCounter=0,n._processingTimeout=0,n._routeComponentProcessingFunction=function(e,t){var r;return 1===e.length?Promise.resolve(e):(r=e.sort(function(e,t){return e.pinIndex>t.pinIndex?1:-1}),n.props.algoSteps.reduce(function(e,n){return e.then(function(e){return e.optimized?e:t(e.pins,n)})},Promise.resolve({pins:r,optimized:!1}))).then(function(e){return e.pins})},n._updatePins=function(){n._validityChecksCounter=0,window.clearTimeout(n._processingTimeout),n._validateDrawing(n.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n._collectAndProcessGroups=function(e){var t=n.state.mapLocation,r=n.props.config;_(e,n.props.getNodeByPin,t,r).then(function(o){Promise.all((function(e){for(var t=Array(e.length).map(function(){return!1}),n=[],r=0;r<e.length;r++)if(!t[r]){var o=[r],i=[r];for(t[r]=!0;o.length>0;)for(var a=e[o.pop()],s=0;s<a.length;++s){var l=a[s];t[l]||(t[l]=!0,o.push(l),i.push(l))}n.push(i)}return n})(o).map(function(o){var i=o.map(function(t){return e[t]});return n._routeComponentProcessingFunction(i,function(e,o){return function e(t,n,r,o,i,a){return new Promise(function(s){if(1===t.length)s({pins:t,optimized:!0});else if(i>10)s({pins:t,optimized:!1});else{var l=n(t);y(l.pins,r,o,a).then(function(t){t?s({pins:l.pins,optimized:!0}):l.isFinished?l.isFinished&&s({pins:l.pins,optimized:!1}):s(e(l.pins,n,r,o,i++,a))})}})}(e,o,n.props.getNodeByPin,t,0,r)})})).then(function(e){var t=e.reduce(function(e,t){return e.concat(t)});n._validateDrawing(t)})})},n._updateMapLocation=function(){var e=n.props.map.zoom;.25>Math.abs(n.state.mapLocation.zoom-e)||n.setState({mapLocation:(0,S.cx)(n.props.map)})},n._onMapUpdate=function(){n._updateMapLocationThrottled()},n._validateDrawing=function(e){n._validityChecksCounter+=1;var t=n.props.filterPinsByZoom(e,n.state.mapLocation.zoom);if(n._validityChecksCounter>=2){n.setState({pinsToDraw:t});return}y(t,n.props.getNodeByPin,n.state.mapLocation,n.props.config).then(function(e){if(e){n.setState({pinsToDraw:t});return}n._processingTimeout=window.setTimeout(function(){return n._collectAndProcessGroups(t)},50)})},n.state={pinsToDraw:[],mapLocation:(0,S.cx)(n.props.map)},n._updateMapLocationThrottled=(0,C.Z)(n._updateMapLocation,300),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._validityChecksCounter=0,this._validateDrawing(this.props.unprocessedPins.map(function(e,t){return(0,r._)({pinIndex:t},e)}))},n.componentDidUpdate=function(e,t){(this.state.mapLocation.zoom!==t.mapLocation.zoom||this.props.unprocessedPins!==e.unprocessedPins)&&this._updatePins()},n.componentWillUnmount=function(){window.clearTimeout(this._processingTimeout)},n.render=function(){var e=this;return i.createElement(i.Fragment,null,this.state.pinsToDraw.map(function(t){var n=e.props.getMapPlacemarkProps(t);return n?i.createElement(E.Z,(0,r._)({key:function(e){switch(e.pinType){case"CONSTRUCTION":case"MASSTRANSIT":case"SPECIAL":return b(e);case"ROUTEPOINT":return(String(e.index)||0)+e.pinType+(e.isLast&&"last")}}(t)},n),e.props.getNodeByPin(t)):null}),i.createElement(c.Z,{onUpdate:this._onMapUpdate}))},t}(i.Component);let k=(0,w.ZP)({shouldWait:!0})((0,a.ZP)(P));var x=n(251),I=n.n(x),M=n(3331),T=n.n(M),Z=n(4050),D=n.n(Z),L=n(561),A=n.n(L),N=n(7313),z=n(1111),U=n(1494),F=n(8188),O=n(2584),q=Object.entries(O.V).reduce(function(e,t){var n=(0,F._)(t,2),r=n[0],o=n[1];return e[r]=null==o?void 0:o.normal,e},{walk:"pedestrian-16-flip"}),B=n(5172),H=n(1057),W=(0,d.Z)("masstransit-route-pin-view"),G=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(e){var n=t.props,r=e||n.balloonItems&&n.balloonItems[0].stopId;r&&n.onClick&&n.onClick({coordinates:n.coordinates,id:r})},t._renderBalloonItem=function(e){var n,r="underground"===e.iconType&&e.transportSystemId,o=r?null==(n=O.x[e.transportSystemId])?void 0:n.small:"metro-exit"===e.iconType?void 0:q[e.iconType];return i.createElement(H.Z,{className:W("balloon-item",{type:e.iconType}),style:{backgroundColor:"underground"!==e.iconType?e.color:void 0},onClick:function(){return t._onClick(e.stopId)}},o?i.createElement(U.Z,{inline:!0,className:W("balloon-icon"),name:o,theme:r?t.props.theme:void 0}):null,e.text?i.createElement("div",{className:W("balloon-text"),style:{backgroundColor:e.color}},e.text):null)},t._renderBalloon=function(){var e=t.props.balloonItems;return e?i.createElement("div",{className:W("balloon")},t._renderBalloonItem(e[0]),e[1]?i.createElement(i.Fragment,null,i.createElement(U.Z,{name:"arrow-right-8-flip",className:W("arrow"),inline:!0}),t._renderBalloonItem(e[1])):null):null},t._renderText=function(){return t.props.text?i.createElement(H.Z,{tag:"span",className:W("text"),onClick:function(){return t._onClick()}},t.props.text):null},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.balloonItems&&t.balloonItems[t.balloonItems.length-1].color||t.dotColor,r=t.dotSize||"normal";return i.createElement("div",{className:W({rotated:t.rotated,double:t.balloonItems&&2===t.balloonItems.length,clickable:!!t.onClick})},i.createElement("div",{className:W("container")},i.createElement("div",{"aria-hidden":!0,className:W("dot",{size:r}),style:{background:n},onClick:function(){return e._onClick()}}),this._renderBalloon()),this._renderText())},t}(i.PureComponent);let j=(0,B.ZP)((0,a.ZP)(G));var V=n(9410),Y=n(9318),X=n(1791),K=n.n(X),$=n(5097),J=n.n($),Q=(0,d.Z)("waypoint-pin-view"),ee=function(e){function t(t){(n=e.call(this,t)||this)._getServiceIconUrl=function(){var e=n.props;return e.serviceType&&"geolocation"!==e.serviceType?Y.Gr({type:"service",name:e.serviceType,size:e.mobileChooseMode?"normal":"small"},e.config):null},n._getRubricIconUrl=function(){var e,t,r=n.props;if(r.searchResult&&("categories"in r.searchResult&&r.searchResult.categories?e=null==(t=r.searchResult.categories[0])?void 0:t.class:"kind"in r.searchResult&&(e=r.searchResult.kind),e))return Y.Gr({type:"rubrics",name:e,size:r.mobileChooseMode?"normal":"small"},r.config)||void 0},n._renderText=function(){if(!n.props.text)return null;var e=(0,V.Z)(n.props.text,{length:40});return i.createElement("div",{className:Q("text",{hidden:n.props.hideText})},e.split(" ").map(function(e,t){return i.createElement("span",{key:t,className:Q("word")},e)}))},n._renderWaypoint=function(){var e=n.props,t=n.state;return i.createElement(i.Fragment,null,i.createElement(p.Z,{url:e.mobileChooseMode?J():K(),className:Q("pin-icon")}),i.createElement(p.Z,{url:t.currentIconUrl,key:t.currentIconUrl,className:Q("rubric-icon",{"mobile-choose":e.mobileChooseMode,current:!0,type:e.serviceType})}),t.temporaryIconUrl?i.createElement(p.Z,{url:t.temporaryIconUrl,key:t.temporaryIconUrl,className:Q("rubric-icon",{"mobile-choose":e.mobileChooseMode,temporary:!0})}):null,n._renderText())},n._renderIntermediatePoint=function(){var e=n.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:Q("content")},i.createElement("span",{className:Q("index")},e.index)),n._renderText())};var n,r=Y.Gr({type:"rubrics",name:"fallback",size:t.mobileChooseMode?"normal":"small"},t.config),o=n._getServiceIconUrl()||n._getRubricIconUrl()||r;return n.state={temporaryIconUrl:null,currentIconUrl:o},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=this._getServiceIconUrl()||this._getRubricIconUrl();(t.serviceType||t.searchResult!==e.searchResult)&&n&&n!==this.state.currentIconUrl&&this.setState({temporaryIconUrl:this.state.currentIconUrl,currentIconUrl:n})},n.render=function(){var e=this.props,t=0===e.index,n=!t&&!e.isLast&&!e.mobileChooseMode;return"geolocation"===e.serviceType&&e.config.uatraits.isMobile?i.createElement("div",{className:Q({geolocation:!0})}):i.createElement("div",{className:Q({disabled:e.disabled,first:t,last:e.isLast,intermediate:n,"mobile-choose":e.mobileChooseMode})},n?this._renderIntermediatePoint():this._renderWaypoint())},t}(i.Component);let et=(0,a.ZP)(ee);var en=n(3363),er=n(7418);function eo(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}function ei(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return eo(e)}),n=(0,er.Z)(e[t],{type:"STAIRS_UNKNOWN"});return{pins:e.filter(function(e){return!eo(e)}).concat(n),isFinished:!0}}function ea(e){if(e.filter(function(e){return"CONSTRUCTION"===e.pinType}).length<2)return{pins:e,isFinished:!0};var t=e.findIndex(function(e){return"CONSTRUCTION"===e.pinType});return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}).concat(e[t]),isFinished:!0}}function es(e){return{pins:e.filter(function(e){return"CONSTRUCTION"!==e.pinType}),isFinished:!0}}function el(e){return{pins:e.filter(function(e){return"MASSTRANSIT"!==e.pinType||"balloonItems"in e&&e.balloonItems||"dotSize"in e}),isFinished:!0}}function ec(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems});if(-1!==t){var n=(0,u._)(e),r=n[t];return n[t]=(0,er.Z)(n[t],{balloonItems:void 0,dotColor:r.balloonItems&&r.balloonItems[r.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0}),{pins:n,isFinished:!1}}return{pins:e,isFinished:!0}}function eu(e){return{pins:e.filter(function(e){var t;return"MASSTRANSIT"!==e.pinType||!e.balloonItems||(null==(t=e.balloonItems[0])?void 0:t.iconType)!=="metro-exit"}),isFinished:!0}}function ed(e){var t=eg(e);return t?ev(t,e):{pins:e,isFinished:!0}}function ep(e){var t=e.reduce(function(e,t,n){return"MASSTRANSIT"===t.pinType?e.concat(n):e},[]);return ev(t.length>2?t.slice(0,3):t.slice(0,2),e)}function em(e){var t=eg(e);return t?function(e,t){var n=(0,F._)(e,2),o=n[0],i=n[1],a=t[o],s=t[i];if("MASSTRANSIT"!==a.pinType||"MASSTRANSIT"!==s.pinType||!a.balloonItems||!s.balloonItems)return{pins:t,isFinished:!0};var l=a.balloonItems[0].initialText===s.balloonItems[0].initialText&&a.balloonItems[0].color===s.balloonItems[0].color;return t[i]=l?(0,er.Z)(s,(0,r._)({},a,{pinIndex:s.pinIndex,rotated:!1})):(0,er.Z)(s,{rotated:!1,text:"",balloonItems:[a.balloonItems[0],s.balloonItems[0]]}),{pins:t.filter(function(e){return e.pinIndex!==a.pinIndex}),isFinished:!1}}(t,e):{pins:e,isFinished:!0}}function ef(e){var t=e.findIndex(function(e,t,n){var r=n[t+1];return r&&"MASSTRANSIT"===e.pinType&&"MASSTRANSIT"===r.pinType&&("string"==typeof e.text?e.text===r.text:e.cacheText===r.cacheText)}),n=-1!==t?[e[t],e[t+1]]:[];return 2===n.length&&"MASSTRANSIT"===n[0].pinType&&"MASSTRANSIT"===n[1].pinType?n[0].balloonItems&&1===n[0].balloonItems.length&&n[1].balloonItems&&1===n[1].balloonItems.length&&n[0].balloonItems[0].color!==n[1].balloonItems[0].color?{pins:e,isFinished:!0}:{pins:(0,u._)(e.filter(function(e){return!n.includes(e)})).concat([n[1]]),isFinished:!0}:{pins:e,isFinished:!0}}function eh(e){return{pins:e.map(function(e){return"MASSTRANSIT"!==e.pinType||!e.balloonItems||2===e.balloonItems.length||e.first?e:"MASSTRANSIT"!==e.pinType||1!==e.balloonItems.length||e.first?e:(0,er.Z)(e,{balloonItems:void 0,dotColor:e.balloonItems&&e.balloonItems[e.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0})}),isFinished:!0}}function ev(e,t){var n=e.map(function(e){return t[e].rotated?1:0}),r=Math.pow(2,n.length)-1,o=parseInt(n.join(""),2);return o<r?((o+1).toString(2).padStart(n.length,"0").split("").map(Number).map(Boolean).forEach(function(n,r){t[e[r]]=(0,er.Z)(t[e[r]],{rotated:n})}),{pins:t,isFinished:!1}):{pins:t,isFinished:!0}}function eg(e){for(var t=e.map(function(e,t){return{pin:e,index:t}}).filter(function(e){var t=e.pin;return"MASSTRANSIT"===t.pinType&&t.balloonItems&&1===t.balloonItems.length}),n=[],r=1;r<t.length;r++)if(t[r-1].pin.pinIndex===t[r].pin.pinIndex-1){n.push(t[r-1],t[r]);break}return n.length>0?[n[0].index,n[1].index]:null}function e_(e){var t=e.findIndex(function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems&&2===e.balloonItems.length});if(-1===t)return{pins:e,isFinished:!0};var n=e[t];if("MASSTRANSIT"!==n.pinType||!n.balloonItems||2!==n.balloonItems.length)return{pins:e,isFinished:!0};var r={pinIndex:n.pinIndex-1,balloonItems:[n.balloonItems[0]],coordinates:n.balloonItems[0].initialCoordinates,last:!0,pinType:R.MASSTRANSIT,rotated:!1,text:n.balloonItems[0].initialText},o={pinIndex:n.pinIndex,balloonItems:[n.balloonItems[1]],coordinates:n.balloonItems[1].initialCoordinates,first:!0,pinType:R.MASSTRANSIT,rotated:!1,text:n.balloonItems[1].initialText},i=(0,u._)(e);return i.splice(t,1,r,o),{pins:i,isFinished:!1}}function ey(e){return{pins:(0,u._)(e).map(function(e){return(0,er.Z)(e,{rotated:!1})}),isFinished:!0}}function eb(e){if(e.filter(function(e){return"ROUTEPOINT"===e.pinType&&e.value}).length>1){var t=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0!==e.index&&!e.isLast}),n=(0,u._)(e);if(-1!==t)return n[t]=(0,er.Z)(n[t],{value:""}),{pins:n,isFinished:!1};var r=e.findIndex(function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0===e.index});if(-1!==r)return n[r]=(0,er.Z)(e[r],{value:""}),{pins:n,isFinished:!0}}return{pins:e,isFinished:!0}}function eE(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"end"===e.position)}),isFinished:!0}}function ew(e){if(e.length<2)return{pins:e,isFinished:!0};var t=e.filter(function(e){return"SPECIAL"!==e.pinType||["RAILWAY_CROSSING","SPEED_BUMP","BORDER_CROSSING"].includes(e.type)}),n=e.filter(function(e){return"SPECIAL"===e.pinType&&"FERRY"===e.type}),r=e.filter(function(e){return"SPECIAL"===e.pinType&&"TOLL_ROAD"===e.type}),o=e.filter(function(e){return"SPECIAL"===e.pinType&&"FORD_CROSSING"===e.type}),i=e.filter(function(e){return"SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type});return n.length&&t.push(n[0]),r.length&&t.push(r[0]),o.length&&t.push(o[0]),i.length&&t.push(i[0]),{pins:t,isFinished:!0}}function eS(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return!("SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type)}),isFinished:!0}}function eC(e){return function(t){if(t.length<2)return{pins:t,isFinished:!0};var n=t.filter(function(t){return!("SPECIAL"===t.pinType&&t.type===e)});if(!n.length){var r=t.filter(function(e,t){return t%2==0});return{pins:r,isFinished:1===r.length}}return{pins:n,isFinished:!0}}}function eR(e){return 0===e.length?{pins:e,isFinished:!0}:{pins:e.filter(function(e){return"SPECIAL"!==e.pinType}),isFinished:!0}}var eP=n(325),ek=n.n(eP),ex=n(5701),eI=n.n(ex),eM={FORD_CROSSING:{ru:{begin:"poi-alerts-ford-crossing-24",end:"poi-alerts-ford-crossing-end-24"}},RUGGED_ROAD:{ru:{begin:"poi-alerts-road-rugged-24",end:"poi-alerts-rugged-end-24"}},TOLL_ROAD:{ru:{begin:"poi-alerts-pay-wd-24",end:"poi-alerts-pay-wd-end-24"}},FERRY:{ru:{begin:"poi-alerts-ship-24",end:"poi-alerts-ship-end-24"}},RAILWAY_CROSSING:{ru:{single:"poi-alerts-railway-crossing-24"}},SPEED_BUMP:{ru:{single:"poi-alerts-speed-bump-24"}},BORDER_CROSSING:{ru:{single:"poi-alerts-border-24"}}},eT={STAIRS_UP:I(),STAIRS_DOWN:T(),STAIRS_UNKNOWN:D(),GATES:A()},eZ=(0,d.Z)("route-pins-view"),eD=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updatePins=function(){n.setState({pins:(0,u._)(n._getRoutePointPins()).concat((0,u._)(n._getMasstransitPins()),(0,u._)(n._getConstructionPins()),(0,u._)(n._getSpecialRoadPins()))})},n._getUpdatedWaypointCoordinates=function(e,t){var r=n.props,o=r.routePoints.filter(function(e,t){return!r.viaIndexes.includes(t)})[t];return r.routePoints.map(function(t){return o===t?e:t.coords})},n._onDragStart=function(){n.props.setDragging(!0)},n._onDragMove=function(e,t){var r=n.props,o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!0})},n._onDragEnd=function(e,t){var r=n.props;r.setDragging(!1);var o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!1})},n._getMasstransitPins=function(){var e=n.props;return e.activeRoute&&"paths"in e.activeRoute?e.activeRoute.paths.reduce(function(t,n){var r,o,a;return t.concat((r=n.segments,o=e.config,a=function(e){if(!e)return null;var t,n,r=en.U2(e,o),a=(null==(t=e.features)?void 0:t.cooled)?eI():(null==(n=e.features)?void 0:n.heated)?ek():void 0;return i.createElement(i.Fragment,null,e.name,e?i.createElement("span",{className:eZ("masstransit-feature")},r,a?i.createElement(p.Z,{className:eZ("masstransit-feature-icon"),url:a}):null):null)},r.reduce(function(e,t){if(!t.edgePoints||!t.transports)return e;var n,r,i=t.stops&&t.stops[0],s=t.stops&&t.stops[t.stops.length-1];return e.push({balloonItems:[eA(t.transports,t.edgePoints[0],i,o)],pinType:R.MASSTRANSIT,coordinates:t.edgePoints[0],rotated:!1,first:!0,text:a(i),cacheText:null==i?void 0:i.name},{pinType:R.MASSTRANSIT,dotColor:eL(t.transports),coordinates:t.edgePoints[1]}),(null==s?void 0:null==(r=s.exit)?void 0:r.name)&&e.push({pinType:R.MASSTRANSIT,balloonItems:[{iconType:"metro-exit",color:"#666",text:(n=s.exit).name,initialCoordinates:n.coordinates,initialText:n.name,stopId:null==s?void 0:s.id}],coordinates:s.exit.coordinates,rotated:!1,dotSize:"small",text:"Выход"}),e.push({pinType:R.MASSTRANSIT,balloonItems:[eA(t.transports,t.edgePoints[1],s,o)],coordinates:t.edgePoints[1],rotated:!1,last:!0,text:a(s),cacheText:null==s?void 0:s.name}),e},[])))},[]):[]},n._getMapPlacemarkProps=function(e){switch(e.pinType){case"CONSTRUCTION":return{coordinates:e.coordinates,zIndex:N.I.routes};case"MASSTRANSIT":return{coordinates:e.coordinates,zIndex:N.I.routePins.masstransit,blockEvents:!0};case"ROUTEPOINT":var t,r=n.props;if(!e.coords)return null;return{zIndex:0===e.index?N.I.routePins.waypoint+1:e.isLast?N.I.routePins.waypoint+2:N.I.routePins.waypoint,coordinates:e.coords,draggable:r.draggable&&!e.disabled&&(!r.draggableIndexes||(null==(t=r.draggableIndexes)?void 0:t.includes(e.index))),onDragStart:n._onDragStart,onDragEnd:function(t){var r=t.coordinates;return n._onDragEnd(r,e.index)},onDragMove:function(t){var r=t.coordinates;return n._onDragMove(r,e.index)}};case"SPECIAL":return{zIndex:N.I.routes,coordinates:e.coordinates}}},n._getConstructionPins=function(){var e=n.props;return e.activeRoute&&"constructions"in e.activeRoute?e.activeRoute.constructions.map(function(e){return(0,r._)({},e,{pinType:R.CONSTRUCTION})}):[]},n._getSpecialRoadPins=function(){var e=n.props;return e.activeRoute&&"specialRoadPoints"in e.activeRoute&&e.activeRoute.specialRoadPoints?e.activeRoute.specialRoadPoints.map(function(e){return(0,r._)({},e,{pinType:R.SPECIAL})}):[]},n._getRoutePointPins=function(){var e=n.props,t="taxi"===e.travelMode,o=s.MW(e.travelMode,e.config),i=e.routePoints.every(function(e){return!e.coords||!!e.input})&&!e.isRoutePointDragging;return e.routePoints.filter(function(t,n){return!e.viaIndexes.includes(n)}).map(function(e,n,a){var s=t&&0!==n&&n!==a.length-1||n>=o-1&&n!==a.length-1;return(0,r._)({},e,{pinType:R.ROUTEPOINT,coordinates:e.coords||[0,0],disabled:s,showText:i,index:n,isLast:n===a.length-1})})},n._getConstructionNode=function(e){return i.createElement("div",{className:eZ("construction",{type:e.type})},i.createElement(p.Z,{url:eT[e.type]}))},n._getSpecialRoadPinNode=function(e){var t=n.props.config,r=eM[e.type];if(!r)return null;var o=r[t.lang],a=(0,Y.XT)(t)?r.ru:r.en,s=r.ru;return i.createElement("div",{className:eZ("special-road",{type:e.type,position:e.position})},i.createElement(U.Z,{name:(o||a||s)[e.position]}))},n._getMasstransitPinNode=function(e){var t=n.props,o=!t.activeRoute||"isIntercityRoute"in t.activeRoute&&t.activeRoute.isIntercityRoute||t.isMapEditing?void 0:t.onStopClick;return i.createElement(j,(0,r._)({},e,{onClick:o}))},n._getWaypointPinNode=function(e){return i.createElement(et,{text:e.value,hideText:!e.showText,index:e.index,isLast:e.isLast,disabled:e.disabled,searchResult:e.searchResult,serviceType:e.serviceType})},n._getRouteItemPinNode=function(e){switch(e.pinType){case"CONSTRUCTION":return n._getConstructionNode(e);case"MASSTRANSIT":return n._getMasstransitPinNode(e);case"ROUTEPOINT":return n._getWaypointPinNode(e);case"SPECIAL":return n._getSpecialRoadPinNode(e)}},n._getAlgoSteps=function(){var e=[ei,ea,es],t=n.props.activeRoute&&"masstransit"===n.props.activeRoute.type?[el,ef,ed,eu,ey,ed,em,eh,e_,eh,ey,ep,ey,ec]:[],r=[eb],o=[eC("SPEED_BUMP"),eC("RAILWAY_CROSSING"),eS,eC("TOLL_ROAD"),eC("FERRY"),eC("FORD_CROSSING"),eE,ew,eC("BORDER_CROSSING"),eR];return(0,u._)(e).concat((0,u._)(t),(0,u._)(r),(0,u._)(o))},n._filterPinsByZoom=function(e,t){return e.filter(function(e){return!("SPECIAL"===e.pinType&&"SPEED_BUMP"===e.type&&t<12)})},n.state={pins:[]},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){(this.props.activeRoute!==e.activeRoute||this.props.routePoints!==e.routePoints)&&this._updatePins()},n.componentDidMount=function(){this._updatePins()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(k,{unprocessedPins:this.state.pins,getNodeByPin:this._getRouteItemPinNode,getMapPlacemarkProps:this._getMapPlacemarkProps,algoSteps:this._getAlgoSteps(),filterPinsByZoom:this._filterPinsByZoom}),this.state.pins.filter(function(e){return e.pinType===R.ROUTEPOINT}).map(function(e){var t,n=e.uri||(null==(t=e.searchResult)?void 0:t.uri);return n?i.createElement(z.Z,{key:n,uri:n}):null}))},t}(i.Component);function eL(e){var t=s.Sk(e);return en.Sm(t)}function eA(e,t,n,r){var o=s.Sk(e);return{iconType:o.type,color:eL(e),transportSystemId:o.transportSystemId,text:"underground"===o.type&&o.shortName?o.shortName:o.contour?o.contour.name:en.AC(o.type)?en.TX(o.type,r):o.name,initialCoordinates:t,initialText:null==n?void 0:n.name,stopId:null==n?void 0:n.id}}let eN=(0,a.ZP)(eD);var ez=n(1260),eU=n(9599),eF=n(2267),eO=n(5877),eq=n.n(eO),eB=n(7809),eH=n(9870),eW=n(3410);let eG=(0,eB.Z)(eW.Z,(0,w.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=eq().v4(),t.map.addGroup(n._dataSourceId,n._id,t.style,t.parentGroupId),n}(0,o._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.map.removeGroupAndChildren(this._dataSourceId,this._id)},n.render=function(){return i.createElement(eW.Q,{value:{parentGroupId:this._id}},this.props.children)},(0,eF._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||eH.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent));var ej={main:4,underlay:8,dash:[5,10]},eV=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getStrokeStyleByType=function(e){return{simplifyPalette:!1,width:ej.main,dash:ej.dash,opacity:"undergroundWalk"===e?.5:1,palette:t.props.activeRoute.colorizeInfo.map(function(t){var n=t.type,r=t.count;return{color:n===e?"binding"===n?s.uC:"#6000ff":eU.L,count:r}})}},t._getActiveStyle=function(){return[t._getStrokeStyleByType("undergroundWalk"),t._getStrokeStyleByType("walk"),t._getStrokeStyleByType("binding"),{width:ej.underlay,color:"#fff"}]},t._getInactiveStyle=function(){return[{width:ej.main,color:"#6d6d6d"},{width:ej.underlay,color:"#fff"}]},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},i.createElement(ez.Z,{key:t.activeRoute.uuid,dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:this._getActiveStyle(),cursor:"default",zIndex:10},geometry:s.d(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?t.inactiveRoutes.map(function(n){return i.createElement(ez.Z,{key:n.uuid,dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:e._getInactiveStyle(),cursor:"pointer"},geometry:s.d(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})}):null)},t}(i.Component),eY=n(4238),eX=n(5055),eK=n.n(eX),e$=n(8286),eJ=n.n(e$),eQ=n(9500),e0=n.n(eQ),e1=n(8755),e2=n.n(e1),e3=n(6176),e4=n.n(e3),e6=n(2621),e7=n.n(e6),e8=n(264),e5=n.n(e8),e9=n(4609),te=n.n(e9),tt=n(211),tn=n.n(tt),tr=n(5642),to=n.n(tr),ti=n(5111),ta=n.n(ti),ts=n(5551),tl=n.n(ts),tc=n(6057),tu=n.n(tc),td=n(8776),tp=n.n(td),tm=n(8704),tf=n.n(tm),th=n(728),tv=n.n(th),tg=n(1512),t_=n.n(tg),ty=n(2501),tb=n.n(ty),tE=n(9627),tw=n.n(tE),tS=n(7204),tC=n.n(tS),tR={start:[eK()],middle:["",eJ(),e0(),e2(),e4(),e7(),e5(),te(),tn(),to()].concat(Array(40).fill(tC())),finish:["",ta(),tl(),tu(),tp(),tf(),tv(),t_(),tb(),tw()].concat(Array(40).fill(tw()))};let tP=(0,a.ZP)(function(e){var t,n,r,o;return e.cursor?i.createElement(eY.Z,{src:(t=e.cursor,r=(n=(0,F._)(t.split("_"),2))[0],o=n[1],tR[r][Number(o)]),basePoint:[32,44]}):null});var tk="#737ce6",tx={stroke:[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],cursor:"pointer"},tI=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getBicycleActiveDrawingStyle=function(){var e=t.props.mapLocation.zoom>=17,n={width:s.Qt(t.props.mapLocation.zoom).main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(t){return{count:t.count,color:["PEDESTRIAN","PEDESTRIAN_UNDERGROUND"].includes(t.type)&&e||"BINDING"===t.type?eU.L:"AUTO"===t.type?tk:"#54b235"}})},r={width:4,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BINDING"===e.type?s.uC:eU.L}}),dash:[5,10]},o={width:e?4:0,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN"===e.type?tk:eU.L}}),dash:[5,10]},i={width:e?4:0,opacity:.5,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"PEDESTRIAN_UNDERGROUND"===e.type?tk:eU.L}}),dash:[5,10]};return{stroke:[{width:1.5,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map(function(e){return{count:e.count,color:"BICYCLE"===e.type?"#fff":eU.L}}),dash:[2,4]},n,r,o,i,{width:s.Qt(t.props.mapLocation.zoom).underlay,color:"#fff"}],cursor:"default",zIndex:10}},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(ez.Z,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getBicycleActiveDrawingStyle(),geometry:s.d(e.activeRoute),onFastClick:function(t,n){return e.onRouteClick(e.activeRoute,n.coordinates)}}),e.inactiveRoutes?i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},e.inactiveRoutes.map(function(t){return i.createElement(ez.Z,{key:t.uuid,dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:tx,geometry:s.d(t),onFastClick:function(n,r){return e.onRouteClick(t,r.coordinates)}})})):null)},t}(i.Component),tM=n(4953),tT=n(2965),tZ=n(5087),tD=n(2690),tL=n(9029),tA=n(5645),tN=(0,d.Z)("mrc-map-icon-view");let tz=(0,tA.Z)(function(e){return i.createElement(E.Z,{disableRoundCoordinates:!0,coordinates:e.coordinates,nonInteractive:!e.onClick,zIndex:e.zIndex,onClick:e.onClick},i.createElement("div",{className:tN({type:e.type||"main"}),style:{transform:"rotate("+(e.direction?e.direction:0)+"deg)"},ref:e.forwardedRef?e.forwardedRef:null}))});var tU=n(6969),tF=n(3340),tO=(0,d.Z)("mrc-preview-balloon"),tq={main:20,side:20},tB=function(e){function t(t){var n;return(n=e.call(this,t)||this)._image=i.createRef(),n._onLoad=function(){n.setState({isPreviewLoaded:!0})},n._renderSpinner=function(){var e;return n.state.isPreviewLoaded||(null==(e=n._image.current)?void 0:e.complete)?null:i.createElement("div",{className:tO("placeholder")},i.createElement("div",{className:tO("spinner")},i.createElement(tU.Z,{view:"large"})))},n.state={isPreviewLoaded:!1},n}return(0,o._)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(tM.ZP,{name:"preview_balloon"},i.createElement("div",{ref:e.forwardedRef,className:tO()},i.createElement(tF.Z,{type:"transparent",coordinates:e.coordinates,position:"bottom-right",offset:tq,onClose:function(){},showArrow:!1,isShown:!0},i.createElement("div",{className:tO("balloon")},this._renderSpinner(),i.createElement("img",{ref:this._image,className:tO("image",{loaded:this.state.isPreviewLoaded}),src:e.image.url,onLoad:this._onLoad})))))},t}(i.Component);let tH=(0,tA.Z)(tB);var tW=n(8216),tG=n(3705);let tj=(0,n(427).Z)(function(){return n.e("mrc").then(n.bind(n,3244))},{restorePlayerFromRoutes:!0,openPlayer:!0,closePlayer:!0,openSimilar:!0,closeSimilar:!0,changePathIndex:!0,fetchSimilar:!0,enableLayer:!0,disableLayer:!0,play:!0,pause:!0,setGraphType:!0,replaceChunkFeatures:!0,updatePhotoCache:!0});var tV=function(){function e(){this._queue=[],this._isPending=!1}var t=e.prototype;return t._runNext=function(){var e=this;if(!this._isPending){var t=this._queue[this._queue.length-1];t&&(this._isPending=!0,t.runFn().finally(function(){e._isPending=!1,e._queue=e._queue.filter(function(e){return e.runFn!==t.runFn}),e._runNext()}))}},t.add=function(e,t){var n=this,r=!1;return{promise:new Promise(function(o,i){n._queue.push({runFn:function(){return r?Promise.resolve().then(i):e().then(o).catch(i)},meta:t}),n._runNext()}),abort:function(){r=!0}}},t.has=function(e){return!!this._queue.find(function(t){return e(t.meta)})},e}(),tY=new tV,tX=new tV;let tK=function(e){var t,n,r,o;return t=(0,a.ZR)(),n=tW.I0(),i.useEffect(function(){var r=e.feature.chunkId;if(!(!r||tY.has(function(e){return e===r}))){var o=tY.add(function(){return tG.CA({chunkId:r},t)},r);return o.promise.then(function(e){e&&n(tj.replaceChunkFeatures(r,e))}).catch(function(){}),function(){o.abort()}}},[]),r=(0,a.ZR)(),o=tW.I0(),i.useEffect(function(){if(!(e.feature.chunkId||e.feature.photo||tX.has(function(t){return t.includes(e.feature.photoId)}))){var t=function(e,t){for(var n=[],r=0;n.length<200;){var o=e-r,i=e+(r||1),a=t.features[o],s=t.features[i];if(!a||a.photo||a.chunkId||n.push(a.photoId),!s||s.photo||s.chunkId||n.push(s.photoId),o<=0&&i>=t.features.length-1)break;r++}return n}(e.featureCollection.features.findIndex(function(t){return t.photoId===e.feature.photoId}),e.featureCollection),n=tX.add(function(){return tG.n(t,r)},t);return n.promise.then(function(e){e&&e.length>0&&o(tj.updatePhotoCache(e))}).catch(function(){}),function(){n.abort()}}},[]),null};var t$=n(2276),tJ=function(e){function t(t){var n;return(n=e.call(this,t)||this)._leaveTimer=0,n._getNearestFeature=function(e){var t=n.props,r=(0,tZ.Z)(t.featureCollection.features,function(t){var r=t$.Fg(t,n.props.featureCollection);return(0,tD.g)(r,e)});if(!r||r.photoId!==t.selectedFeatureId)return r},n._onClick=function(){var e=n.state.currentFeature;e&&n.props.onClick&&n.props.onClick(e.photoId),n.setState({currentFeature:null})},n._onMouseMove=function(e,t){var r=t.coordinates,o=(0,tL.x)(n.props.featureCollection.features.map(function(e){return t$.Fg(e,n.props.featureCollection)}),r,n.props.lineWidth,n.props.zoom);if(o&&!("point"in o)){var i=n._getNearestFeature(o);n.setState({currentFeature:i||null})}},n._onMouseEnter=function(){window.clearTimeout(n._leaveTimer)},n._onMouseLeave=function(){n._leaveTimer=window.setTimeout(function(){n.setState({currentFeature:null})},200)},n._renderPreview=function(){var e=n.state;if(!e.currentFeature)return null;if(!e.currentFeature.photo)return i.createElement(tK,{key:e.currentFeature.photoId,feature:e.currentFeature,featureCollection:n.props.featureCollection});var t=t$.Fg(e.currentFeature,n.props.featureCollection);return"placemark"===n.props.preview?i.createElement(tz,{coordinates:t,direction:e.currentFeature.photo.heading,type:"additional"}):i.createElement(tH,{coordinates:t,image:e.currentFeature.photo.imagePreview})},n.state={currentFeature:null},n._onMouseMove=(0,C.Z)(n._onMouseMove,16),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;if(this.props.featureCollection.features!==e.featureCollection.features&&this.state.currentFeature){var n=t$.Fg(this.state.currentFeature,this.props.featureCollection),r=this.props.featureCollection.features.find(function(e){var n;return(null==(n=t.state.currentFeature)?void 0:n.photoId)===e.photoId})||this._getNearestFeature(n)||null;this.setState({currentFeature:r})}},n.componentWillUnmount=function(){window.clearTimeout(this._leaveTimer)},n.render=function(){var e=this.props;return i.createElement(i.Fragment,null,e.children({onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick}),this._renderPreview())},t}(i.Component),tQ=n(4960),t0=(0,d.Z)("map-routes-auto-view"),t1=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getPoints=function(){var e=n.props;return e.activeRoute.refPointsLineCoordinates.map(function(t,r){return n.state.editingIndex===r?e.routePoints[r].coords:t})},n._getPointsWithVia=function(){return{points:n.props.routePoints.map(function(e){return e.coords}),isViaPoints:n.props.routePoints.map(function(e,t){return n.props.viaIndexes.includes(t)})}},n._getViaIndexesFromRefsWithVia=function(e){return e.map(function(e,t){return e?t:0}).filter(Boolean)},n._removeViaPoint=function(e){if(n.props.onRoutePointsChange){var t=n._getPointsWithVia(),r=t.points,o=t.isViaPoints;r.splice(e,1),o.splice(e,1),n.props.onRoutePointsChange(r,{viaIndexes:n._getViaIndexesFromRefsWithVia(o),isRough:!1})}},n._addViaPoint=function(e,t){if(n.props.onRoutePointsChange){var r=n._getPointsWithVia(),o=r.points,i=r.isViaPoints;o.splice(t,0,e),i.splice(t,0,!0),n.props.setDragging(!0),n.props.onRoutePointsChange(o,{viaIndexes:n._getViaIndexesFromRefsWithVia(i),isRough:!1})}},n._updateViaPoint=function(e,t,r){if(n.props.onRoutePointsChange){var o=n.props.routePoints.slice().map(function(e){return e.coords});o.splice(t,1,e),n.setState({editingIndex:r?t:void 0}),n.props.onRoutePointsChange(o,{viaIndexes:n.props.viaIndexes,isRough:r})}},n._getActiveRouteStrokeStyles=function(){var e=n.props;return s.TI({route:e.activeRoute,isDefaultColor:e.isDefaultColor},e.config)},n._onPointUpdate=function(e,t,r){n._updateViaPoint(e,t,!r),n.props.setDragging(!r)},n._onMapUpdate=function(){n.setState({mapAzimuth:n.props.map.azimuth})},n._renderPointElement=function(e){return n.props.activeRoute.refPointsLineCoordinates.reduce(function(e,t,r){return n.props.viaIndexes.includes(r)?e:e.concat(r)},[]).includes(e)?null:i.createElement("div",{className:t0("via-point")})},n._renderActiveRoute=function(e){var t=n.props,o=n._getActiveRouteStrokeStyles().underlayStyle.width,a=e?{onLineMouseEnter:e.onMouseEnter,onLineMouseMove:e.onMouseMove,onLineMouseLeave:e.onMouseLeave,onPreviewPointMouseLeave:e.onMouseLeave}:{};return i.createElement(tT.Z,(0,r._)({lineStyle:{stroke:[{width:o,opacity:0}],zIndex:12},polyLineCoordinates:t.activeRoute.coordinates||[],points:n._getPoints(),renderPointElement:n._renderPointElement,previewPointElement:i.createElement("div",{className:t0("via-point",{preview:!0})}),isActive:t.isEditorActive,onPointAdd:n._addViaPoint,onPointUpdate:n._onPointUpdate,onPointRemove:n._removeViaPoint,onPreviewPointClick:function(r,o){o&&n.props.onRouteClick(t.activeRoute,o.coordinates),null==e||e.onClick()}},a))},n._renderActiveMrcFeature=function(){var e=n.props;if(e.isMrcPlayerHidden||e.isLoading||"comparison"===e.travelMode||e.feedback&&"route/edit/better"===e.feedback.type||!e.mrcFeatureCollection||!e.activeMrcIndex&&0!==e.activeMrcIndex||e.isRoutePointDragging||!e.isMrcPlaying&&0===e.activeMrcIndex)return null;var t=e.mrcFeatureCollection.features[e.activeMrcIndex];if(!t.photo)return null;var r=t$.Fg(t,e.mrcFeatureCollection);return i.createElement(i.Fragment,null,i.createElement(tz,{coordinates:r,direction:t.photo.heading+(0,tQ.Z)(n.state.mapAzimuth)}),i.createElement(c.Z,{onUpdate:n._onMapUpdate}))},n.state={mapAzimuth:t.map.azimuth},n}return(0,o._)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=this._getActiveRouteStrokeStyles().underlayStyle.width,o=(null==(e=n.feedback)?void 0:e.type)!=="route/edit/better"&&!n.config.uatraits.isMobile&&"comparison"!==n.travelMode;return i.createElement(i.Fragment,null,o?i.createElement(tM.ZP,{name:"mrc_route_thread",logClick:!0},i.createElement(tJ,{featureCollection:n.mrcFeatureCollection||t$.qT([],[]),lineWidth:r,zoom:n.zoom,onClick:n.onMrcClick,preview:"balloon"},this._renderActiveRoute)):this._renderActiveRoute(),i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.7}},i.createElement(ez.Z,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:s.X2({route:n.activeRoute,isActive:!0,isDefaultColor:n.isDefaultColor},n.config),geometry:s.d(n.activeRoute)}),n.inactiveRoutes?i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.86}},n.inactiveRoutes.map(function(e){return i.createElement(ez.Z,{key:e.uuid,dataSourceId:eH.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:s.X2({route:e,isActive:!1,isDefaultColor:n.isDefaultColor},n.config),geometry:s.d(e),onFastClick:function(n,r){return t.props.onRouteClick(e,r.coordinates)}})})):null),n.config.uatraits.isMobile?null:this._renderActiveMrcFeature())},t}(i.Component);let t2=(0,w.ZP)({shouldWait:!0})((0,a.ZP)(t1));var t3=[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],t4={main:4,dash:[5,10]},t6="#9d64fb",t7=(0,d.Z)("map-routes-masstransit-view"),t8=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getStopPlacemarksData=function(){return t.props.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments.reduce(function(e,t){if(!t.stops)return e;var n=t.stops.reduce(function(e,t){return t.coordinateOnRoute?e.concat([t.coordinateOnRoute]):e},[]);return n.shift(),e.concat({color:t.transports?t5(t.transports):void 0,coordinates:n})},[]))},[])},t._getColorForTransport=function(e){var n=t.props,r=e.type,o=e.segmentIndex;if(["walk","transfer","undergroundWalk","binding"].includes(r))return eU.L;var i=n.activeRoute.paths.reduce(function(e,t){return e.concat(t.segments)},[]);return o&&i[o]&&i[o].transports?t5(i[o].transports):en.Lq(r)},t._getActiveDrawingStyle=function(){var e=t.props;return{cursor:"default",zIndex:10,stroke:[{simplifyPalette:!1,width:s.Qt(e.mapLocation.zoom).main,palette:e.activeRoute.colorizeInfo.map(function(e){return{color:t._getColorForTransport(e),count:e.count}})},{simplifyPalette:!1,width:t4.main,dash:t4.dash,opacity:.5,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:["undergroundWalk","transfer"].includes(t)?t6:eU.L,count:n}})},{simplifyPalette:!1,width:t4.main,dash:t4.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"walk"===t?t6:eU.L,count:n}})},{simplifyPalette:!1,width:t4.main,dash:t4.dash,palette:e.activeRoute.colorizeInfo.map(function(e){var t=e.type,n=e.count;return{color:"binding"===t?s.uC:eU.L,count:n}})},{width:s.Qt(e.mapLocation.zoom).underlay,opacity:.9,color:"#fff"}]}},t._renderStopDots=function(){return t.props.mapLocation.zoom<14?null:t._getStopPlacemarksData().map(function(e,t){return e.coordinates.map(function(n,r){return i.createElement(E.Z,{key:t+"_"+r,coordinates:n,zIndex:N.I.default},i.createElement("div",{className:t7("stop-dot"),style:{borderColor:e.color}}))})})},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(i.Fragment,null,i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS,style:{opacity:1}},i.createElement(ez.Z,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS,drawingStyle:this._getActiveDrawingStyle(),geometry:s.d(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(eG,{dataSourceId:eH.UZ.DEFAULT_GRAPHICS,style:{opacity:.6}},t.inactiveRoutes.map(function(t){return i.createElement(ez.Z,{key:t.uuid,dataSourceId:eH.UZ.DEFAULT_GRAPHICS,drawingStyle:{cursor:"pointer",stroke:t3},geometry:s.d(t),onFastClick:function(n,r){return e.props.onRouteClick(t,r.coordinates)}})})):null),this._renderStopDots())},t}(i.Component);function t5(e){var t=s.Sk(e);return en.Sm(t)}let t9=(0,a.ZP)(t8);var ne=n(3085),nt=(0,d.Z)("route-warning-icon-view"),nn={barrier:"snippet-barrier-20",blocked:"snippet-closed-20",ferries:"snippet-ferry-20",ford:"snippet-ford-crossing-20",general:"snippet-all-20","rugged-road":"snippet-bad-road-20",tolls:"snippet-paid-fallback-20",frontier:"snippet-border-20","railway-crossing":"snippet-railway-crossing-20-flip"};let nr=function(e){return i.createElement("div",{className:nt("wrapper",{text:!!e.text,type:e.type})},i.createElement(U.Z,{name:nn[e.type],className:nt({type:e.type}),inline:!0}),i.createElement("div",{className:nt("text")},e.text))};var no=n(7575),ni={pedestrian:"pedestrian-24-flip",bicycle:"bikes-24-flip",auto:"car-24",masstransit:"bus-24"},na=(0,d.Z)("map-widget-routes-content-view"),ns=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n._renderContent=function(){switch(this.props.route.type){case"bicycle":case"pedestrian":case"masstransit":var e=s.K$(this.props.route.duration,this.props.config);return this._renderContentCommon(e,this.props.route.distance.text);case"auto":return this._renderContentAuto();default:return null}},n._renderRouteWarning=function(e){if("auto"===e.type){if(e.flags.blocked)return i.createElement(nr,{type:"blocked"});if(e.flags.hasTolls)return i.createElement(nr,{type:"tolls"})}return null},n._renderContentCommon=function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:na("header")},i.createElement(U.Z,{name:ni[this.props.route.type],inline:!0,className:na("icon")}),e,i.createElement("div",{className:na("warning")},this._renderRouteWarning(this.props.route))),i.createElement("div",{className:na("body")},t))},n._renderContentAuto=function(){var e,t=this.props;if("auto"!==t.route.type)return null;var n=(e={duration:s.K$(t.route.duration,t.config),distance:t.route.distance.text}).distance+", без пробок: "+e.duration,r=s.K$(t.route.durationInTraffic,t.config),o=t.route.flags.blocked?"Проезд закрыт":r;return this._renderContentCommon(o,n)},n.render=function(){var e=no.md(this.props.config);return i.createElement("div",{className:na()},this._renderContent(),e?null:i.createElement(ne.Z,{view:"secondary-blue",size:"small",url:this.props.url,target:"_blank",isStretched:!0},"Подробнее"))},t}(i.Component);let nl=(0,a.ZP)(ns);var nc=n(6076),nu=n(3647),nd=n(3688),np=n(5692),nm=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._lastChangedPointIndex=0,t._checkAndChangeBounds=function(){if((!t.props.routerResponse||0!==t.props.routerResponse.routes.length)&&(null==(e=t.props.config.mapWidget)?void 0:e.activeMode)==="routes"){var e,n,r,o=(null==(n=t.props.routerResponse)?void 0:n.routes[t.props.activeRouteIndex])||(null==(r=t.props.routerResponse)?void 0:r.routes[0]),i=null==o?void 0:o.bounds,a=t.props.routePoints.filter(function(e){return!!e.coords});if(0!==a.length){var s=a?l.o(a.map(function(e){return e.coords})):void 0,c=i||s;c&&t.props.onBoundsChange(c)}}},t._onRoutePointsChange=function(e){var n=t.props.routePoints.findIndex(function(t){return!!t.coords&&!e.includes(t.coords)});-1===n&&(n=e[t._lastChangedPointIndex]?t._lastChangedPointIndex:e.length-1),t._lastChangedPointIndex=n,t.props.updateRoutePoint({coords:e[n],value:""},n)},t._onMapClick=function(e,n){var r={coords:n.coordinates,value:"",input:""};t.props.updateRoutePoint(r,t.props.emptyPointIndex)},t._renderContent=function(){if(!t.props.content||!t.props.routerResponse||t.props.isRoutePointDragging)return null;var e,n,o=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0];if(!o)return null;var a=t.props.content.data.coordinates||(null==(n=o.coordinates)?void 0:n[Math.floor((null==(e=o.coordinates)?void 0:e.length)/2)]);if(!a)return null;var l=s.DP({routePoints:t.props.routePoints,viaIndexes:t.props.routerResponse.viaIndexes||[],travelMode:t.props.routerResponse.type,activeRouteIndex:t.props.activeRouteIndex,routerResponse:null,detailedIndex:-1,settings:{auto:{ignoreTrafficJams:np.a(t.props.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},t.props.config),c={l:t.props.isTrafficLayerEnabled?t.props.config.query.l||"trf":void 0},u=(0,nd._)(nu.e_(nu.sY("",(0,r._)({},l,c,{routes:{avoidTypes:void 0}})),t.props.config));return i.createElement(nc.Z,{coordinates:a,displayType:"balloon",mapLocation:t.props.mapLocation,onClose:t.props.resetContentData,offset:{main:3,side:3},mapSize:t.props.mapSize,key:o.uuid},i.createElement(nl,{route:o,url:u}))},t._renderRouteView=function(){if(!t.props.routerResponse||0===t.props.routerResponse.routes.length)return null;var e=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0],n=t.props.routerResponse.routes.filter(function(t){return t.uuid!==e.uuid});switch(e.type){case"pedestrian":return i.createElement(eV,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick});case"bicycle":return i.createElement(tI,{activeRoute:e,inactiveRoutes:n,mapLocation:t.props.mapLocation,onRouteClick:t.props.onRouteClick});case"auto":return i.createElement(t2,{activeRoute:e,inactiveRoutes:n,viaIndexes:t.props.routerResponse.viaIndexes||[],routePoints:t.props.routePoints,zoom:t.props.mapLocation.zoom,feedback:null,isDefaultColor:!!t.props.isTrafficLayerEnabled||(e.colorizeInfo||[]).every(function(e){return"UNKNOWN"===e.type}),isLoading:!1,isEditorActive:!1,setDragging:nf,onRouteClick:t.props.onRouteClick});case"masstransit":return i.createElement(t9,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick,mapLocation:t.props.mapLocation});default:return null}},t._renderRoutePinsView=function(){var e,n,r,o=(null==(e=t.props.routerResponse)?void 0:e.routes[t.props.activeRouteIndex])||(null==(n=t.props.routerResponse)?void 0:n.routes[0])||null;return i.createElement(eN,{activeRoute:o,travelMode:null==o?void 0:o.type,routePoints:t.props.routePoints,viaIndexes:(null==(r=t.props.routerResponse)?void 0:r.viaIndexes)||[],draggable:!0,isRoutePointDragging:t.props.isRoutePointDragging,draggableIndexes:t.props.draggablePointIndexes,setDragging:t.props.setDragging,onRoutePointsChange:t._onRoutePointsChange})},t._renderRouteCursor=function(){return t.props.cursor?i.createElement(tP,{cursor:t.props.cursor}):null},t._renderMapListener=function(){return -1===t.props.emptyPointIndex?null:i.createElement(c.Z,{onClick:t._onMapClick})},t}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkAndChangeBounds()},n.componentDidUpdate=function(e){!e.routerResponse&&this.props.routerResponse&&this._checkAndChangeBounds()},n.render=function(){return i.createElement(i.Fragment,null,this._renderRouteView(),this._renderRoutePinsView(),this._renderRouteCursor(),this._renderMapListener(),this._renderContent())},t}(i.Component);function nf(){}let nh=(0,a.ZP)(nm)},5348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var r=n(8007),o=n(7363),i=n(4788),a=n(1640),s=n(1912);function l(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function c(e,t,n){void 0===n&&(n={});for(var r=0;r<e.length;r++){var o=e[r];if(o.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw Error("First and last Position are not equivalent.")}return l({type:"Polygon",coordinates:e},t,n)}function u(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function d(e,t){var n,r,o,i,a,s,l,c,u,d,p=0,m="FeatureCollection"===e.type,f="Feature"===e.type,h=m?e.features.length:1;for(n=0;n<h;n++){for(o=0,s=m?e.features[n].geometry:f?e.geometry:e,c=m?e.features[n].properties:f?e.properties:{},u=m?e.features[n].bbox:f?e.bbox:void 0,d=m?e.features[n].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1;o<a;o++){if(null===(i=l?s.geometries[o]:s)){if(!1===t(null,p,c,u,d))return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,c,u,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],p,c,u,d))return!1;break;default:throw Error("Unknown Geometry Type")}}p++}}function p(e){var t,n;return t=function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return m(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=m(e.coordinates[t]);return n}return 0}(t)},n=0,d(e,function(e,r,o,i,a){n=t(n,e,r,o,i,a)}),n}function m(e){var t=0;if(e&&e.length>0){t+=Math.abs(f(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(f(e[n]))}return t}function f(e){var t,n,r,o,i,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,o=l-1,i=0):a===l-1?(r=l-1,o=0,i=1):(r=a,o=a+1,i=a+2),t=e[r],n=e[o],s+=(h(e[i][0])-h(t[0]))*Math.sin(h(n[1]));s=40680631590769*s/2}return s}function h(e){return e*Math.PI/180}var v=n(5510);function g(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var a=t[o][0],s=t[o][1],l=t[i][0],c=t[i][1];if(e[1]*(a-l)+s*(l-e[0])+c*(e[0]-a)==0&&(a-e[0])*(l-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!n;s>e[1]!=c>e[1]&&e[0]<(l-a)*(e[1]-s)/(c-s)+a&&(r=!r)}return r}function _(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!_(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}var y=function(e,t,n,r,o){this.coord=e,this.param=t,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=o},b=function(e,t,n,r,o,i,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=o,this.ringAndEdge1Walkable=i,this.ringAndEdge2Walkable=a};function E(e,t){if(void 0===t&&(t=!0),3!=e.length)throw Error("This function requires an array of three points [x,y]");return(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])>=0==t}function w(e,t){if(!e||!t||e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!w(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}let S=function(e){var t,n=[];return t=function(e){"Polygon"===e.geometry.type&&function(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}(function(e){if("Feature"!=e.type)throw Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,n=[],r=0;r<t;r++){var o=e.geometry.coordinates[r];w(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(e){for(var t={},n=1,r=0,o=e.length;r<o;++r){if(Object.prototype.hasOwnProperty.call(t,e[r])){n=0;break}t[e[r]]=1}return n}(n))throw Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=n.length,a=function(e,t,n){if("Polygon"!==e.geometry.type)throw Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=e.geometry.coordinates,o=[],i={};if(n){for(var a=[],s=0;s<r.length;s++)for(var l=0;l<r[s].length-1;l++)a.push(h(s,l));var c=v();c.load(a)}for(var u=0;u<r.length;u++)for(var d=0;d<r[u].length-1;d++)if(n)c.search(h(u,d)).forEach(function(e){var t=e.ring,n=e.edge;f(u,d,t,n)});else for(var p=0;p<r.length;p++)for(var m=0;m<r[p].length-1;m++)f(u,d,p,m);return t||(o={type:"Feature",geometry:{type:"MultiPoint",coordinates:o}}),o;function f(e,n,a,s){var l,c,u=r[e][n],d=r[e][n+1],p=r[a][s],m=r[a][s+1],f=function(e,t,n,r){if(_(e,n)||_(e,r)||_(t,n)||_(r,n))return null;var o=e[0],i=e[1],a=t[0],s=t[1],l=n[0],c=n[1],u=r[0],d=r[1],p=(o-a)*(c-d)-(i-s)*(l-u);return 0===p?null:[((o*s-i*a)*(l-u)-(o-a)*(l*d-c*u))/p,((o*s-i*a)*(c-d)-(i-s)*(l*d-c*u))/p]}(u,d,p,m);if(null!==f&&(l=d[0]!==u[0]?(f[0]-u[0])/(d[0]-u[0]):(f[1]-u[1])/(d[1]-u[1]),c=m[0]!==p[0]?(f[0]-p[0])/(m[0]-p[0]):(f[1]-p[1])/(m[1]-p[1]),!(l>=1)&&!(l<=0)&&!(c>=1)&&!(c<=0))){var h=!i[f];h&&(i[f]=!0),t?o.push(t(f,e,n,u,d,l,a,s,p,m,c,h)):o.push(f)}}function h(e,t){var n,o,i,a,s=r[e][t],l=r[e][t+1];return s[0]<l[0]?(n=s[0],o=l[0]):(n=l[0],o=s[0]),s[1]<l[1]?(i=s[1],a=l[1]):(i=l[1],a=s[1]),{minX:n,minY:i,maxX:o,maxY:a,ring:e,edge:t}}}(e,function(e,t,n,r,o,i,a,s,l,c,u,d){return[e,t,n,r,o,i,a,s,l,c,u,d]}),s=a.length;if(0==s){for(var l=[],r=0;r<t;r++)l.push(c([e.geometry.coordinates[r]],{parent:-1,winding:function(e){for(var t,n,r=0,o=0;o<e.length-1;o++)e[o][0]<e[r][0]&&(r=o);if(E([e[((r-1)%(t=e.length-1)+t)%t],e[r],e[((r+1)%(n=e.length-1)+n)%n]],!0))var i=1;else var i=-1;return i}(e.geometry.coordinates[r])}));var d=u(l);return K(),$(),d}for(var m=[],f=[],r=0;r<t;r++){m.push([]);for(var h,S,C,R=0;R<e.geometry.coordinates[r].length-1;R++)m[r].push([new y(e.geometry.coordinates[r][((R+1)%(h=e.geometry.coordinates[r].length-1)+h)%h],1,[r,R],[r,((R+1)%(S=e.geometry.coordinates[r].length-1)+S)%S],void 0)]),f.push(new b(e.geometry.coordinates[r][R],[r,((R-1)%(C=e.geometry.coordinates[r].length-1)+C)%C],[r,R],void 0,void 0,!1,!0))}for(var r=0;r<s;r++)m[a[r][1]][a[r][2]].push(new y(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new b(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));for(var P=f.length,r=0;r<m.length;r++)for(var R=0;R<m[r].length;R++)m[r][R].sort(function(e,t){return e.param<t.param?-1:1});for(var k=[],r=0;r<P;r++)k.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var x=v();x.load(k);for(var r=0;r<m.length;r++)for(var R=0;R<m[r].length;R++)for(var I=0;I<m[r][R].length;I++){T=I==m[r][R].length-1?m[r][((R+1)%(M=e.geometry.coordinates[r].length-1)+M)%M][0].coord:m[r][R][I+1].coord;var M,T,Z=x.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0];m[r][R][I].nxtIsectAlongEdgeIn=Z.index}for(var r=0;r<m.length;r++)for(var R=0;R<m[r].length;R++)for(var I=0;I<m[r][R].length;I++){var T=m[r][R][I].coord,Z=x.search({minX:T[0],minY:T[1],maxX:T[0],maxY:T[1]})[0],D=Z.index;D<i?f[D].nxtIsectAlongRingAndEdge2=m[r][R][I].nxtIsectAlongEdgeIn:w(f[D].ringAndEdge1,m[r][R][I].ringAndEdgeIn)?f[D].nxtIsectAlongRingAndEdge1=m[r][R][I].nxtIsectAlongEdgeIn:f[D].nxtIsectAlongRingAndEdge2=m[r][R][I].nxtIsectAlongEdgeIn}for(var L=[],r=0,R=0;R<t;R++){for(var A=r,I=0;I<e.geometry.coordinates[R].length-1;I++)f[r].coord[0]<f[A].coord[0]&&(A=r),r++;for(var N=f[A].nxtIsectAlongRingAndEdge2,I=0;I<f.length;I++)if(f[I].nxtIsectAlongRingAndEdge1==A||f[I].nxtIsectAlongRingAndEdge2==A){var z=I;break}var U=E([f[z].coord,f[A].coord,f[N].coord],!0)?1:-1;L.push({isect:A,parent:-1,winding:U})}L.sort(function(e,t){return f[e.isect].coord>f[t.isect].coord?-1:1});for(var l=[];L.length>0;){var F=L.pop(),O=F.isect,q=F.parent,B=F.winding,H=l.length,W=[f[O].coord],G=O;if(f[O].ringAndEdge1Walkable)var j=f[O].ringAndEdge1,V=f[O].nxtIsectAlongRingAndEdge1;else var j=f[O].ringAndEdge2,V=f[O].nxtIsectAlongRingAndEdge2;for(;!w(f[O].coord,f[V].coord);){W.push(f[V].coord);for(var Y=void 0,r=0;r<L.length;r++)if(L[r].isect==V){Y=r;break}if(void 0!=Y&&L.splice(Y,1),w(j,f[V].ringAndEdge1)){if(j=f[V].ringAndEdge2,f[V].ringAndEdge2Walkable=!1,f[V].ringAndEdge1Walkable){var X={isect:V};E([f[G].coord,f[V].coord,f[f[V].nxtIsectAlongRingAndEdge2].coord],1==B)?(X.parent=q,X.winding=-B):(X.parent=H,X.winding=B),L.push(X)}G=V,V=f[V].nxtIsectAlongRingAndEdge2}else{if(j=f[V].ringAndEdge1,f[V].ringAndEdge1Walkable=!1,f[V].ringAndEdge2Walkable){var X={isect:V};E([f[G].coord,f[V].coord,f[f[V].nxtIsectAlongRingAndEdge1].coord],1==B)?(X.parent=q,X.winding=-B):(X.parent=H,X.winding=B),L.push(X)}G=V,V=f[V].nxtIsectAlongRingAndEdge1}}W.push(f[V].coord),l.push(c([W],{index:H,parent:q,winding:B,netWinding:void 0}))}var d=u(l);function K(){for(var e=[],t=0;t<d.features.length;t++)-1==d.features[t].properties.parent&&e.push(t);if(e.length>1)for(var t=0;t<e.length;t++){for(var n=-1,r=1/0,o=0;o<d.features.length;o++)e[t]!=o&&function(e,t,n){if(void 0===n&&(n={}),!e)throw Error("point is required");if(!t)throw Error("polygon is required");var r=function(e){if(!e)throw Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw Error("coord must be GeoJSON Point or an Array of numbers")}(e),o="Feature"===t.type?t.geometry:t,i=o.type,a=t.bbox,s=o.coordinates;if(a&&!1==(a[0]<=r[0]&&a[1]<=r[1]&&a[2]>=r[0]&&a[3]>=r[1]))return!1;"Polygon"===i&&(s=[s]);for(var l=!1,c=0;c<s.length&&!l;c++)if(g(r,s[c][0],n.ignoreBoundary)){for(var u=!1,d=1;d<s[c].length&&!u;)g(r,s[c][d],!n.ignoreBoundary)&&(u=!0),d++;u||(l=!0)}return l}(d.features[e[t]].geometry.coordinates[0][0],d.features[o],{ignoreBoundary:!0})&&p(d.features[o])<r&&(n=o);d.features[e[t]].properties.parent=n}}function $(){for(var e=0;e<d.features.length;e++)if(-1==d.features[e].properties.parent){var t=d.features[e].properties.winding;d.features[e].properties.netWinding=t,function e(t,n){for(var r=0;r<d.features.length;r++)if(d.features[r].properties.parent==t){var o=n+d.features[r].properties.winding;d.features[r].properties.netWinding=o,e(r,o)}}(e,t)}}return K(),$(),d}(e),function(t){n.push(c(t.geometry.coordinates,e.properties))})},d(e,function(e,n,r,o,i){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===t(l(e,r,{bbox:o,id:i}),n,0))return!1;return}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<e.coordinates.length;c++)if(!1===t(l({type:a,coordinates:e.coordinates[c]},r),n,c))return!1}),u(n)};var C=n(1336),R=n(1886),P=n(8447),k=n(9657),x=n(1421),I=n(8067),M=n(5569),T=n(6653),Z=n(4748),D=n(7313),L=n(3340),A=n(3085),N=n(9394),z=n(4953),U=n(1494),F=(0,Z.Z)("ruler-balloon"),O={main:10,side:0},q={"delete-points":{title:"Удалить все точки?",description:"Чтобы удалить только одну точку, нажмите на неё дважды.",confirmation:"Удалить все"},close:{title:"Выключить линейку?",description:"Вы уверены, что хотите удалить все точки и выключить линейку?",confirmation:"Выключить"}},B=function(e){function t(t){var n;return(n=e.call(this,t)||this)._clearAndDisableRuler=function(){n.props.deletePoints(),n.props.isEnabled&&(null==n.props.switchRuler||n.props.switchRuler.call(n.props))},n._openPopup=function(e){n.setState({popupType:e})},n._closePopup=function(){n.setState({popupType:null})},n._clearRuler=function(){n.props.deletePoints()},n._renderPopup=function(){var e=n.state.popupType;if(!e)return null;var t=n.props;return o.createElement(L.Z,{coordinates:t.coordinates,position:["top","bottom","left","right"],offset:O,showArrow:!1,isShown:!0},o.createElement(z.ZP,{name:"popup",nodeState:{type:e}},o.createElement("div",{className:F("popup")},o.createElement("div",{className:F("title")},q[e].title),o.createElement("div",{className:F("description")},q[e].description),o.createElement("div",{className:F("buttons")},o.createElement("div",{className:F("confirm")},o.createElement(z.ZP,{name:"confirm",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"primary",size:"small",onClick:"delete-points"===e?n._clearRuler:n._clearAndDisableRuler},q[e].confirmation))),o.createElement("div",{className:F("cancel")},o.createElement(z.ZP,{name:"cancel",logClick:!0},o.createElement(A.Z,{ariaHidden:!0,view:"secondary-blue",size:"small",onClick:n._closePopup},"Отмена")))))))},n._renderTooltip=function(){return o.createElement("div",{className:F("tooltip-wrapper")},o.createElement("div",{className:F("tooltip")},o.createElement("div",{className:F("label")},M.jq(n.props.value,n.props.measure),"quadratic"===n.props.measure?"²":null),n._renderControls()))},n._renderControls=function(){return n.props.showControls?o.createElement(z.ZP,{name:"controls"},o.createElement("div",{className:F("controls")},o.createElement(N.Z,{text:"Удалить точки",position:"bottom",size:"s",isAir:!0},o.createElement(z.ZP,{name:"remove_all_points",logClick:!0},o.createElement("div",{className:F("icon",{type:"trash"}),onClick:function(){return n._openPopup("delete-points")}},o.createElement(U.Z,{name:"trash-12",className:F("icon-icon"),inline:!0})))),n.props.isEnabled?o.createElement(N.Z,{text:"Удалить точки и закрыть",position:"bottom",size:"s",isAir:!0},o.createElement(z.ZP,{name:"turn_off_ruler",logClick:!0},o.createElement("div",{className:F("icon",{type:"close"}),onClick:function(){return n._openPopup("close")}},o.createElement(U.Z,{name:"cross-small-12",className:F("icon-inner"),inline:!0})))):null,n.props.isEnabled?o.createElement(N.Z,{text:"Завершить редактирование",position:"bottom",size:"s",isAir:!0},o.createElement(z.ZP,{name:"stop_editing",logClick:!0},o.createElement("div",{className:F("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)}},o.createElement(U.Z,{name:"done-12",className:F("icon-inner"),inline:!0})))):o.createElement(N.Z,{text:"Добавить точки",position:"bottom",size:"s",isAir:!0},o.createElement(z.ZP,{name:"start_editing",logClick:!0},o.createElement("div",{className:F("icon",{type:"stop-editing"}),onClick:function(){return null==n.props.switchRuler?void 0:n.props.switchRuler.call(n.props)}},o.createElement(U.Z,{name:"edit-12",className:F("icon-inner"),inline:!0})))))):null},n.state={popupType:null},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(T.Z,{coordinates:e.coordinates,zIndex:D.I.ruler+1,dataSourceId:e.dataSourceId,blockEvents:!0,draggable:e.draggable,cursor:e.draggable?"grab":void 0,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd},o.createElement("div",{className:F()},this.state.popupType?this._renderPopup():this._renderTooltip()))},t}(o.Component),H=n(2965),W=n(9870),G=n(2241),j=n(1260),V={stroke:[{color:"#666",width:3,opacity:.7},{color:"#fff",width:5,opacity:.7}],fillOpacity:0,simplificationRate:0,cursor:"pointer",zIndex:21},Y={stroke:[{color:"#666",width:0,opacity:0}],fill:"#666",fillOpacity:.3,simplificationRate:0,cursor:"grab",zIndex:20},X=(0,Z.Z)("ruler-view"),K=function(e){function t(t){var n;if((n=e.call(this,t)||this)._referencePointPositions=[],n._getGeometryApproximateCenter=function(e){var t=(0,R.o)(e),n=(0,P.t)(t[0],t[1]);return(0,k.S)(t[0],n.startDirection,n.distance/2).endPoint},n._calcGeodesicLine=function(e){var t=(0,a._)(e),r=t[0],o=t.slice(1);return("area"===n.props.type&&r?(0,s._)(o).concat([r]):o).reduce(function(e,t){return(0,s._)(e).concat((0,s._)((0,x.b)((0,G.g)([e.pop(),t]))))},r?[r]:[])},n._onPointAdd=function(e,t){n._updatePoints(t,e)},n._onPointUpdate=function(e,t){n._updatePoints(t,e,!0)},n._onPointRemove=function(e){n._updatePoints(e,void 0,!0)},n._calcArea=function(e){return e.length>2?function(e){var t={type:"Feature",properties:null,geometry:{type:"Polygon",coordinates:[e]}};try{var n=S(t);return p(n)}catch(r){return p(t)}}(n._calcGeodesicLine(e.map(function(e){return e.coordinates}))):0},n._updatePoints=function(e,t,r){if(n.props.onUpdate){var o=n.props.draggedPoints||n.props.points,a=o.slice(0,e);if(t&&a.push({coordinates:t,value:$(t,a[a.length-1]),showBalloon:o[e]&&o[e].showBalloon}),o.slice(e+(r?1:0)).forEach(function(e){a.push((0,i._)({},e,{value:$(e.coordinates,a[a.length-1])}))}),a.length>1){var s=n._getGeometryApproximateCenter(a.map(function(e){return e.coordinates}));s&&(n._referencePointPositions=a.map(function(e){return(0,P.t)(s,e.coordinates)}))}n.props.onUpdate(a,a)}},n._togglePointBalloon=function(e){if(n.props.onUpdate){var t=n.props.points,r=(0,i._)({},t[e],{showBalloon:!t[e].showBalloon}),o=(0,s._)(t.slice(0,e)).concat([r],(0,s._)(t.slice(e+1)));n.props.onUpdate(o)}},n._applyDragEvent=function(e){var t=n.props;if(t.onUpdate){var r=(t.draggedPoints||t.points).map(function(t,r){return(0,i._)({},t,{coordinates:(0,k.S)(e,n._referencePointPositions[r].startDirection,n._referencePointPositions[r].distance).endPoint})});t.onUpdate(t.points,r)}},n._onBalloonDrag=function(e){var t=n.props,r=t.draggedPoints||t.points,o=(0,P.t)(r[r.length-1].coordinates,e.coordinates),i=n._getGeometryApproximateCenter(r.map(function(e){return e.coordinates})),a=(0,k.S)(i,o.endDirection,o.distance).endPoint;n._applyDragEvent(a)},n._onFeatureDrag=function(e){if(n.props.onUpdate){var t=n._getGeometryApproximateCenter(e.coordinates[0]);t&&n._applyDragEvent(t)}},n._onFeatureDragStart=function(e){n.setState({isDragging:!0}),n._onFeatureDrag(e)},n._onFeatureDragEnd=function(e){n.setState({isDragging:!1}),n._onFeatureDrag(e)},n._renderBalloon=function(e,t){var r=t===n.props.points.length-1,i="area"===n.props.type;if(i&&!r||0===t||!e.showBalloon&&!r)return null;var a=i?n.state.area:e.value;return o.createElement(B,{key:t,coordinates:e.coordinates,value:a,measure:i?"quadratic":"linear",showControls:r,dataSourceId:n.props.isEnabled?W.UZ.EDITOR_MARKERS:void 0,isEnabled:n.props.isEnabled,switchRuler:n.props.switchRuler,deletePoints:n.props.deletePoints,draggable:i&&!!n.props.onUpdate,onDragStart:n._onBalloonDrag,onDragMove:n._onBalloonDrag,onDragEnd:n._onBalloonDrag})},n._renderPoint=function(){return o.createElement("div",{className:X("point")},o.createElement(U.Z,{name:"point"}))},n.state={geodesicLine:n._calcGeodesicLine(n.props.points.map(function(e){return e.coordinates})),area:n._calcArea(n.props.points),isDragging:!1},n.props.points.length>1){var r=n._getGeometryApproximateCenter(n.props.points.map(function(e){return e.coordinates}));r&&(n._referencePointPositions=n.props.points.map(function(e){return(0,P.t)(r,e.coordinates)}))}return n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){if(e.points!==this.props.points||e.type!==this.props.type||this.props.draggedPoints!==e.draggedPoints){var t=this.props.draggedPoints||this.props.points;this.setState({geodesicLine:this._calcGeodesicLine(t.map(function(e){return e.coordinates})),area:this._calcArea(t)})}},n.render=function(){var e=this.props.draggedPoints||this.props.points,t="area"===this.props.type;return o.createElement(o.Fragment,null,t?o.createElement(j.Z,{drawingStyle:(0,i._)({},Y,{cursor:this.state.isDragging?"grabbing":"grab"}),geometry:{type:"Polygon",coordinates:[this.state.geodesicLine]},draggable:!!this.props.onUpdate,onDragStart:this._onFeatureDragStart,onDragMove:this._onFeatureDrag,onDragEnd:this._onFeatureDragEnd,dataSourceId:this.props.isEnabled?W.UZ.EDITOR_GRAPHICS:W.UZ.RASTER_GRAPHICS}):null,o.createElement(H.Z,{previewPointElement:o.createElement("div",{className:X("preview-point")}),renderPointElement:this._renderPoint,polyLineCoordinates:this.state.geodesicLine,points:e.map(function(e){return e.coordinates}),lineStyle:V,isActive:!!this.props.onUpdate,onPointAdd:this._onPointAdd,onPointUpdate:this._onPointUpdate,onPointRemove:this._onPointRemove,onPointClick:this._togglePointBalloon,editorLayerOwner:this.props.isEnabled?"ruler":void 0}),e.map(this._renderBalloon))},t}(o.Component);function $(e,t){return t?t.value+(0,I.t)(e,t.coordinates):0}K.displayName="RulerComponent";let J=(0,C.ZP)(K),Q=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement(J,{type:e.ruler.type,points:e.ruler.points,isEnabled:e.ruler.isEnabled,onUpdate:function(t){return e.updateRuler({points:t})},deletePoints:function(){return e.updateRuler({points:[]})},switchRuler:function(){return e.updateRuler({isEnabled:!e.ruler.isEnabled})}})},t}(o.Component)},7439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,v:()=>l});var r=n(7363),o=n(4748),i=n(1494),a=n(3085),s=(0,o.Z)("map-widget-search-control-view"),l=s();let c=function(e){var t;return r.createElement("div",{className:s({checked:e.checked})},r.createElement(a.Z,{size:"small",view:"air-alt",checked:e.checked,icon:r.createElement(i.Z,{name:"search-24",inline:!0,className:s("icon")}),onClick:e.onClick},(t={count:e.resultsCount}).count+" "+(t.count%10==1&&t.count%100!=11?"найден":"найдено")))}},3369:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,x:()=>s});var r=n(4788),o=n(7363),i=n(829),a=n(1111),s={advert:void 0,brandingId:void 0};let l=function(e){var t,n=1===e.results.resultsCount?e.results.items[0]:void 0,l=e.results.exactResult||n;return o.createElement(o.Fragment,null,!l||(null==(t=e.hiddenResults)?void 0:t.find(function(e){return e.id===l.id}))?null:o.createElement(o.Fragment,null,o.createElement(i.Z,{key:l.id,result:(0,r._)({},l,s),coordinates:l.coordinates,mode:"subtitle",onClick:e.onPlacemarkClick}),l.uri?o.createElement(a.Z,{uri:l.uri}):null),e.results.items.filter(function(t){var n;return t.id!==(null==l?void 0:l.id)&&!(null==(n=e.hiddenResults)?void 0:n.find(function(e){return e.id===t.id}))}).map(function(t){var n=(0,r._)({},t,s);return o.createElement(i.Z,{key:t.id,result:n,coordinates:n.coordinates,mode:"base",onClick:e.onPlacemarkClick})}))}},7297:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f,h:()=>m});var r=n(8188),o=n(7363),i=n(4748),a=n(3242),s=n(7439),l=n(9360),c=n(1909),u=(0,i.Z)("map-widget-search-result-list-container"),d={top:10,right:10},p={offset:{main:0,side:8},arrowOffset:110};function m(e){return e.width<=460}let f=function(e){var t=o.useRef(null),i=o.useRef(null),m=(0,r._)(o.useState(!1),2),f=m[0],h=m[1];if(o.useEffect(function(){return e.searchFormMode?n.e("map-widget-rich-client").then(n.bind(n,2617)).then(function(e){return new Promise(function(t,n){var r=0;!function o(){r>100&&n(),r++,i.current=document.querySelector("."+e.mapWidgetSearchFormClassName),i.current?t():setTimeout(o,1e3)}()})}).catch(function(){}).finally(function(){h(!0)}):(t.current=document.querySelector("."+s.v),h(!0)),function(){h(!1)}},[e.searchFormMode]),e.mapSize.width<=460)return o.createElement(o.Fragment,null,o.createElement(l.v7,null,o.createElement("div",{className:u("panel")},o.createElement(c.Z,{offset:d,onClick:e.onClose}),e.children)));var v=(0,r._)(e.searchFormMode?[i,p.offset,p.arrowOffset]:[t,void 0,void 0],3),g=v[0],_=v[1],y=v[2];return f?o.createElement(a.Z,{isShown:!0,getTarget:function(){return g.current},type:"normal",position:["bottom-left","bottom"],offset:_,arrowOffset:y,onClose:e.onClose},o.createElement("div",{className:u("popup"),style:{maxHeight:e.mapSize.height-110}},e.children)):null}},2004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(7363),o=n(4748),i=n(3647),a=n(1336),s=n(4610),l=n(1494),c=n(6969),u=n(4788),d=n(2626),p=n(8371),m=n(2253),f=(0,o.Z)("map-widget-search-result-list-item");let h=function(e){var t,n,o,i,s=(0,a.ZR)();return r.createElement("div",{className:f(),onClick:function(){e.onClick(e.item)}},"toponym"===e.item.type?(t=e.item,r.createElement(p.Z,{title:t.title,subtitle:t.description})):(n=e.item,i=d.lR(n,s),r.createElement(r.Fragment,null,r.createElement(p.Z,{title:e.item.title,subtitle:null==(o=n.categories)?void 0:o.slice(0,2).map(function(e){return e.name}).join(", ")}),r.createElement("div",{className:f("data")},r.createElement(m.Z,{result:n,disableLink:!0}),r.createElement("div",{className:f("time-label",(0,u._)({},i.state))},i.text)))))};var v=n(8188);function g(e,t){var n=(0,v._)(t,2),r=n[0],o=n[1];return e.reduce(function(e,t){return"string"!=typeof t?e.push(t):t.split(r).forEach(function(t,n){n>0&&e.push(o),e.push(t)}),e},[])}var _=(0,o.Z)("map-widget-search-result-list-view");let y=function(e){var t,n,o,u,d,p,m,f=(0,a.ZR)(),v=(null!=(p=null==(u=e.searchResults)?void 0:u.totalResultCount)?p:0)-(null!=(m=null==(d=e.searchResults)?void 0:d.pageCount)?m:0);return r.createElement("div",{className:_()},e.searchDisplayText?r.createElement("div",{className:_("header")},(t={query:e.searchDisplayText,resultsCount:e.searchResultsCount}).resultsCount?t.resultsCount+" "+(t.resultsCount%10==1&&t.resultsCount%100!=11?"найден":"найдено")+" по запросу «"+t.query+"»":"Результаты поиска «"+t.query+"»"):null,r.createElement(s.Z,{width:"dynamic"},e.searchResults?r.createElement("div",null,e.searchResults.items.map(function(t){return r.createElement(h,{item:t,key:t.id,onClick:e.onListItemClick})})):null,e.isLoading?r.createElement("div",{className:_("spinner-container")},r.createElement(c.Z,{view:"small"})):e.searchResults&&v>0?r.createElement("div",{className:_("more"),onClick:e.onLoadMoreClick},"Показать ещё "+(n={count:Math.min(e.searchResults.requestResults,v)}).count+" "+(n.count%10==1&&n.count%100!=11?"результат":n.count%10>1&&n.count%10<5&&(n.count%100<10||n.count%100>20)?"результата":"результатов")):null,r.createElement("div",{className:_("footer")},r.createElement("div",{className:_("icon")},r.createElement(l.Z,{name:"super-search-24-flip",inline:!0})),r.createElement("span",{className:_("caption")},(o="Не нашли, что искали, — измените масштаб или __refineSearch",Object.entries({__refineSearch:function(){if(!e.searchRequest)return null;var t,n=i.VJ(e.searchRequest.mapLocation,e.searchRequest.text,null==(t=e.searchRequest.chain)?void 0:t.id,e.searchDisplayText,e.searchRequest.filters),o=i.e_("/?"+n,f);return r.createElement("a",{className:_("link"),href:o,target:"_blank"},"уточните запрос")}()}).reduce(g,[o]).filter(function(e){return e}).map(function(e,t){return r.createElement("span",{key:t},e)}))))))}},9160:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(8007),o=n(7363),i=n(129),a=n(9705),s=n(4748),l=n(1336),c=n(3647),u=n(3688),d=n(3085),p=n(6665),m=n(8371),f=(0,s.Z)("map-widget-toponym-content-view"),h=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getUrl=function(){var e,n=c.hL(t.props.result,t.props.result.region,{skipPointCheck:!0});n||(n="?"+i.stringify({poi:{uri:null==(e=t.props.result)?void 0:e.uri,point:(0,a.s)(t.props.result.coordinates)}}));var r=(0,u._)(c.e_("/"+n,t.props.config));return t.props.isTrafficLayerEnabled&&(r+="&l="+(t.props.config.query.l||"trf")),r},t._getInsideUrl=function(){var e=t.props.result.businesses&&t.props.result.businesses.totalResultCount>0,n=c.hL(t.props.result,t.props.result.region,{skipPointCheck:!0},e?{sublanding:"inside"}:{});return(0,u._)(c.e_("/"+n,t.props.config))},t._renderContent=function(){return"house"===t.props.result.kind?o.createElement(o.Fragment,null,o.createElement("div",{className:f("nearest-stops")},o.createElement(p.Z,{result:t.props.result})),o.createElement("div",{className:f("button-wrapper")},o.createElement(d.Z,{view:"primary",size:"small",isStretched:!0,url:t._getInsideUrl(),target:"_blank"},"Организации в доме"))):o.createElement("div",{className:f("button-wrapper")},o.createElement(d.Z,{view:"primary",size:"small",isStretched:!0,url:t._getUrl(),target:"_blank"},"Открыть в Картах"))},t._renderFeedbackUrl=function(){if(!t.props.result.uri)return null;var e=c.zN(t.props.result.uri),n=c.e_(e,t.props.config);return o.createElement("div",{className:f("button-wrapper")},o.createElement(d.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Сообщить об ошибке"))},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:f()},o.createElement("div",{className:f("title-wrapper")},o.createElement(m.Z,{title:e.result.title,titleUrl:this._getUrl(),subtitle:this.props.result.description})),this._renderContent(),this._renderFeedbackUrl())},t}(o.Component);let v=(0,l.ZP)(h)},734:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(8007),o=n(7363),i=n(1336),a=n(6076),s=n(4748),l=n(9802),c=n(9270),u=n(2370),d=(0,s.Z)("traffic-road-event-content-view"),p=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.event;if(!t.position)return null;var n=t.time_start_value||t.time_end_value,r=t.time_start_value&&t.tzOffset&&(0,u.wQ)(new Date(1e3*Number(t.time_start_value)),t.tzOffset)||void 0,i=t.time_end_value&&t.tzOffset&&(0,u.wQ)(new Date(1e3*Number(t.time_end_value)),t.tzOffset)||void 0;return o.createElement("div",{className:d()},o.createElement("div",{className:d("title")},(0,c.t0)(this.props.event)),t.description?o.createElement("div",{className:d("description"),dangerouslySetInnerHTML:{__html:t.description}}):null,n?o.createElement("div",{className:d("time"),dangerouslySetInnerHTML:{__html:r&&i?(0,l.o0)(r,e.config)+" &mdash; "+(0,l.o0)(i,e.config):r?(0,l.o0)(r,e.config):""}}):null,t.author&&t.link?o.createElement("div",{className:d("source")},o.createElement("span",{className:d("source-label")},"Источник"),o.createElement("a",{className:d("source-link"),href:t.link.href,target:"_blank"},t.author.name)):null)},t}(o.Component);let m=(0,i.ZP)(p);var f=n(5692),h=n(2869),v=n(4063),g=n(2830),_=n(2678),y=function(e){function t(t){var n,r,o;return(n=e.call(this,t)||this)._updateVersionFromStaticLayers=function(e){e.trf&&e.trfe&&n.setState({actualVersion:e.trf.version,roadEventsVersion:e.trfe.version})},n.state={actualVersion:null==(r=t.config.layers.trf)?void 0:r.version,roadEventsVersion:null==(o=t.config.layers.trfe)?void 0:o.version},n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),h.Z.cancel(this._loadStaticLayerAction)},n._shouldUpdateLayer=function(e){return e.mapLocation!==this.props.mapLocation},n._updateLayer=function(){e.prototype._updateLayer.call(this),this._updateStaticLayer()},n._onLayerLoad=function(e){var t=g.Z.actual.getLevel(e.timezone.ids,this.props.config);null==this.props.onLayerLoaded||this.props.onLayerLoaded.call(this.props,e),this._loadLevel(t)},n._updateStaticLayer=function(){h.Z.cancel(this._loadStaticLayerAction),this._loadStaticLayerAction=h.Z.create(v.Z.getLayers({layers:["trf","trfe"]},this.props.config),{success:this._updateVersionFromStaticLayers})},n.render=function(){var e=this.state;return this.props.children({actualVersion:e.actualVersion,roadEventsVersion:e.roadEventsVersion})},t}(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateTimer=-1,t._onLayerDataLoad=function(e){var n=t.props;if(!e||!e.timezone){n.onTrafficLevelChange(null);return}null==t._onLayerLoad||t._onLayerLoad.call((0,_._)(t),e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._updateLayer(),this._updateTimer=window.setInterval(function(){return e._updateLayer()},12e4)},n.componentDidUpdate=function(e){this._shouldUpdateLayer(e)&&this._updateLayer()},n.componentWillUnmount=function(){window.clearInterval(this._updateTimer),h.Z.cancel(this._loadLayerAction),h.Z.cancel(this._loadLevelAction)},n._loadLevel=function(e){h.Z.cancel(this._loadLevelAction);var t=this.props;this._loadLevelAction=h.Z.create(e,{success:function(e){return t.onTrafficLevelChange(e.level)},fail:function(){return t.onTrafficLevelChange(null)}})},n._updateLayer=function(){h.Z.cancel(this._loadLayerAction),this._loadLayerAction=h.Z.create(v.Z.getLayer({layer:"trf",center:this.props.mapLocation.center,zoom:this.props.mapLocation.zoom},this.props.config),{success:this._onLayerDataLoad})},t}(o.Component));let b=(0,i.ZP)(y);var E=n(7048),w=n(7809),S=n(1457),C=n(3911),R=n(8510),P=n(9870),k=n(129),x=n(4670),I=n(6911);let M={getTimings:function(e,t){var n=RegExp("/tiles\\?.*l=("+e.join("|")+")"),r=I.Z.getResourcesTimings(function(e){return n.test(e)}).filter(function(e){var n=k.parse(e.name),r=[[256*Number(n.x),256*Number(n.y)],[(Number(n.x)+1)*256,(Number(n.y)+1)*256]];return(0,x.Y)(t,r)&&e.responseEnd<6e5&&e.responseEnd>0&&e.duration<6e5&&e.duration>=0});if(0!==(r=r.filter(function(e,t){var n=e.name;return r.findIndex(function(e){return e.name===n})===t})).length)return r.sort(function(e,t){return t.responseEnd-e.responseEnd}),{averageDuration:Math.round(r.reduce(function(e,t){return e+t.duration},0)/r.length),minLoadEnd:Math.round(r[r.length-1].responseEnd),medianaLoadEnd:Math.round(r[Math.floor(r.length/2)].responseEnd),maxLoadEnd:Math.round(r[0].responseEnd)}}};var T=n(2574),Z=n(8216),D=n(4788),L=n(4953),A=n(2850);let N=function(e){return e.ready?o.createElement(A.Z,{type:"timingNode"},o.createElement(L.ZP,{name:e.type,nodeState:(0,D._)({ready:e.ready},e.extraState)},e.children)):null};var z=n(7575),U=Z.$j(function(e){return{config:e.config,isSidebarCollapsed:z.XA(e)}}),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){if("distribution_fullscreen"===this.props.type){this.setState({ready:I.Z.getTimeToNow()});return}if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;("search-result"===e.config.pageMode||e.config.uatraits.isMobile&&"orgpage"===e.config.pageMode)&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":case"distribution_fullscreen":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,e.isSidebarCollapsed||this.setState({ready:I.Z.getTimeToNow()}))}},n.render=function(){var e=this.props.type;if("undefined"==typeof window)return null;var t=window._maps_internal_timingsMarks;return o.createElement(N,{type:e,ready:this.state.ready,extraState:{show:t&&e in t?t[e]:this.state.ready}})},t}(o.PureComponent);F.isTimingLogged=!1;let O=U(F);var q=n(2454),B=n(9113),H=n(5172);let W=(0,w.Z)(i.ZP,H.ZP)(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._memoizedCreateHotspotFetchFunction=(0,q.Z)(B.R),t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.config,n=t.hosts.roadEventsRenderer,r=n+"1.1/tiles?trf&%n&%l&%c&v=%v";return o.createElement(R.ZP,{layer:"trfe",dataSource:{type:"tile",vector:(0,P.x8)({priority:"medium",tileUrl:(0,P.pr)((n+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&v=%v&format=protobuf").replace("%n","l=trfe"),t.lang,e.roadEventsVersion),imageUrl:n+"icons?id={{id}}&scale={{scale}}",glyphRangeUrl:t.hosts.vectorGlyphs.replace("{{lang}}",t.lang),theme:(0,P.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,P.pp)((0,P.pr)(r.replace("%n","l=trfe"),t.lang,e.roadEventsVersion),t),fetchHotspots:this._memoizedCreateHotspotFetchFunction((0,P.pp)((0,P.c1)((0,P.pr)(r.replace("%n","l=trje")+"&format=json",t.lang,e.roadEventsVersion),t),t)),transparent:!0},zoomRange:e.zoomRange},onClick:e.onClick})},t}(o.Component));var G=(0,w.Z)(i.ZP,H.ZP),j=!0;let V=G(function(e){function t(t){(n=e.call(this,t)||this)._onTilesReady=function(){if(!n.state.tilesReady){var e=n.props,t=(0,E.n)(e.mapLocation.bounds,e.mapLocation.zoom);if(n.setState({tilesReady:!0}),j){var r=M.getTimings(["trf"],t);r&&n.setState({tilesTimings:r}),j=!1}}},n._countTrafficModeChange=function(){S.Z.reachGoal("traffic")},n._renderLayer=function(){var e=n.props,t=e.config;if(!t.layers.trf)return null;var r=t.layers.trf.zoomRange?{min:t.layers.trf.zoomRange[0],max:t.layers.trf.zoomRange[1]}:void 0;if("traffic#actual"===e.providerKey){var i=t.hosts.traffic+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",a=t.hosts.traffic+"1.1/tiles?trf&%n&%l&%c&tm=%v";return o.createElement(o.Fragment,null,o.createElement(R.ZP,{layer:"trf",dataSource:{type:"tile",vector:(0,P.x8)({priority:"medium",tileUrl:(0,P.pr)(i.replace("%n","l=trf"),t.lang,e.actualVersion),imageUrl:t.hosts.traffic+"icons/{{id}}?scale={{scale}}&id={{id}}",theme:(0,P.gh)(e.theme)},t),raster:{type:"ground",fetchTile:(0,P.pp)((0,P.pr)(a.replace("%n","l=trf"),t.lang,e.actualVersion),t),transparent:!0},zoomRange:r}}),e.showRoadEvents?o.createElement(W,{onClick:e.onClick,zoomRange:r,roadEventsVersion:e.roadEventsVersion}):null)}return"traffic#archive"===e.providerKey?o.createElement(R.ZP,{layer:"trfa",dataSource:{type:"tile",raster:{type:"ground",fetchTile:(0,P.pp)((0,P.pr)(t.hosts.trafficArchive+"tiles?trj&l=trf&%l&%c&tm=%v",t.lang,e.archiveVersion),t),transparent:!0},vector:(0,P.x8)({priority:"medium",tileUrl:(0,P.pr)(t.hosts.trafficArchive+"2.x/tiles?trf&l=trf&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",t.lang,e.archiveVersion),imageUrl:t.hosts.trafficArchive+"icons?id={{id}}&scale={{scale}}",theme:(0,P.gh)(e.theme)},t),zoomRange:r}}):null};var n,r=t.config.query;return j=j&&r.l&&r.l.split(",").includes("trf"),n.state={tilesReady:!1},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._countTrafficModeChange()},n.componentDidUpdate=function(e){var t=this.props;e.providerKey!==t.providerKey&&this._countTrafficModeChange()},n.componentWillUnmount=function(){j=!1},n.render=function(){var e=this.props,t=this.state;return o.createElement(o.Fragment,null,o.createElement(T.Z,{onReady:this._onTilesReady}),this._renderLayer(),o.createElement(C.Z,{name:"traffic_layer",nodeState:{providerKey:e.providerKey}}),o.createElement(N,{type:"traffic_tiles",ready:t.tilesTimings?t.tilesTimings.averageDuration:void 0,extraState:t.tilesTimings}),this.state.tilesReady&&this.props.logTilesReady?o.createElement(O,{type:"traffic_page"}):null)},t}(o.Component));var Y={main:16,side:0},X=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content?o.createElement(a.Z,{displayType:t._getDisplayType(),mapLocation:t.props.mapLocation,coordinates:t.props.content.data.coordinates,onClose:t.props.resetContentData,updateLocationRequest:t.props.updateLocationRequest,offset:Y,mapSize:t.props.mapSize},o.createElement(m,{event:t.props.content.data.event})):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=f.W(e.config);return o.createElement(o.Fragment,null,o.createElement(b,{mapLocation:e.mapLocation,onTrafficLevelChange:e.onTrafficLevelChange},function(n){return o.createElement(V,{providerKey:"traffic#actual",mapLocation:e.mapLocation,actualVersion:n.actualVersion,onClick:e.onClick,showRoadEvents:t,roadEventsVersion:n.roadEventsVersion})}),this._renderContent())},t}(o.Component);let K=(0,i.ZP)(X)},9687:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(8007),o=n(7363),i=n(4748),a=n(1336),s=n(9318),l=n(3228),c=n(6376),u=n(1260),d=n(284),p=n(1494),m=(0,i.Z)("user-maps-map-view"),f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderFeature=function(e,t,r){var i=n.props.config,a=(e.zIndex||r.length-t)+(t===n.state.hoveredIndex?r.length:0),d=!1;if("placemark"===e.type){if(e.content){if("text"===e.content.type)f=o.createElement("div",{className:m("text")},e.content.text);else if(null==(h=i.query.cnstr)?void 0:h[e.content.name]){var f,h,v=i.query.cnstr[e.content.name];f=o.createElement(p.Z,{name:v,className:m("icon")})}else{var g=s.y7(e.content.name),_="fallback"===e.content.name;g&&(d=!_,f=o.createElement(l.Z,{className:m("icon",{fallback:_}),url:g}))}}return o.createElement(c.Z,{key:t,coordinates:e.coordinates,zIndex:a,color:e.stroke&&e.stroke.color,onClick:function(){return n.props.onFeatureClick(t,e.coordinates)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:-1})},comma:e.isComma,caption:e.caption,size:d?"large":"medium",outline:!0},f)}return o.createElement(u.Z,{key:t,geometry:n._moveGeometryToZeroWorld(e.geometry),drawingStyle:{zIndex:a,cursor:n.props.cursor||"pointer",stroke:e.stroke?[e.stroke]:void 0,fill:"polygon"===e.type&&e.fill?e.fill.color:void 0,fillOpacity:"polygon"===e.type&&e.fill?e.fill.opacity:void 0,interactive:!!e.balloonCoordinates},onClick:function(e,r){return n.props.onFeatureClick(t,r.coordinates)}})},n.state={hoveredIndex:-1},n}(0,r._)(t,e);var n=t.prototype;return n._moveGeometryToZeroWorld=function(e){var t=1/0,n=-1/0;(0,d.ZE)(e,function(e){t=e[0]<t?e[0]:t,n=e[0]>n?e[0]:n});var r=-(360*Math.trunc((n+t)/360));return r?(0,d.ZE)(e,function(e){return[e[0]+r,e[1]]}):e},n.render=function(){return this.props.features.map(this._renderFeature)},t}(o.PureComponent);let h=(0,a.ZP)(f);var v=n(6076),g=(0,i.Z)("user-maps-balloon-content");let _=function(e){return o.createElement(o.Fragment,null,"placemark"===e.feature.type&&e.feature.caption&&e.showTitle?o.createElement("div",{className:g("title"),dangerouslySetInnerHTML:{__html:e.feature.caption}}):null,o.createElement("span",{dangerouslySetInnerHTML:{__html:e.feature.isTextInTitle?e.feature.title:e.feature.subtitle}}))};var y=(0,i.Z)("map-widget-user-maps-content-view"),b=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){return this.props.feature.balloonCoordinates?o.createElement("div",{className:y()},o.createElement(_,{showTitle:!1,feature:this.props.feature})):null},t}(o.Component);let E=(0,a.ZP)(b),w=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content&&(t.props.content.data.feature.isTextInTitle?t.props.content.data.feature.title:t.props.content.data.feature.subtitle)?o.createElement(v.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,displayType:t._getDisplayType(),onClose:t.props.resetContentData,mapSize:t.props.mapSize},o.createElement(E,{feature:t.props.content.data.feature})):null},t}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(h,{features:this.props.userMap.features,cursor:this.props.cursor,onFeatureClick:this.props.onFeatureClick}),this._renderContent())},t}(o.Component)},4063:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r,o=n(4788),i=n(224),a=n(7473),s=n.n(a),l=n(5164),c=n(9705),u={getLayers:function(e,t){var n=(r=r||{}).requests||[],o=n.push({layerIds:e.layers,center:e.center?(0,c.s)(e.center,{fractionDigits:8}):void 0,zoom:e.zoom&&Math.round(e.zoom),span:e.span?(0,c.s)(e.span,{fractionDigits:8}):void 0,locale:t.locale,lang:t.lang})-1,i=r.promise||new Promise(function(e,n){s()(function(){var o=r.requests;r=void 0,(0,l.Z)("layers/info",{query:{requests:o}},t).then(e).catch(n)})});return r={promise:i,requests:n},i.then(function(e){return e[o]})},getLayer:function(e,t){var n=e.layer,r=(0,i._)(e,["layer"]);return r.zoom&&!d(n,r.zoom,t)?Promise.resolve(void 0):u.getLayers((0,o._)({layers:[n]},r),t).then(function(e){return e[n]})},checkStaticZoomRange:d};function d(e,t,n){var r=n.layers[e];if(!r)return!0;var o="zoomRange"in r&&r.zoomRange;return!o||t>=o[0]&&t<=o[1]}let p=u},9870:(e,t,n)=>{"use strict";n.d(t,{mt:()=>y,pr:()=>b,c8:()=>C,Hi:()=>p,UZ:()=>u,Il:()=>d,se:()=>k,_I:()=>T,Iw:()=>_,pp:()=>M,x8:()=>I,gh:()=>A,c1:()=>E});var r=n(4788),o=n(8188),i=n(129),a=n.n(i),s=n(6955),l=n(9113),c=n(1480),u={DEFAULT_MARKERS:"defaultMarkers",DEFAULT_GRAPHICS:"defaultGraphics",DEFAULT_GRAPHICS_UNDER_BUILDINGS:"defaultGraphicsUnderBuildings",NIGHT_CIVIL_GRAPHICS:"nightCivilGraphics",NIGHT_NAVI_GRAPHICS:"nightNaviGraphics",NIGHT_ASTRO_GRAPHICS:"nightAstroGraphics",NIGHT_GRAPHICS:"nightGraphics",RASTER_GRAPHICS:"rasterGraphics",EDITOR_MARKERS:"editorMarkers",EDITOR_GRAPHICS:"editorGraphics"},d=":__customEventBlockerLayer",p=["map","sat","skl"],m=["map","sat"],f=["map","trf","trfe","trfa","stv","pht","indoor","carparks","mrc","mrcpe","personalizedPoi","directPoi","tile3d",u.DEFAULT_GRAPHICS,u.DEFAULT_GRAPHICS_UNDER_BUILDINGS],h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",v={map:function(e){var t=e.mapTiles,n=e.mapjTiles;return{url:S(t),hotspotsUrl:S(n)}},sat:function(e){return{url:S(e.satTiles)}},skl:function(e){var t=e.sklTiles,n=e.skljTiles;return{url:S(t),hotspotsUrl:S(n)}},stv:function(e){return{url:e.stvTiles.replace("l=stv","l=stv,sta")}},sta:function(e){return{hotspotsUrl:e.staHotspotTiles}},pht:function(e){var t=e.phtRenderer;return{url:t+"tiles?l=pht&%c&v=%v&%l&format=png",hotspotsUrl:t+"tiles?l=phj&%c&v=%v&%l&format=json"}},mrc:function(e){return{url:e.mrcTiles+"&camera-direction=front",hotspotsUrl:e.mrcHotspotTiles+"&camera-direction=front"}},mrcpe:function(e){return{url:e.mrcpeTiles+"&camera-direction=front",hotspotsUrl:e.mrcpeHotspotTiles+"&camera-direction=front"}},carparks:function(e){return{url:e.carparksTiles}},personalizedPoi:function(){return{}},directPoi:function(){return{}}},g=["map:ground","sat:ground","skl:ground","personalizedPoi:ground","directPoi:ground","trf:ground","trfe:ground","trfa:ground","carparks:ground","mrc:ground","mrcpe:ground","stv:ground","indoor:ground",u.DEFAULT_GRAPHICS_UNDER_BUILDINGS,"map:buildings","tile3d:buildings",u.DEFAULT_GRAPHICS,"map:icons","map:labels","personalizedPoi:icons","personalizedPoi:labels","directPoi:icons","directPoi:labels","trfe:icons","trfe:labels","carparks:icons","indoor:icons","indoor:labels","stv:icons","pht:icons","sta:ground","pht:ground",u.NIGHT_CIVIL_GRAPHICS,u.NIGHT_NAVI_GRAPHICS,u.NIGHT_ASTRO_GRAPHICS,u.NIGHT_GRAPHICS,u.RASTER_GRAPHICS,u.DEFAULT_MARKERS,d,u.EDITOR_GRAPHICS,u.EDITOR_MARKERS],_=["map","sat"];function y(e,t){var o,i,a=Object.keys(v).reduce(function(o,i){var a=e.layers["sta"===i?"stv":i],s=a&&a.zoomRange;return o[i]={type:"tile",raster:function(e,t,n,r){var o=v[e];if(!t||!o)return{type:"ground",fetchTile:h};var i=o(n.hosts),a=function(e){return D(b(e,n.locale,t.version),n)},s=["map","skl","carparks","stv","sta","mrc","mrcpe"].includes(e)?"&"+x(n):"",c=["map","stv","sta","pht","mrc","mrcpe","carparks"].includes(e)&&"dark"===r?"&theme=dark":"",u=i.url?L(a(i.url),s+c):h;return{type:"ground",fetchTile:"map"===e?Z(u,n):u,fetchHotspots:i.hotspotsUrl?(0,l.R)(a(i.hotspotsUrl)+s):void 0,transparent:!m.includes(e),hotspotPadding:n.uatraits.isMobile?12:0}}(i,a,e,t),vector:function(e,t,o,i){if(t){var a=o.locale,s=o.hosts,c=o.experiments,u=o.uatraits.isMobile,d="directPoi"===e;if("personalizedPoi"===e||d){var p=o.experiments.ui.vectorVmap3,m=s.tilesApi+"personalized_poi/tiles?l="+(d?"personalized_poi_ads":"personalized_poi")+"&%l&v=%v&x={{x}}&y={{y}}&z={{z}}&zmin={{zmin}}&zmax={{zmax}}&service="+(u?"touch-maps":"desktop-maps"),f=p?{tileFormat:"vmap3",tileUrl:""+m+"&pbversion=3&experimental_pp_over_dj=prod",imageUrl:s.vectorVmap3Images,glyphRangeUrl:s.vectorVmap3Glyphs.replace("{{lang}}",o.locale),fontObjectUrl:s.vectorFontObjects,fontListUrl:s.vectorFontList,styleUrl:s.vectorVmap3Styles}:{tileFormat:"vmap2",tileUrl:m,imageUrl:""+s.tilesApi+"personalized_poi/icons?id={{id}}&scale={{scale}}",glyphRangeUrl:""+s.tilesApi+"personalized_poi/glyphs?font_id={{fontId}}&range={{range}}"},h=d?c.ui.directPpoiLoadingPriority:c.ui.vectorPpoiLoadingPriority,v=d?c.ui.directPpoiCollisionPriority:c.ui.vectorPpoiCollisionPriority;return I((0,r._)({priority:h||"medium",collisionPriority:v||"medium",requestTileSize:"X4",tileBeltSize:d&&void 0!==c.ui.directPoiBeltSize?Number(c.ui.directPoiBeltSize):void 0,lowPrecisionBeltTiles:(!d||void 0===c.ui.directPoiBeltSize)&&void 0,cameraIdleThrottling:d&&void 0!==c.ui.directPoiThrottling?Number(c.ui.directPoiThrottling):void 0,theme:A(i),tileRequestWithCredentials:!0},f,{tileUrl:N(b(f.tileUrl,o.lang,t.version),o,Z,D)}),o)}if("carparks"===e){var g,_=(null==(g=o.mocks)?void 0:g.version)?"":"&v=%v";return I({priority:"medium",tileUrl:N(b(s.carparksTileRenderer+"tiles?version=2&l=carparks&%l"+_+"&x={{x}}&y={{y}}&z={{z}}",o.lang,t.version),o,E,D),imageUrl:""+s.carparksTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:A(i)},o)}if("stv"===e)return I({priority:"medium",tileUrl:D(b(""+s.stvTileRenderer+"tiles?l=sta,stv&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",o.lang,t.version),o),imageUrl:""+s.stvTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:A(i)},o);if("pht"===e)return I({priority:"medium",tileUrl:D(b(""+s.phtRenderer+"tiles?l=pht&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",o.lang,t.version),o),imageUrl:""+s.phtRenderer+"icons?id={{id}}&scale={{scale}}",theme:A(i),iconsOnlyTiles:!0,lowPrecisionBeltTiles:!1,tileBeltSize:0,tileCacheSize:100},o);if("mrc"===e||"mrcpe"===e){var y="mrc"===e?s.mrcTiles:s.mrcpeTiles,S="mrc"===e?s.mrcHotspotTiles:s.mrcpeHotspotTiles;return I({priority:"medium",tileUrl:D(y.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front&format=protobuf",o),hotspots:{ground:(0,l.R)(S.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front")},theme:A(i)},o)}if("map"===e){var C=o.experiments.ui,R=C.vectorVmap3,k=C.vectorNoRichModels,x=C.vectorRichPointsEnabled,M=C.vectorHdModeEnabled,T=C.vectorMapType,L=R?{tileFormat:"vmap3",tileUrl:s.vectorVmap3Tiles,imageUrl:s.vectorVmap3Images,meshUrl:s.vectorVmap3Meshes,glyphRangeUrl:s.vectorVmap3Glyphs,richModelUrl:s.vectorVmap3RichModels,fontObjectUrl:s.vectorFontObjects,fontListUrl:s.vectorFontList,styleUrl:s.vectorVmap3Styles,indoorPlanUrl:s.vectorVmap3IndoorPlans,hdModeEnabled:M,mapType:T}:{tileFormat:"vmap2",tileUrl:s.vectorTiles,imageUrl:s.vectorImages,meshUrl:s.vectorMeshes,glyphRangeUrl:s.vectorGlyphs,richModelUrl:s.vectorRichModels},z=L.tileUrl.replace("{{lang}}",a).replace("v={{version}}",t.version?"v="+t.version:""),U=L.glyphRangeUrl.replace("{{lang}}",a);return I((0,r._)({collisionPriority:"low",priority:"high",tileBeltSize:1,requestTileSize:u?"X1":"X4",richModelEnabled:!P(k),richPointEnabled:P(x),richModelDecoderWorkerUrl:"undefined"!=typeof window?o.baseUrl+new URL(n(1367),n.b).pathname:void 0,hotspots:{buildings:{minZoom:16.5}},theme:A(i)},L,{tileUrl:N(z,o,Z,E,w,D),glyphRangeUrl:U}),o)}}}(i,a,e,t),clampMapZoom:p.includes(i),zoomRange:s?{min:s[0],max:s[1]}:void 0},o},{});return a.indoor=(o=e.hosts,i=e.locale,{type:"tile",vector:I({collisionPriority:"low",priority:"low",requestTileSize:e.uatraits.isMobile?"X1":"X4",glyphRangeUrl:o.vectorIndoorGlyphs.replace("{{lang}}",i),imageUrl:o.vectorIndoorImages,meshUrl:o.vectorIndoorMeshes,tileUrl:Z(o.vectorIndoorTiles.replace("{{lang}}",i),e),indoorPlanUrl:o.vectorIndoorPlans,theme:A(t)},e),zoomRange:{min:16.5,max:21}}),Object.keys(u).forEach(function(e){a[u[e]]={type:"geojson"}}),a}function b(e,t,n){return e.replace("%l","lang="+t).replace(/(v|tm)=%v/,n?"$1="+n:"").replace(/%d\|\d+/,function(e){return"{{"+e+"}}"}).replace(/%d/,"{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}")}function E(e,t){var n;return e+((null==(n=t.mocks)?void 0:n.version)?"&mocks%5Bversion%5D="+t.mocks.version:"")}function w(e,t){return(t.authorization||t.experiments.ui.personalizedPoiNoAuth)&&t.experiments.ui.poiVectorAuthExperimentalData?e+"&experimental_data_poi="+t.experiments.ui.poiVectorAuthExperimentalData:e}function S(e){return e.replace("%c","v=%v&%c")}function C(e,t,n){for(var r=e.filter(function(e,t,n){return n.indexOf(e)===t}).sort(function(t,n){var r=g.indexOf(t)-g.indexOf(n);return 0===r?e.indexOf(t)-e.indexOf(n):r}).reverse(),o=[],i=r.length-1;i>=0;i--){var a=r[i],s=a.split(":")[0];if(f.includes(s))o.push(a),r.splice(i,1);else break}return r.reverse(),{topRasterLayers:R(r,n).map(function(e){return e===d?{id:d,type:"custom",implementation:function(e){return"raster"===e.effectiveMode&&t}}:e===u.DEFAULT_MARKERS||e===u.EDITOR_MARKERS?{id:e,type:"markers",source:e}:e}),mainLayers:R(o,n)}}function R(e,t){var n,o,i,a={"map:buildings":{vector:{modelsAppearingAnimation:{duration:250}}},"tile3d:buildings":{vector:{parentLayerId:"map:buildings",modelsAppearingAnimation:{duration:250}}},"map:icons":i={vector:{iconsInteractiveArea:t&&(n=t.uatraits.isMobile,o=t.experiments.ui.vectorExtendTaps,n&&o?{field:10,minSize:40}:void 0)}},"indoor:icons":i,"trfe:icons":i,"stv:icons":i,"pht:icons":{vector:(0,r._)({},i.vector,{isolateObjectsColliding:!0})},"carparks:icons":i,"personalizedPoi:icons":i,"directPoi:icons":i};return e.map(function(e){return e in a?(0,c.F7)(e,a[e]):e})}function P(e){if(void 0===e)return!1;if("string"==typeof e){var t=e.toLowerCase();return t.length>0&&"false"!==t&&"no"!==t&&"0"!==t}return e}function k(e){return g.filter(function(t){return t.startsWith(""+e+":")})}function x(e){var t=(0,r._)({},e.experiments.rendererParams||{});return Object.keys(e.query).forEach(function(n){n.startsWith("renderer_")&&(t[n.replace(/^renderer_/,"")]=e.query[n])}),a().stringify(t,{indices:!1})}function I(e,t){return(0,r._)({},e,{imageUrl:M(e.imageUrl,t),tileUrl:M(e.tileUrl,t),meshUrl:M(e.meshUrl,t),richModelUrl:M(e.richModelUrl,t),indoorPlanUrl:M(e.indoorPlanUrl,t),glyphRangeUrl:M(e.glyphRangeUrl,t),fontObjectUrl:M(e.fontObjectUrl,t),fontListUrl:M(e.fontListUrl,t),styleUrl:M(e.styleUrl,t)})}function M(e,t){if(!e)return e;var n=x(t),r=e.includes("?")?"&":"?";return e+r+n}function T(e,t){var n,r,i,l,c,u,d=(0,s.wo)(e);return d.raster&&"string"==typeof d.raster.fetchTile&&(d.raster.fetchTile=(n=d.raster.fetchTile,r=t.raster,l=(i=(0,o._)(n.split("?"),2))[0],c=i[1],u=a().parse(c),l.includes(";base64")?l:(r?u.style=r:delete u.style,Object.values(u).length>0?[l,a().stringify(u,{encode:!1})].join("?"):l))),d.vector&&(d.vector.customization=t.vector),d}function Z(e,t){return L(e,t.bunker.disableAdsMapTiles?"":"&ads=enabled")}function D(e,t){return L(e,"&client_id="+(t.isYango?"yango-web-maps":"yandex-web-maps"))}function L(e,t){return e.includes(";base64")?e:e+t}function A(e){return"dark"===e?"dark":void 0}function N(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return r.reduce(function(e,n){return n(e,t)},e)}},6657:(e,t,n)=>{"use strict";n.d(t,{zR:()=>g,M3:()=>_,p_:()=>m});var r,o=n(4788),i=n(3782);let a=function(e,t,n){var r,o,a;return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,i.Z)(n))==n?n:0),void 0!==t&&(t=(t=(0,i.Z)(t))==t?t:0),r=(0,i.Z)(e),o=t,a=n,r==r&&(void 0!==a&&(r=r<=a?r:a),void 0!==o&&(r=r>=o?r:o)),r};var s=n(2869),l=n(799),c=50*Math.PI/180;function u(e,t,n){void 0===n&&(n=1e-6);var r=e-t;return-n<r&&r<n}var d=function(e){return a(17.5+(e.size.y-800)*.0017857142857142857,17.5,18)},p=function(e,t,n,o,i,a){if(void 0===i&&(i=l.K.linear),!r){var c,u,d,p,m,f,h,v,g,_,y,b=(void 0===(c=i)&&(c=l.K.linear),m=e.worldCenter,f=e.zoom,h=e.tilt,v=e.azimuth,g=null!=(u=n.zoom)?u:e.zoom,_=null!=(d=n.tilt)?d:e.tilt,y=null!=(p=n.azimuth)?p:e.azimuth,e.animateForDuration(o,function(e,t){var r,o,i,a,s,l=c(t);return{worldCenter:n.worldCenter?(r=l,o=m,i=n.worldCenter,{x:(a=o.x)+(i.x-a)*r,y:(s=o.y)+(i.y-s)*r}):e.worldCenter,zoom:void 0!==n.zoom?f+(g-f)*l:e.zoom,tilt:void 0!==n.tilt?h+(_-h)*l:e.tilt,azimuth:void 0!==n.azimuth?v+(y-v)*l:e.azimuth}})),E=s.Z.create(b.complete,{success:function(){r=void 0,null==a||a()},fail:function(){r=void 0}});r={name:t,stop:function(){null==a||a(),b.stop(),E.cancel()}}}},m=function(e){e&&e!==(null==r?void 0:r.name)||(null==r||r.stop(),r=void 0)},f=function(e,t){var n=null==t?void 0:t.worldCenter;return!!n&&!(u(e.worldCenter.x,n.x)&&u(e.worldCenter.y,n.y)&&u(e.zoom,d(e))&&u(e.tilt,c))},h=function(e,t,n){void 0===t&&(t=!0);var r=t?6e4:59500;p(e,"flyover",{azimuth:e.azimuth+2*Math.PI*r/6e4},r,l.K.linear,n)},v=function(e,t,n,r){var o,i,a=l.K[n||"easeOutCubic"];p(e,"positioning",{worldCenter:t.worldCenter,zoom:null!=(o=null==t?void 0:t.zoom)?o:d(e),tilt:null!=(i=null==t?void 0:t.tilt)?i:c,azimuth:null==t?void 0:t.azimuth},500,a,r)},g=function(e,t,n){if(r&&m(),f(e,t)){var i=e.azimuth+2*Math.PI*500/6e4;v(e,(0,o._)({},t,{azimuth:i}),"linear",function(){h(e,!1,n)})}else h(e,!0,n)},_=function(e,t,n){r&&m(),v(e,t,"easeOutCubic",n)}},9113:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(4788),o=n(8188),i=n(2467);function a(e){var t=function(t,n,a,s){var l=e.replace("{{x}}",String(t)).replace("{{y}}",String(n)).replace("{{z}}",String(a)).replace("{{scale}}","1").replace(/\{\{d\|(\d+)\}\}/,function(e,r){return String((t+n+a)%Number(r)+1)});return(0,i.Z)({url:l,signal:s}).then(function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return[]}return!e||e.error&&404===e.error.code?[]:e.data.features.map(function(e){var t,n,i,a=e.properties.HotspotMetaData.RenderedGeometry;return{type:"rendered",feature:(n=e.properties.URIMetaData,{type:"Feature",id:(i=null==(t=e.properties.HotspotMetaData)?void 0:t.id)?String(i):"",geometry:e.geometry,properties:(0,r._)({},e.properties,{uri:(n&&n.URIs[0]||{}).uri})}),geometry:"Polygon"===a.type?{type:"Polygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})}:{type:"MultiPolygon",coordinates:a.coordinates.map(function(e){return e.map(function(e){return e.map(function(e){var t=(0,o._)(e,2);return{x:t[0],y:t[1]}})})})}}})})};return t.template=e,t}},8597:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,Ib:()=>a,Sx:()=>s});var r=n(4788),o=n(7363),i=o.createContext({});i.displayName="mapContext";var a=i.Provider;function s(){return o.useContext(i)}let l=function(e){return void 0===e&&(e={}),function(t){var n=function(n){return o.createElement(i.Consumer,null,function(i){var a=i.map,s=i.ymaps3;return e.shouldWait&&!a?null:o.createElement(t,(0,r._)({},n,{map:a,ymaps3:s}))})};return n.displayName="mapContext("+t.displayName+")",n}}},7677:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(1640),o=n(5731);function i(e){return e.split("~").reduce(function(e,t){var n=(0,r._)(t.split(",")),i=n[0],a=n[1],s=n[2],l=n.slice(3),c=(0,o.P)(i+","+a);return a&&!(l.length>0)&&c&&e.push({coordinates:c,color:s}),e},[])}},2241:(e,t,n)=>{"use strict";function r(e){if(0===e.length)return[];for(var t=[e[0]],n=0,r=e[0],o=1;o<e.length;o++){var i=e[o],a=i[0]+n-r[0];if(a>360||a<-360){var s=360*Math.floor(a/360);n-=s,a-=s}a>180?n-=360:a<-180&&(n+=360);var l=[i[0]+n,i[1]];t.push(l),r=l}return t}n.d(t,{g:()=>r})},3340:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4788),o=n(8007),i=n(224),a=n(7363),s=n(6653),l=n(2574),c=n(3242);let u=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._ref=a.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return(0,o._)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,o=(0,i._)(t,["coordinates"]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{coordinates:n,nonInteractive:!0},a.createElement("div",{ref:this._ref}),a.createElement(c.Z,(0,r._)({type:"balloon"},o,{getTarget:function(){return e._ref.current}}),o.children)),a.createElement(l.Z,{onUpdate:o.isShown?this._onMapUpdate:void 0}))},t}(a.PureComponent)},6376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(224),o=n(7363),i=n(4748),a=n(6653),s=n(3228),l=n(2606),c=n.n(l),u=n(4123),d=n.n(u),p=(0,i.Z)("map-circle-placemark");let m=function(e){var t=e.color,n=e.size,i=e.comma,l=e.caption,u=e.outline,m=(0,r._)(e,["color","size","comma","caption","outline"]);return o.createElement(a.Z,m,o.createElement("div",{className:p({comma:i,size:void 0===n?"medium":n,outline:u}),style:{color:t}},o.createElement(s.Z,{className:p("placemark"),url:i?d():c()}),o.createElement("div",{className:p("content")},e.children),l?o.createElement("div",{className:p("caption")},l):null))}},7031:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(8007),o=n(7363),i=n(5877),a=n.n(i),s=n(8597),l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uuid=a().v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach(function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[0][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[1][1]}})}),n},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],o=this._getCollidingPrimitives(t.placemarks);n.forEach(function(t,n){n.startsWith(e._uuid+":")&&r.push(n)}),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(o)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(o.Component);let c=(0,s.ZP)({shouldWait:!0})(l)},2669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(8007),o=n(7363),i=n(4748),a=n(7809),s=n(1336),l=n(8597),c=n(4056),u=n(7575),d=n(4953),p=n(2574),m=n(5846),f=n(8599),h=n(980),v=(0,f.Z)((0,m.Z)({resolved:{},chunkName:function(){return"lang-switcher"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("lang-switcher").then(n.bind(n,8172))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 8172}}),function(e){return e.config.availableLangs.length>1}),g=(0,m.Z)({resolved:{},chunkName:function(){return"scale-line"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.resolve().then(n.bind(n,2751))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2751}}),_=(0,m.Z)({resolved:{},chunkName:function(){return"logo-view"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("logo-view").then(n.bind(n,2034))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 2034}}),y=(0,a.Z)(s.ZP,(0,l.ZP)({shouldWait:!0})),b=(0,i.Z)("map-copyrights");let E=y(function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){n.setState({maxWidth:n.props.map.container.offsetWidth-n._getRightOffset(),copyrights:(0,c.h)(n.props.map)})},n._getRightOffset=function(){return n.props.right-12},n._getPrivacyItem=function(){var e=n.props.config;return e.isYango?{type:"privacy",text:"Конфиденциальность",href:e.confidentialPolicyUrl+"?lang="+e.lang}:null},n._getTermsItem=function(e){var t=n.props.config;return{type:e?"terms_short":"terms",text:e?"Условия":"Условия использования",href:t.agreementUrl+"?lang="+t.lang}},n._getCopyrightsItem=function(){return{type:"copyrights",text:n.state.copyrights,shrink:!0}},n._getRightHoldersItem=function(){var e=n.props.config;return{type:"right_holders",text:"Правообладатели",href:e.rightHoldersUrl+"?lang="+e.lang}},n._getSupportItem=function(){var e=n.props.config;return(0,u.md)(e)?null:{type:"support",text:"Справка",href:e.feedback.helpUrl+"?lang="+e.lang}},n._getLocalizationItem=function(){return 1===n.props.config.availableLangs.length?null:{type:"lang",text:o.createElement(v,null)}},n._renderBlock=function(e,t){var n=t.filter(function(e){return!!e});return o.createElement("div",{className:b("block",{type:e})},n.map(function(e){var t=e.href?"a":"div";return o.createElement(d.ZP,{name:e.type,logClick:!!e.href,key:e.type},o.createElement(t,{className:b("item",{shrink:e.shrink,noprint:e.noprint,type:e.type}),href:e.href,target:"_blank"},e.text))}))},n._renderBlocks=function(){var e=n.props;return(e.config,e.copyrightOnly)?n._renderBlock("copyrights-only",[n._getCopyrightsItem(),n._getTermsItem(),n._getPrivacyItem()]):o.createElement(o.Fragment,null,n._renderBlock("copyrights",[n._getCopyrightsItem(),n._getRightHoldersItem()]),n._renderBlock("links",[{type:"service",text:"© Яндекс"},n._getLocalizationItem(),n._getSupportItem(),n._getTermsItem(),n._getTermsItem(!0),n._getPrivacyItem()]))},n.state={maxWidth:0,copyrights:(0,c.h)(n.props.map)},n}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.copyrightOnly?"copyrights-only":"map"===e.layer?"scheme":"satellite";return o.createElement("footer",null,o.createElement(d.ZP,{name:"map_copyrights"},o.createElement("div",{className:b({type:t}),style:(0,h.cq)(e.config,{maxWidth:this.state.maxWidth,right:this._getRightOffset()})},this._renderBlocks(),o.createElement(p.Z,{onResize:this._update,onCopyrightsChange:this._update}))),e.copyrightOnly?null:o.createElement("div",{className:b("logo-layout")},o.createElement(_,{view:"map",isNegative:"map"!==e.config.mapType})),!e.copyrightOnly&&e.location?o.createElement("div",{className:b("scale-line")},o.createElement(g,{center:e.location.center,zoom:e.location.zoom})):null)},t}(o.PureComponent))},4238:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(8007),o=n(7363),i=n(8597),a=n(1336),s=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._key="",t._applyCursor=function(){var e,n=t._getCursor();!t.props.src&&n&&n.startsWith("url(")||(t.props.map.container.style.cursor=(e=t.props).src&&e.basePoint?'url("'+e.src+'") '+e.basePoint.join(" ")+', url("'+e.src+'"), auto':e.cursor||"default",t._key=t._getCursor())},t._getCursor=function(){return t.props.map.container.style.cursor||""},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._applyCursor()},n.componentDidUpdate=function(){this._applyCursor()},n.componentWillUnmount=function(){this._getCursor()===this._key&&(this.props.map.container.style.cursor="")},n.render=function(){return null},t}(o.Component);let l=(0,i.ZP)({shouldWait:!0})((0,a.ZP)(s))},8448:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(8007),o=n(7363),i=n(4960),a=n(9705),s=n(1494),l=n(4748),c=n(8597),u=n(2574),d=n(6653),p=n(4953),m=n(7313),f=n(7031),h=n(1336),v=n(7809),g=n(5172),_=(0,l.Z)("map-entrances-view"),y=(0,v.Z)(h.ZP,(0,c.ZP)({shouldWait:!0}),g.ZP),b=[[-5,-5],[5,5]];function E(e){return e>=18?"large":e>=17?"normal":e>=16?"small":void 0}let w=y(function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._onMapUpdate=function(){var e=n.props,t=n.state,r=e.map.zoom,o=e.map.azimuth;(r!==t.mapZoom||o!==t.mapAzimuth)&&n.setState({mapZoom:r,mapAzimuth:o})},n._renderEntrance=function(e,t){var r=n.props,l=n.state,c=E(l.mapZoom),u=((e.azimuth||0)+(0,i.Z)(l.mapAzimuth))%360,f=r.isMetro?16:0;return o.createElement(p.ZP,{key:t,name:"entrance",nodeState:{name:e.name,coords:(0,a.s)(e.coordinates)}},o.createElement(d.Z,{coordinates:e.coordinates,nonInteractive:!r.onEntranceClick,onClick:function(){return null==r.onEntranceClick?void 0:r.onEntranceClick.call(r,e)},zIndex:m.I.search.base},o.createElement("div",{className:_({size:c,animated:r.animated})},o.createElement("div",{style:{transform:"rotate("+u+"deg)",paddingTop:f}},void 0!==e.azimuth&&"small"!==c?o.createElement("div",{className:_("arrow-container")},o.createElement(s.Z,{name:"large"===c?"entrance-arrow-red-13":"entrance-arrow-red-10",theme:r.theme,className:_("arrow",{large:"large"===c}),inline:!0})):void 0,r.isMetro?null:o.createElement("div",{className:_("dot")})),l.isVector&&e.name&&l.mapZoom>=18.5?o.createElement("div",{className:_("title",{position:u>45&&u<135?"left":"right"})},e.name):null)))},n._renderEntrances=function(){var e=n.props,t=n.state,r=E(t.mapZoom);return e.result.entrances&&r?o.createElement(o.Fragment,null,e.result.entrances.map(n._renderEntrance),t.mapZoom>=18.5&&!e.isMetro?o.createElement(f.Z,{placemarks:e.result.entrances.map(function(e){return{anchor:e.coordinates,id:e.coordinates.join(","),pixelSize:b}})}):null):null},n.state={mapZoom:t.map.zoom,mapAzimuth:t.map.azimuth,isVector:"vector"===t.map.getEffectiveMode()},n}return(0,r._)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderEntrances(),o.createElement(u.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.PureComponent))},3410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,Q:()=>i});var r=(0,n(4641).Z)("mapFeatureGroup",{}),o=r.connect,i=r.Provider;let a=o},1260:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(2267),o=n(8007),i=n(7363),a=n(5877),s=n.n(a),l=n(8597),c=n(111),u=n(576),d=n(9870),p=n(3410),m=n(7809),f=n(284),h={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"};let v=(0,m.Z)(p.Z,(0,l.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry,draggable:n.props.draggable}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,o){(null==e?void 0:e.type)==="feature"&&e.feature.id===n._id&&r(o,t)},n.props.map.events.on(h[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(h[e],t,n._handlers[e]),delete n._handlers[e]},n._dragStart=function(e){var t=e.object,r=e.newGeometry;if("Feature"===t.type&&t.id===n._id){var o=(0,f.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});o.coordinates&&(null==n.props.onDragStart||n.props.onDragStart.call(n.props,{coordinates:o.coordinates}))}},n._dragMove=function(e){var t=e.object,r=e.newGeometry;if(n.props.onDragMove&&"Feature"===t.type&&t.id===n._id){var o=(0,f.ZE)(r,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragMove||n.props.onDragMove.call(n.props,{coordinates:o.coordinates})),!1}},n._dragEnd=function(e){var t=e.newGeometry,r=e.object;if(n._dragMoveThrottled.cancel(),"Feature"===r.type&&r.id===n._id){var o=(0,f.ZE)(t,function(e){return n.props.map.projection.fromWorldCoordinates(e)});return o.coordinates&&(null==n.props.onDragEnd||n.props.onDragEnd.call(n.props,{coordinates:o.coordinates})),!1}},n._id=t.id||s().v4(),n._dragMoveThrottled=(0,c.Z)(n._dragMove,50),n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(h).forEach(function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])}),t.draggable&&(t.map.dragger.on("dragStart",this._dragStart),t.map.dragger.on("dragMove",this._dragMoveThrottled),t.map.dragger.on("dragEnd",this._dragEnd))},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:d.UZ.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((0,u.Z)(e.drawingStyle,n.drawingStyle)&&(0,u.Z)(e.geometry,n.geometry)&&e.draggable===n.draggable||n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId)),Object.keys(h).forEach(function(o){(n[o]!==e[o]||r!==t._dataSourceId)&&(e[o]&&t._removeHandler(o,r),n[o]&&t._addHandler(o,t._dataSourceId,n[o]))}),!e.draggable&&n.draggable?(n.map.dragger.on("dragStart",this._dragStart),n.map.dragger.on("dragMove",this._dragMoveThrottled),n.map.dragger.on("dragEnd",this._dragEnd)):e.draggable&&!n.draggable&&(n.map.dragger.offSingle("dragStart",this._dragStart),n.map.dragger.offSingle("dragMove",this._dragMoveThrottled),n.map.dragger.offSingle("dragEnd",this._dragEnd))},n.componentWillUnmount=function(){var e=this;this.props.map.dragger.offSingle("dragStart",this._dragStart),this.props.map.dragger.offSingle("dragMove",this._dragMoveThrottled),this.props.map.dragger.offSingle("dragEnd",this._dragEnd),Object.keys(this._handlers).forEach(function(t){return e._removeHandler(t,e._dataSourceId)}),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||d.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent))},9322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(4788),o=n(8007),i=n(7363),a=n(1336),s=n(8597),l=n(4238),c=n(9870);n(9113);var u=n(2574);function d(e,t){var n;return!!(null==(n=e.properties.tags)?void 0:n.includes(t))}var p={color:{r:1,g:68/255,b:.2,a:1}},m={lightness:-.1,saturation:1},f={lightness:-.1,saturation:0},h=n(6145).Z.getLogger("map-objects"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n.state={isHover:!1},Object.keys(u.h).forEach(function(e){return n._handlers[e]=n._getHandler(e)}),n}(0,o._)(t,e);var n=t.prototype;return n._getHandler=function(e){var t=this;return function(n,r){var o=t.props,i=n.feature;"onMouseEnter"===e&&h(i.id,n);var a=!o.config.uatraits.isTouch&&!o.disableHighlight;(o.shouldHover?o.shouldHover(i):!!o.onClick)&&("onMouseEnter"===e&&(a&&o.map.setObjectHighlight(function(e){var t,n,r,o;if(r=(null==(n=e.properties.vectorMetadata)?void 0:n.get("_vector_richModel"))==="model",o=d(e,"major_landmark")&&d(e,"building"),!r&&!o)return(null==(t=e.properties.vectorMetadata)?void 0:t.get("_vector_layerName"))==="tile3d"?{object:e,color:f}:{object:e,color:d(e,"building")?m:p}}(i)),t.setState({isHover:!0})),"onMouseLeave"===e&&(a&&o.map.setObjectHighlight(void 0),t.setState({isHover:!1})));var s=o[e];s&&s(i,r)}},n.render=function(){var e=this,t=(0,c.se)(this.props.layer);return i.createElement(i.Fragment,null,this.state.isHover?i.createElement(l.Z,{cursor:"pointer"}):null,t.map(function(t){return i.createElement(u.Z,(0,r._)({key:t,layer:t},e._handlers))}))},t}(i.Component);let g=(0,a.ZP)((0,s.ZP)({shouldWait:!0})(v))},8510:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>p});var r=n(8007),o=n(1912),i=n(7363),a=n(576),s=n(1336),l=n(8597),c=n(9870),u=n(9322),d=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._updateLayer=function(e,n){var r=t.props.map;if(!r.destroyed){var i=n&&r.getDataSource(n.layer);n&&n.dataSource&&(i?e&&r.updateTileDataSource(n.layer,n.dataSource):r.addDataSource(n.layer,n.dataSource));var a=r.getLayers(),s=a.topRasterLayers,l=a.mainLayers,u=(0,o._)(l).concat((0,o._)(s));if(e){var d=(0,c.se)(e.layer);u=u.filter(function(e){return!d.includes(e)})}if(n){var p,m=(0,c.se)(n.layer);(p=u).push.apply(p,(0,o._)(m))}r.setLayers((0,c.c8)(u,t.props.ymaps3.EventBlockerLayer,t.props.config)),e&&e.dataSource&&(!n||!n.dataSource)&&r.removeDataSource(e.layer)}},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayer(void 0,this.props)},n.componentDidUpdate=function(e){this.props.layer===e.layer&&(0,a.Z)(e.dataSource,this.props.dataSource)||this._updateLayer(e,this.props)},n.componentWillUnmount=function(){this._updateLayer(this.props)},n.render=function(){return i.createElement(u.Z,this.props)},t}(i.Component);let p=(0,s.ZP)((0,l.ZP)({shouldWait:!0})(d))},2965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r,o=n(8007),i=n(1912),a=n(7363),s=n(8597),l=n(1336),c=n(1260),u=n(6653),d=n(9029),p=n(6897),m=n(4748),f=n(7313),h=n(9870),v=(0,m.Z)("map-line-editor"),g=f.I.editing-3,_=f.I.editing-1,y=f.I.editing-2,b=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setLayers=function(e){var t=n.props.map,o=t.getLayers(),a=o.topRasterLayers,s=o.mainLayers,l=(0,i._)(a).concat((0,i._)(s)),c=n.props.config.uatraits.isMobile?"click":"fastclick";n.props.editorLayerOwner?(l.push(h.Il),r=n.props.editorLayerOwner,t.events.on(c,h.Il,n._onEditorLayerClick)):e&&(e.editorLayerOwner===r&&(l=l.filter(function(e){return e!==h.Il}),r=void 0),t.events.off(c,h.Il,n._onEditorLayerClick)),t.setLayers((0,h.c8)(l,n.props.ymaps3.EventBlockerLayer,n.props.config))},n._onEditorLayerClick=function(e,t){n.props.onPointAdd(t.coordinates,n.props.points.length)},n._updatePoint=function(e,t,r){n.props.onPointUpdate&&void 0!==t&&n.props.onPointUpdate(e,t,!!r)},n._onMouseMove=function(e){var t,r=n.props.map.convertScreenToWorldCoordinates(e).coordinates;if(n.props.onLineMouseMove&&n.props.onLineMouseMove(e,{coordinates:r}),n.props.polyLineCoordinates&&n.props.isActive&&void 0===n.state.draggingPoint){var o=(t=Math).max.apply(t,(0,i._)(n.props.lineStyle.stroke.map(function(e){return e.width||0}))),a=(0,d.x)(n.props.polyLineCoordinates,r,o,n.props.map.zoom,!0);a&&"point"in a&&n.setState({previewPoint:a})}},n._onNewPointDragStart=function(){var e=n.state,t=n.props;if(e.previewPoint){var r=function(e,t,n){for(var r=0,o=0;o<e.length-1;o++){var i=t[r];if(i&&(0,p.J)(i,e[o],15e-7)&&(r+=1),o===n)break}return r}(t.polyLineCoordinates,t.points,e.previewPoint.segmentIndex)||void 0;void 0!==r&&e.previewPoint.point&&(n.setState({draggingPoint:{index:r,point:e.previewPoint.point}}),t.onPointAdd(e.previewPoint.point,r))}},n._onExistingPointDragStart=function(e){n.props.points[e]&&n.setState({draggingPoint:{index:e,point:n.props.points[e]}})},n._onDragMove=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:{index:r.draggingPoint.index,point:t}}),n._updatePoint(t,r.draggingPoint.index))},n._onDragEnd=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:void 0,previewPoint:void 0}),n._updatePoint(t,r.draggingPoint.index,!0))},n._onPointDoubleClick=function(e){n.props.isActive&&n.props.onPointRemove&&n.props.onPointRemove(e)},n._onPointClick=function(e){n.props.onPointClick&&n.props.onPointClick(e)},n._renderDraggingOrPreviewPoint=function(){var e=n.state,t=n.props,r=e.draggingPoint||e.previewPoint;if(!r||!t.isActive||t.config.uatraits.isMobile)return null;var o="segmentIndex"in r;return a.createElement(u.Z,{coordinates:r.point,onDragStart:n._onNewPointDragStart,onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onMouseMove:n._onMouseMove,onMouseLeave:t.onPreviewPointMouseLeave,onClick:t.onPreviewPointClick,zIndex:o?g:_,draggable:t.isActive,dataSourceId:h.UZ[t.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0},o?a.createElement("div",{className:v("preview-point")},t.previewPointElement):n.props.renderPointElement("index"in r&&r.index||0))},n._renderPoints=function(){return n.props.points.map(function(e,t){return a.createElement(u.Z,{key:t,onDragStart:function(){return n._onExistingPointDragStart(t)},onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onDoubleClick:function(){return n._onPointDoubleClick(t)},onClick:function(){return n._onPointClick(t)},coordinates:e,draggable:n.props.isActive,zIndex:y,dataSourceId:h.UZ[n.props.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0,nonInteractive:!n.props.isActive},n.state.draggingPoint&&n.state.draggingPoint.index===t?null:n.props.renderPointElement(t))})},n.state={},n}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._setLayers()},n.componentDidUpdate=function(e){e.editorLayerOwner!==this.props.editorLayerOwner&&this._setLayers(e)},n.render=function(){var e=this.props.editorLayerOwner?"EDITOR_GRAPHICS":"RASTER_GRAPHICS";return a.createElement(a.Fragment,null,this._renderDraggingOrPreviewPoint(),this._renderPoints(),a.createElement(c.Z,{drawingStyle:this.props.lineStyle,geometry:{type:"LineString",coordinates:this.props.polyLineCoordinates},onMouseMove:this._onMouseMove,onMouseEnter:this.props.onLineMouseEnter,onMouseLeave:this.props.onLineMouseLeave,dataSourceId:h.UZ[e],onClick:this.props.onPreviewPointClick}))},t}(a.Component);let E=(0,s.ZP)({shouldWait:!0})((0,l.ZP)(b))},2574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,h:()=>a});var r=n(8007),o=n(7363),i=n(8597),a={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onFastClick:"fastclick",onTouchCancel:"touchcancel",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onClick:"click",onDoubleClick:"dblclick",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove"},s={onUpdate:"update",onCopyrightsChange:"copyrightsChange",onResize:"resize",onZoomRangeChange:"zoomRangeChange",onReady:"ready",onTile3dChanged:"tile3dChanged",onTile3dVisibilityChange:"tile3dVisibilityChange",onVisibleObjectsChanged:"visibleObjectsChanged",onIndoorPlansChanged:"indoorPlansChanged",onVectorError:"vectorError",onVectorStart:"vectorStart",onZoomRoundingChanged:"zoomRoundingChanged",onMainEngineChanged:"mainEngineChanged"},l=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._applyMapHandlers=function(e,t,n){Object.keys(s).forEach(function(r){(!n||!t||n[r]!==t[r])&&(n&&n[r]&&e.offSingle(s[r],n[r]),t&&t[r]&&e.on(s[r],t[r]))})},t._applyDomHandlers=function(e,t,n){Object.keys(a).forEach(function(r){(!n||!t||n[r]!==t[r]||n.layer!==t.layer)&&(n&&n[r]&&e.events.off(a[r],n.layer||"none",n[r]),t&&t[r]&&e.events.on(a[r],t.layer||"none",t[r]))})},t._onInertiaStart=function(e){t.props.onInertiaStart&&t.props.onInertiaStart(t.props.map.calculateCenter(e.targetPositionWcs))},t._onDragStart=function(){t.props.onDragStart&&t.props.onDragStart()},t._onDragEnd=function(){t.props.onDragEnd&&t.props.onDragEnd()},t._onContainerTouchMove=function(e){t.props.onContainerTouchMove&&t.props.onContainerTouchMove(c(e))},t._onContainerPointerMove=function(e){t.props.onContainerPointerMove&&t.props.onContainerPointerMove(c(e))},t._onActionStart=function(e){t.props.onActionStart&&t.props.onActionStart(e)},t._onActionEnd=function(e){t.props.onActionEnd&&t.props.onActionEnd(e)},t}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.map;this._applyMapHandlers(e,this.props),this._applyDomHandlers(e,this.props),e.behaviors.on("actionStart",this._onActionStart),e.behaviors.on("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.on("inertiaStart",this._onInertiaStart),e.behaviors.drag.on("dragStart",this._onDragStart),e.behaviors.drag.on("dragEnd",this._onDragEnd)),e.container.addEventListener("touchmove",this._onContainerTouchMove),e.container.addEventListener("pointermove",this._onContainerPointerMove)},n.componentDidUpdate=function(e){this._applyMapHandlers(this.props.map,this.props,e),this._applyDomHandlers(this.props.map,this.props,e)},n.componentWillUnmount=function(){var e=this.props.map;this._applyMapHandlers(e,void 0,this.props),this._applyDomHandlers(e,void 0,this.props),e.behaviors.offSingle("actionStart",this._onActionStart),e.behaviors.offSingle("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.offSingle("inertiaStart",this._onInertiaStart),e.behaviors.drag.offSingle("dragStart",this._onDragStart),e.behaviors.drag.offSingle("dragEnd",this._onDragEnd)),e.container.removeEventListener("touchmove",this._onContainerTouchMove),e.container.removeEventListener("pointermove",this._onContainerPointerMove)},n.render=function(){return null},t}(o.PureComponent);function c(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return[t.clientX,t.clientY]}return[e.clientX,e.clientY]}let u=(0,i.ZP)({shouldWait:!0})(l)},6653:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(2267),o=n(4788),i=n(8007),a=n(7363),s=n(1533),l=n(5877),c=n.n(l),u=n(4748),d=n(8597),p=n(7313),m=n(9870),f=n(8155),h=n(1336),v=(0,u.Z)("map-placemark"),g=function(){},_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._onDragStart=function(){n.setState({isDragging:!0}),n._fireInteractionEvent()},n._fireInteractionEvent=function(){var e,t,n,r;e=window,t="map-placemark-interaction",void 0===n&&(n={bubbles:!0,cancelable:!0}),"function"==typeof Event?r=new Event(t,n):(r=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),e.dispatchEvent(r)},n._updateCursor=function(){var e=n.state.isDragging?"grabbing":n.props.cursor?n.props.cursor:n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default";n._container.style.cursor=e},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(r){var o=r.object,i=r.newGeometry;if(o&&"Feature"===o.type&&o.id===n._marker.feature.id){var a=n.props.map.projection.fromWorldCoordinates(i.coordinates);t[e]({coordinates:a})}})})},n._onDragEnd=function(e){var t=e.object,r=e.newGeometry;n.setState({isDragging:!1}),t&&"Feature"===t.type&&t.id===n._marker.feature.id&&(n._marker.feature.geometry.coordinates=n.props.map.projection.fromWorldCoordinates(r.coordinates))},n._onClick=function(e){e.stopPropagation(),n._fireInteractionEvent();var t=n.props,r=t.onClick||g,o=t.onFastClick||g,i=t.onDoubleClick||g;n._clickTimer?(i(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout(function(){r(),n._clickTimer=void 0},300))},n.state={isDragging:!1},n._container.className=v(),n._marker={feature:{type:"Feature",id:c().v4(),draggable:t.draggable,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents,geometry:{type:"Point",coordinates:t.coordinates}},style:{zIndex:t.zIndex||p.I.default,element:n._container}},n._mapEventHandlers=n.props.map.dragger.group(),n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._updateCursor(),this._addMapEventHandlers(e),e.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style),this._mapEventHandlers.on("dragStart",this._onDragStart),this._mapEventHandlers.on("dragEnd",this._onDragEnd)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeFeatureById(this._dataSourceId,this._marker.feature.id)),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e,t){var n=e.dataSourceId?e.dataSourceId:m.UZ.DEFAULT_MARKERS;n!==this._dataSourceId&&(this.props.map.removeFeatureById(n,this._marker.feature.id),this.props.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style));var r=this.props,i=!1;r.coordinates!==e.coordinates&&(i=!0,this._marker.feature.geometry.coordinates=r.coordinates),e.draggable!==r.draggable&&(i=!0,this._marker.feature.draggable=r.draggable),e.zIndex!==r.zIndex&&(i=!0,this._marker.style.zIndex=r.zIndex||p.I.default),e.disableRoundCoordinates!==r.disableRoundCoordinates&&(i=!0,this._marker.feature.disableRoundCoordinates=r.disableRoundCoordinates||!1),i&&this.props.map.upsertFeature(this._dataSourceId,(0,o._)({},this._marker.feature),(0,o._)({},this._marker.style)),(r.onDragStart!==e.onDragStart||r.onDragMove!==e.onDragMove||r.onDragEnd!==e.onDragEnd)&&(this._mapEventHandlers.offAll(),this._addMapEventHandlers(r)),(e.draggable!==r.draggable||e.cursor!==r.cursor||e.onClick!==r.onClick||t.isDragging!==this.state.isDragging)&&this._updateCursor()},n.render=function(){var e=this,t=this.props,n=a.createElement("div",{dir:t.config.isRtl?"rtl":"ltr","aria-hidden":!0,className:v("wrapper",{"non-interactive":t.nonInteractive}),onClick:this._onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseMove:t.onMouseMove},this.props.onMouseLeave&&this.props.shoulTrackOutsideClick?a.createElement(f.Z,{callback:function(){return null==e.props.onMouseLeave?void 0:e.props.onMouseLeave.call(e.props)}},t.children):t.children);return s.createPortal(n,this._container)},(0,r._)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||m.UZ.DEFAULT_MARKERS}}]),t}(a.PureComponent);let y=(0,h.ZP)((0,d.ZP)({shouldWait:!0})(_))},4054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(8007),o=n(1640),i=n(1912),a=n(7363),s=n(7806),l=n(9657),c=n(1421),u=n(8067),d=n(5900),p=n(2690),m=n(309),f=n(6897),h=n(1260),v=n(2241);s.d3,Math.PI;let g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getGeodesicGeometry=function(){for(var e=n.props,t=[],r=0;r<=2*Math.PI;r+=Math.PI/40){var a=(0,l.S)(e.center,[Math.cos(r),Math.sin(r)],e.radius).endPoint;t.push(a)}var s=(0,o._)(t),d=s[0],p=s.slice(1),m=(0,i._)(p).concat([d]).reduce(function(e,t){return(0,i._)(e).concat((0,i._)((0,c.b)([e.pop(),t])))},[d]),f=m.reduce(function(e,t){var n=t[0]>90||t[0]<-90?Math.round(t[0]/360):0;return e[n]++,e},{"-1":0,0:0,1:0}),h=0;f["-1"]>f[0]&&(h=360),f[1]>f[0]&&(h=-360),h&&(m=m.map(function(e){return[e[0]+h,e[1]]}));var v=[m[0][0],e.center[1]>0?90:-90];return(0,u.t)(v,e.center)<=e.radius&&(m.unshift(v),m.push(v)),m},n._getPixelGeometry=function(){for(var e=n.props,t=(0,d.f)(e.center,2),r=(0,l.S)(e.center,[-1,0],e.radius).endPoint,o=(0,p.g)((0,d.f)(r,2),t),i=[],a=0;a<=2*Math.PI;a+=Math.PI/40){var s=[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o];i.push((0,m.W)(s,2))}return i},n._getGeometry=function(){var e=n.props;e.radius;var t=e.geodesic?n._getGeodesicGeometry():n._getPixelGeometry();return{type:"Polygon",coordinates:[(0,v.g)(t)]}},n.state={geometry:n._getGeometry()},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;(0,f.J)(t.center,e.center)&&t.radius===e.radius||this.setState({geometry:this._getGeometry()})},n.render=function(){return a.createElement(h.Z,{geometry:this.state.geometry,drawingStyle:this.props.drawingStyle,dataSourceId:this.props.dataSourceId})},t}(a.PureComponent)},2751:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(8007),o=n(7363),i=n(4748),a=n(1336),s=n(8188),l=n(5900),c=n(309),u=n(8067),d=n(5569),p=n(5645),m=(0,i.Z)("map-scale-line"),f=function(e){function t(){return e.apply(this,arguments)}return(0,r._)(t,e),t.prototype.render=function(){var e,t,n,r,i,a,p,f,h,v,g=this.props,_=g.config.uatraits.isMobile,y=_?80:75,b=(e={center:g.center,zoom:g.zoom,dimension:_?"height":"width",maxSize:y},n=(t=(0,s._)((0,l.f)(e.center,e.zoom),2))[0],r=t[1],i="width"===e.dimension?1:0,a="height"===e.dimension?1:0,p=(0,c.W)([n-i*e.maxSize/2,r-a*e.maxSize/2],e.zoom),f=(0,c.W)([n+i*e.maxSize/2,r+a*e.maxSize/2],e.zoom),h=(0,u.t)(p,f),v=d.Lr(h,1),{size:Math.abs(h)>1e-7?Math.round(v*e.maxSize/h):e.maxSize,distance:v}),E=b.size,w=b.distance,S={};return _?S.height=y+"px":S.width=E+"px",o.createElement("div",{ref:this.props.forwardedRef,className:m(),style:S,"aria-hidden":!0},o.createElement("div",{className:m("label")},d.Bb(w)),o.createElement("div",{className:m("line")}))},t}(o.PureComponent);let h=(0,p.Z)((0,a.ZP)(f))},3109:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7363),o=n(6376),i={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},a=i.pmbl;let s=function(e){return e.points?r.createElement(r.Fragment,null,e.points.map(function(e,t){var n=e.coordinates,s=e.color;return r.createElement(o.Z,{key:t+"_"+n.join(),coordinates:n,color:s&&s in i?i[s]:a,nonInteractive:!0,comma:!0})})):null}},4185:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(8007),o=n(7363),i=n(4960),a=n(9111),s=n(4748),l=n(5846),c=n(2574),u=n(8597),d=n(9870),p=n(9394),m=n(8898),f=n(4953),h=n(1336),v=n(6657),g=(0,l.Z)({resolved:{},chunkName:function(){return"tooltip"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("tooltip").then(n.bind(n,594))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 594}}),_=(0,s.Z)("map-tilt-rotate-control"),y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._controlRef=o.createRef(),n._tooltipTargetRef=o.createRef(),n._analyticsCompassRef=o.createRef(),n._analyticsTiltRef=o.createRef(),n._isClick=!1,n._startAzimuth=0,n._isMovementEnabled=!0,n._prevTilt=0,n._recalculateCenter=function(){if(n._controlRef.current){var e=n._controlRef.current.getBoundingClientRect(),t=e.x,r=e.y,o=e.height,i=e.width;n._controlCenterPosition={x:t+i/2,y:r+o/2}}},n._onMapTilt=function(){var e=n.props.map.tilt;e!==n._prevTilt&&(n._prevTilt=e,n.setState({showTooltip:!0}))},n._onMapUpdate=function(){if(n._onMapTiltDebounced(),!n._isClick&&(n.props.map.tilt!==n.state.tilt||n.props.map.azimuth!==n.state.azimuth)){var e;null==(e=n._tooltipTargetRef.current)||e.click()}var t=n._prevZoom,r=n.props.map.zoom,o=n.state.tilt;r<m.Hm&&t&&t>=m.Hm&&o!==n.props.map.tiltRange.min&&(0,m.AK)(n.props.map),n._prevZoom=n.props.map.zoom,n.setState({azimuth:n.props.map.azimuth,tilt:n.props.map.tilt,isTiltDisabled:n.props.map.zoom<m.Hm})},n._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._addRotateEventListeners=function(){window.addEventListener("mousemove",n._onRotateMove),window.addEventListener("mouseup",n._onRotateEnd)},n._removeRotateEventListeners=function(){window.removeEventListener("mousemove",n._onRotateMove),window.removeEventListener("mouseup",n._onRotateEnd)},n._addTiltEventListeners=function(){window.addEventListener("mousemove",n._onTiltMove),window.addEventListener("mouseup",n._onTiltEnd)},n._removeTiltEventListeners=function(){window.removeEventListener("mousemove",n._onTiltMove),window.removeEventListener("mouseup",n._onTiltEnd)},n._onRotateStart=function(e){if(0===e.button&&n._isMovementEnabled){n._isClick=!0,n.setState({isMove:!0});var t=n._controlRef.current.getBoundingClientRect(),r=t.x,o=t.y,i=t.height,a=t.width;n._controlCenterPosition={x:r+a/2,y:o+i/2},n._startMovePosition={x:e.clientX,y:e.clientY},n._startAzimuth=n.state.azimuth,n._recalculateCenter(),n._addRotateEventListeners()}},n._onRotateMove=function(e){var t=n._controlCenterPosition,r=t.x,o=t.y,i=n._startMovePosition,a=Math.atan2(e.pageY-o,e.pageX-r)-Math.atan2(i.y-o,i.x-r);n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n._startAzimuth+a,tilt:n.props.map.tilt})},n._onRotateEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeRotateEventListeners(),!n._isClick){var e;null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}},n._toggleMapRotate=function(){n._isClick&&n._isMovementEnabled&&(v.p_(),n._isMovementEnabled=!1,(0,m.fL)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsCompassRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.azimuth),rotation_angle_diff:(0,i.Z)(n.props.map.azimuth-n._startAzimuth)})}}))},n._onTiltStart=function(e){0===e.button&&n._isMovementEnabled&&(n._isClick=!0,n.setState({isMove:!0}),n._startMovePosition={x:e.clientX,y:e.clientY},n._startTilt=n.props.map.tilt,n._addTiltEventListeners())},n._onTiltMove=function(e){var t=n._startMovePosition.y-e.clientY;if(!(3>Math.abs(t))){var r=Math.PI*t/n.props.map.size.y;n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n.props.map.azimuth,tilt:n._startTilt+r})}},n._onTiltEnd=function(){if(n.setState({showTooltip:!0,isMove:!1}),n._removeTiltEventListeners(),!n._isClick){var e;null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"drag",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}},n._toggleMapTilt=function(){n._isClick&&n._isMovementEnabled&&(n._isMovementEnabled=!1,(0,m.AK)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null==(e=n._analyticsTiltRef.current)||e.changeState({action_type:"click",rotation_angle_state:(0,i.Z)(n.props.map.tilt),rotation_angle_diff:(0,i.Z)(n.props.map.tilt-n._startTilt)})}}))},n._isTiltRotateAllowed=function(){var e=n.state.isVector,t=n.props.map.getLayers().topRasterLayers;return e&&t.every(function(e){return!d.Iw.includes(e.split(":")[0])})},n._renderTooltip=function(){return n.state.showTooltip?o.createElement(g,{id:"tilt-rotate",targetRef:n._tooltipTargetRef,title:"Наклон карты",text:"Нажмите 2D, чтобы изменить угол обзора",showArrow:!0,position:"left",offset:{main:10,side:0},hideForeverOnTargetClick:!0,ignoreCloseButtonClick:!0,closeOnOutsideClick:!0,renderControls:function(e){return o.createElement("div",{"aria-hidden":!0,className:_("tooltip-button"),onClick:e},"Понятно")},checkTargetVisibility:!1}):null},n.state={azimuth:t.map.azimuth,tilt:t.map.tilt,isMove:!1,showTooltip:!1,isTiltDisabled:t.map.zoom<m.Hm,isVector:"vector"===t.map.getEffectiveMode()},n._startTilt=t.map.tiltRange.min,n._onMapTiltDebounced=(0,a.Z)(n._onMapTilt,m.zn),n}(0,r._)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._removeRotateEventListeners(),this._removeTiltEventListeners(),this._onMapTiltDebounced.cancel()},n.render=function(){var e,t=this.state,n=this._isTiltRotateAllowed(),r=t.azimuth,i=t.tilt,a=t.isMove,s=t.isTiltDisabled,l=this.props.map.tiltRange.min;return e=s?"Увеличьте масштаб, чтобы наклонить карту":i!==l?"Убрать наклон карты":"Наклонить карту",o.createElement(o.Fragment,null,n?o.createElement(o.Fragment,null,o.createElement("div",{className:_({"in-action":a}),ref:this._controlRef,"aria-hidden":!0},o.createElement(f.ZP,{name:"compass",nodeRef:this._analyticsCompassRef},o.createElement(p.Z,{text:0!==r?"Вернуть север сверху":"Повернуть карту",position:"left",isAir:!0,delay:500,isDisabled:a},o.createElement("div",null,o.createElement("div",{"aria-hidden":!0,className:_("ring"),style:{transform:"rotate("+r+"rad)"},onClick:this._toggleMapRotate,onMouseDown:this._onRotateStart})))),o.createElement(f.ZP,{name:"tilt_control",nodeRef:this._analyticsTiltRef},o.createElement(p.Z,{text:e,position:"left",isAir:!0,delay:500,isDisabled:a,offset:{main:12,side:0}},o.createElement("div",{className:_("tilt-wrapper"),ref:this._tooltipTargetRef},o.createElement("div",{"aria-hidden":!0,className:_("tilt",{tilted:i!==l,disabled:s}),style:{transform:"rotateX("+i+"rad)"},onClick:s?void 0:this._toggleMapTilt,onMouseDown:s?void 0:this._onTiltStart},i===l?"3D":"2D"))))),this._renderTooltip()):null,o.createElement(c.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.Component);let b=(0,u.ZP)({shouldWait:!0})((0,h.ZP)(y))},1111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r,o=n(8007),i=n(7363),a=n(8597),s=function(e){function t(){return e.apply(this,arguments)}(0,o._)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;r||(r=new(function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._uris=[],t}(0,o._)(t,e);var n=t.prototype;return n.test=function(e){var t=e.metadata,n=t&&t.get("uri");return!n||!this._uris.includes(n)},n.add=function(e){this._uris.push(e),this._emit("update")},n.remove=function(e){this._uris=this._uris.filter(function(t){return t!==e}),this._emit("update")},t}(e.ymaps3.eventify().with())),e.map.addObjectFilter(r)),r.add(this.props.uri)},n.componentDidUpdate=function(e){this.props.uri!==e.uri&&(r.remove(e.uri),r.add(this.props.uri))},n.componentWillUnmount=function(){r.remove(this.props.uri)},n.render=function(){return null},t}(i.Component);let l=(0,a.ZP)({shouldWait:!0})(s)},2584:(e,t,n)=>{"use strict";n.d(t,{V:()=>r,x:()=>o});var r={bus:{normal:"bus-16"},minibus:{normal:"minibus-16"},tramway:{normal:"tram-16"},trolleybus:{normal:"trolley-16"},water:{normal:"ship-16"},underground:{normal:"subway-icon-fallback-16"},cable:{normal:"cableway-16-flip"},aero:{normal:"aero-16-flip"},aeroexpress:{normal:"aeroexpress-16"},funicular:{normal:"funicular-16-flip"},train:{normal:"train-16"},suburban:{normal:"train-16"},suburban_express:{normal:"train-16"},railway:{normal:"train-16"},fallback:{normal:"unknown-16-flip"}},o={fallback:{small:"subway-fallback-16",normal:"subway-fallback-24"},adana_metro:{small:"subway-adana-16",normal:"subway-adana-24"},almaty_metro:{small:"subway-almaty-16",normal:"subway-almaty-24"},amsterdam_metro:{},ankara_metro:{small:"subway-ankara-16",normal:"subway-ankara-24"},ankaray:{small:"subway-ankaray-16",normal:"subway-ankaray-24"},athens_metro:{small:"subway-athens-16",normal:"subway-athens-24"},baku_metro:{small:"subway-baku-16",normal:"subway-baku-24"},barcelona_fgc:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},barcelona_tmb:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},beijing_metro:{},berlin_ubahn:{small:"subway-berlin-16",normal:"subway-de-ubahn-24"},brussels_metro:{},bucharest_metro:{small:"subway-bucharest-16",normal:"subway-bucharest-24"},budapest_metro:{small:"subway-budapest-16",normal:"subway-budapest-24"},buenos_aires_metro:{},bursaray:{small:"subway-bursa-16",normal:"subway-bursa-24"},cairo_metro:{},copenhagen_metro:{small:"subway-copenhagen-metro-16",normal:"subway-copenhagen-24"},dnipro_metro:{small:"subway-dnepropetrovsk-16",normal:"subway-dnepropetrovsk-24"},dubai_metro:{small:"uae-subway-16",normal:"uae-subway-24"},dubai_monorail:{small:"uae-monorail-16",normal:"uae-monorail-24"},dubai_tram:{small:"uae-tram-16",normal:"uae-tram-24"},ekaterinburg_metro:{small:"subway-ekb-16",normal:"subway-ekb-24"},genoa_metro:{},glasgow_subway:{},hamburg_ubahn:{},harbin_metro:{},helsinki_metro:{small:"subway-helsinki-16",normal:"subway-helsinki-24"},hong_kong_mtr:{},istanbul_funicular:{},istanbul_marmaray:{small:"subway-istanbul-marmaray-16",normal:"subway-istanbul-marmaray-24"},istanbul_metro:{small:"subway-istanbul-16",normal:"subway-istanbul-24"},istanbul_metrobus:{small:"subway-bus-istanbul-16",normal:"subway-bus-istanbul-24"},izmir_metro:{small:"subway-izmir-16",normal:"subway-izmir-24"},kazan_metro:{small:"subway-kazan-16",normal:"subway-kazan-24"},kharkiv_metro:{small:"subway-kharkov-16",normal:"subway-kharkov-24"},kiev_metro:{small:"subway-kiev-16",normal:"subway-kiev-24"},kryvyirih_metrotram:{},lille_metro:{},lisbon_metro:{small:"subway-lisboa-16",normal:"subway-lisboa-24"},london_dlr:{small:"subway-london-16",normal:"subway-london-underground-24"},london_underground:{small:"subway-london-16",normal:"subway-london-underground-24"},lyon_metro:{},madrid_metro:{small:"subway-madrid-16",normal:"subway-madrid-24"},mexico_city_metro:{},milan_metro:{},minsk_metro:{small:"subway-minsk-16",normal:"subway-minsk-24"},moscow_mcd:{small:"subway-msk-16",normal:"subway-msk-24"},moscow_metro:{small:"subway-msk-16",normal:"subway-msk-24"},munich_ubahn:{},naples_metro:{},newathos_metro:{},nizhnynovgorod_metro:{small:"subway-nn-16",normal:"subway-nn-24"},novosibirsk_metro:{small:"subway-nsk-16",normal:"subway-nsk-24"},nuremberg_ubahn:{},oslo_metro:{small:"subway-oslo-16",normal:"subway-oslo-24"},paris_metro:{small:"subway-paris-16",normal:"subway-paris-metro-24"},paris_rer:{small:"subway-paris-rer-16",normal:"subway-paris-rer-24"},paris_tramway:{small:"subway-paris-tramway-16",normal:"subway-paris-tramway-24"},prague_metro:{small:"subway-prague-metro-16",normal:"subway-prague-24"},pyongyang_metro:{},rome_metro:{small:"subway-roma-16",normal:"subway-roma-24"},sanfrancisco_metro:{small:"subway-san-francisco-metro-16",normal:"subway-san-francisco-metro-24"},samara_metro:{small:"subway-samara-16",normal:"subway-samara-24"},seville_metro:{},singapore_mrt:{},sofia_metro:{small:"subway-sofia-metro-16",normal:"subway-sofia-metro-24"},spb_metro:{small:"subway-spb-16",normal:"subway-spb-24"},stockholm_metro:{small:"subway-stockholm-16",normal:"subway-stockholm-24"},tashkent_metro:{small:"subway-tashkent-16",normal:"subway-tashkent-24"},tbilisi_metro:{small:"subway-tbilisi-16",normal:"subway-tbilisi-24"},toulouse_metro:{},turin_metro:{},vienna_ubahn:{small:"subway-wein-16",normal:"subway-wein-24"},volgograd_metrotram:{small:"subway-tram-volgograd-16",normal:"subway-volgograd-tram-24"},warsaw_metro:{small:"subway-warsaw-metro-16",normal:"subway-warsaw-24"},washington_metro:{},yerevan_metro:{small:"subway-erevan-16",normal:"subway-erevan-24"}}},3705:(e,t,n)=>{"use strict";n.d(t,{Yu:()=>s,xP:()=>l,sN:()=>c,CA:()=>u,n:()=>d});var r=n(4788),o=n(5164),i=n(9705),a={cameraDirection:"front"};function s(e,t){var n=e.type,i=e.featureId,s=e.graphType,l=(0,r._)({featureId:i,types:[n],graphType:s},a);return(0,o.Z)("mrc",{query:l},t)}function l(e,t){return(0,o.Z)("mrc/near",{query:{ll:(0,i.s)(e.ll),z:e.z,graphType:e.graphType}},t)}function c(e,t){var n=e.ll,s=e.dir,l=e.graphType;return(0,o.Z)("mrc/directions",{query:(0,r._)({},a,{ll:(0,i.s)(n),dir:s,graphType:l})},t).catch(function(){return null})}function u(e,t){return(0,o.Z)("mrc/track/chunk",{body:{chunkId:e.chunkId}},t)}function d(e,t){return(0,o.Z)("mrc/photo/batch",{body:{ids:e}},t).catch(function(){return null})}},2276:(e,t,n)=>{"use strict";n.d(t,{qT:()=>i,Fg:()=>a});var r=n(5877),o=n.n(r);function i(e,t){return{uuid:o()(),type:"FeatureCollection",features:e,polyline:t}}function a(e,t){var n,r,o,i;return o=(n=t.polyline)[(r=e.polylinePosition).segmentIndex],i=n[r.segmentIndex+1],(o&&i?[o[0]*(1-r.segmentPosition)+i[0]*r.segmentPosition,o[1]*(1-r.segmentPosition)+i[1]*r.segmentPosition]:null)||t.polyline[t.polyline.length-1]||[0,0]}},3418:(e,t,n)=>{"use strict";n.d(t,{Kc:()=>a});var r=n(5766),o=n(646),i={};function a(e,t,n){var r,i,a;return e.uri&&e.coords?(r=e.uri,i=e.coords,l(r,t,n).then(function(e){return!e&&i?s(i,t,n):e})):e.uri?l(e.uri,t,n):e.value&&!e.coords?c(a=e.value,function(){return o.Z.fetch({type:["geo"],text:a,count:1,origin:n},t)}):e.coords?s(e.coords,t,n):Promise.resolve(void 0)}function s(e,t,n){return c(e.join(","),function(){return o.Z.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:n},t)})}function l(e,t,n){return c(e,function(){return o.Z.fetch({uri:e,count:1,origin:n},t)})}function c(e,t){return i[e]?Promise.resolve(i[e]):t().then(function(e){return e.resultsCount>0?e.items[0]:void 0}).then(function(t){return t&&(i[e]=t,Object.keys(i).length>100&&(i=(0,r._)({},e,i[e]))),t})}},4061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(8007),o=n(7363),i=n(1336),a=n(1260),s=n(7313),l=n(4054),c=n(4953),u=n(2869),d=(n(4788),n(5164));n(2467),n(5807),n(770),n(8380);let p={fetchServiceZone:function(e,t){return(0,d.Z)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale,ugc_params:t.query.ugc_params}},t)}};var m={fill:"#3cb300",fillOpacity:.15,stroke:[{color:"#3cb300",opacity:1,width:2}],interactive:!1,zIndex:s.I.minimum,simplificationRate:0},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadGeometry=function(){n.setState({geometry:void 0});var e=n.props.result.onlineProperties;if(e&&e.toponymIds&&!e.serviceGeometry){null==(t=n._loadAction)||t.cancel();var t,r=n.props;n._loadAction=u.Z.create(p.fetchServiceZone(r.result.id,r.config),{success:function(e){n.setState({geometry:e})}})}},n._renderPolygon=function(e,t){return o.createElement(a.Z,{key:t,geometry:{type:"Polygon",coordinates:e},drawingStyle:m})},n._renderRadius=function(e){var t=n.props.result.coordinates;return o.createElement(c.ZP,{name:"zone"},o.createElement(l.Z,{center:t,radius:e,drawingStyle:m}))},n.state={},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadGeometry()},n.componentDidUpdate=function(e){e.result.id!==this.props.result.id&&this._loadGeometry()},n.render=function(){var e=this.props.result.onlineProperties||{},t=e.serviceGeometry,n=e.radius,r=this.state.geometry||t;return n?this._renderRadius(1e3*n):r&&r.length>0?r.map(this._renderPolygon):null},t}(o.Component);let h=(0,i.ZP)(f)},646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(4788),o=n(224),i=n(1912),a=n(7855),s=n(9651),l=n(585),c=n(6009),u=n(7226);let d=function(e,t,n){if(!(0,u.Z)(n))return!1;var r=typeof t;return("number"==r?!!((0,l.Z)(n)&&(0,c.Z)(t,n.length)):"string"==r&&t in n)&&(0,s.Z)(n[t],e)};var p=n(620),m=Math.ceil,f=Math.max;let h=function(e,t,n){t=(n?d(e,t,n):void 0===t)?1:f((0,p.Z)(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,s=Array(m(r/t));o<r;)s[i++]=(0,a.Z)(e,o,o+=t);return s};var v=n(7961),g=n(3841),_=n(4960),y=n(9705),b=n(8848),E=n(5164),w=n(1354),S=n(4430),C="",R={fetch:function(e,t,n){void 0===n&&(n={});var r=n.useSlowHandler?"slow/search":"search",o=k(e,t);return(0,E.Z)(r,{query:o},t).then(function(e){C=e.requestId;var t=(0,S.W)();return t&&t.createChild("search_response",{origin:o.origin,reqid:e.requestId,serpid:e.requestSerpId,suggest_reqid:e.suggestRequestId}).attach().detach(),e})},batchFetch:function(e,t){return h(e,15).reduce(function(e,n){return e.then(function(e){var r={requestQueries:n.map(function(e){return k(e,t)})};return(0,E.Z)("search/batch",{body:r},t).then(function(e){var t,n=null==(t=e.find(function(e){return!!e}))?void 0:t.requestId;return n&&(C=n),e}).catch(function(){return n.map(function(){return null})}).then(function(t){return(0,i._)(e).concat([t])})})},Promise.resolve([])).then(function(e){return(0,v.Z)(e)})},fetchSearchResult:function(e,t,n){if("poi"===e.from){if(e.uri)return R.loadPoiByUri(e.uri,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){return(0,r._)({},t,{items:t.items.map(function(t,n){return(0,r._)({},t,{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return R.loadPoiByCoordinates(e.coordinates,t,(0,r._)({},n||{},{origin:e.origin})).then(function(t){if(w.br(e.hotspotProperties)){var n=t.items[0],r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri};t.items=[r]}return t})}if("whatshere"===e.from)return R.loadWhatshere(e,t);var o=(0,r._)({},e,{count:1,searchType:"TEXT"});return o.uri&&(o.mode="uri"),R.fetch(o,t)},prepareChainSearchRequest:function(e,t){return R.fetch({count:1,kind:"locality",text:(0,y.s)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var o,i,a,s,l,c=(o=r[0][1],i=[r[1][0]-r[0][0],r[1][1]-o],l=2*(Math.atan(Math.exp(.5*Math.log(Math.max((-(a=Math.tan((0,g.I)(o+90)/2))*a-a*(s=Math.tan((0,g.I)(i[1])/2)))/(a*s-1),0))))-.25*Math.PI),{center:[(r[0][0]+r[1][0])/2,(0,_.Z)(l)],span:i});n.center=c.center,n.span=c.span}return n})},loadPoiByCoordinates:function(e,t,n){return R.fetch({text:(0,y.s)(e,{reverse:!0}),count:1,origin:n.origin,clientId:n.clientId,snippets:P(t)},t)},loadPoiByUri:function(e,t,n){return R.fetch({mode:"uri",uri:e,count:1,origin:n.origin,clientId:n.clientId,snippets:P(t)},t)},loadWhatshere:function(e,t){var n=e.origin,r=(0,o._)(e,["origin"]);return R.fetch({pin:!0,text:(0,y.s)(r.coordinates,{reverse:!0}),zoom:r.zoom,span:[.001,.001],count:1,origin:n||"whatshere",addBuildingGeometry:e.addGeometry},t).then(function(e){var r,o=e.items[0];return o?("poi"!==n||t.uatraits.isMobile||(o.displayCoordinates=o.coordinates),t.uatraits.isMobile&&(null==(r=e.exactResult)?void 0:r.kind)==="house"&&(o.displayCoordinates=e.exactResult.coordinates),e):null}).catch(function(){return null})}};function P(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function k(e,t){var n=e.clientId||(t.uatraits.isMobile?"maps-m":"maps"),o=e.origin?n+"-"+e.origin:n,i={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:o,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,business_empty_filter:e.emptyFilters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch,menuParams:t.experiments.menuParams,advert_page_id:e.advert_page_id,pron:e.pron};return e.addBuildingGeometry&&(i.search_geometry="2"),e.sortOrigin&&(i.sort_origin=(0,y.s)(e.sortOrigin)),e.center&&(i.ll=(0,y.s)(e.center)),e.span&&(i.spn=(0,y.s)(e.span)),e.bbox&&(i.bbox=e.bbox.join("~")),e.snippets?i.snippets=e.snippets:i.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(i.snippets=i.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(i.snippets=i.snippets.concat("pin_priority/1.x")),t.experiments.ui.showRelatedPlacesAdvertOnMap&&(i.snippets=i.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e}),i.snippets=i.snippets.concat("related_places/1.x")),i.snippets=i.snippets.join(),e.direct&&(i=(0,r._)({},i,t.advert.direct.searchParams)),e.pin&&(i.geocoder_pin=1),e.type&&(i.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return(0,b.V)(e.bounds,t)})&&(i.business_rll=e.routeCoordinates.map(function(e){return(0,y.s)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(i.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(i.suggest_reqid=e.suggestReqid),e.serpId&&(i.serpid=e.serpId),(e.parentReqId||C||t.searchPreloadedResults)&&(i.parent_reqid=e.parentReqId||C||t.searchPreloadedResults.requestId),e.geoWhere&&(i.geowhere=(0,y.s)(e.geoWhere,{reverse:!0})),e.businessMode&&(i.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(i.business_show_closed=e.businessShowClosed?1:0),e.ull&&(i.ull=(0,y.s)(e.ull)),t.experiments.ui.a11ySearchFilters&&(i.a11ySearchFilters=1),(0,r._)({},i,e.rawParams,w.DB(t.query,t.experiments))}let x=R},9209:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r,o,i=n(8007),a=n(7363),s=n(745),l=n(1336),c={offsetWidth:0,offsetHeight:0},u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=a.createRef(),n._calcSizes=function(e){return new Promise(function(t){n.setState({render:e},function(){var e,r,o,i=null!=(o=null==(r=n._ref.current)?void 0:null==(e=r.children)?void 0:e[0])?o:c;t({width:i.offsetWidth,height:i.offsetHeight})})})},n.state={render:function(){return null}},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setCalcSizes(this._calcSizes)},n.render=function(){return a.createElement("div",{ref:this._ref},this.state.render())},t}(a.PureComponent);let d=function(e,t){var n=function(){var n,r;return o||((n=window.document.createElement("div")).setAttribute("style","position: absolute; top: -1000px; left: -1000px"),window.document.body.appendChild(n),r=(0,s.s)(n),o=new Promise(function(e){r.render(a.createElement(l.iV,{value:t},a.createElement(u,{setCalcSizes:e})))})),o.then(function(t){return t(e)})};return r=r?r.then(n):n()}},958:(e,t,n)=>{"use strict";function r(e,t,n){var r=(void 0===n?{}:n).useRealty,o=e.realty;return(null==o?void 0:o.company.phone)&&(void 0===r||r)&&!e.advert?[{number:o.company.phone,counter:o.company.phoneCounter?o.company.phoneCounter+"&source=map&crc="+t.xscriptCsrfToken:void 0,type:"phone",info:"Офис продаж"}]:e.phones||[]}n.d(t,{Po:()=>r})},2626:(e,t,n)=>{"use strict";n.d(t,{bL:()=>R,lR:()=>C});var r=n(1912),o=n(2967),i=n(4381),a=n(2370),s=n(9802);function l(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var u={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,m=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f(e){return e?parseInt(e):1}function h(e){return e&&parseFloat(e.replace(",","."))||0}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function g(e){return e%400==0||e%4==0&&e%100!=0}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===_(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}var b={};function E(e,t){l(1,arguments);var n,r,o,i,a,s,u,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==o?o:b.weekStartsOn)&&void 0!==r?r:null===(u=b.locale)||void 0===u?void 0:null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=y(e),f=m.getDay();return m.setDate(m.getDate()-((f<p?7:0)+f-p)),m.setHours(0,0,0,0),m}function w(e,t){l(1,arguments);var n=y(e);return Math.round((E(n,t).getTime()-(function(e,t){l(1,arguments);var n,r,o,i,a,s,u,d,p=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(u=b.locale)||void 0===u?void 0:null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),m=function(e,t){l(1,arguments);var n,r,o,i,a,s,u,d,p=y(e),m=p.getFullYear(),f=c(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:b.firstWeekContainsDate)&&void 0!==r?r:null===(u=b.locale)||void 0===u?void 0:null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setFullYear(m+1,0,f),h.setHours(0,0,0,0);var v=E(h,t),g=new Date(0);g.setFullYear(m,0,f),g.setHours(0,0,0,0);var _=E(g,t);return p.getTime()>=v.getTime()?m+1:p.getTime()>=_.getTime()?m:m-1}(e,t),f=new Date(0);return f.setFullYear(m,0,p),f.setHours(0,0,0,0),E(f,t)})(n,t).getTime())/6048e5)+1}var S=["break","opening_soon","closing_soon"];function C(e,t,n){void 0===n&&(n={});var r,o=e.status,i=e.currentWorkingStatus,a=n.short?null==i?void 0:i.shortText:null==i?void 0:i.text;return{text:n.showMoved&&(null==(r=e.businessProperties)?void 0:r.moved_to)?"Организация переехала":"open"===o?null!=a?a:"График работы не указан":({"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"})[o],state:{closed:"open"!==o||!!(i&&!i.isOpenNow),"changing-soon":!!i&&!!i.tag&&i.tag.some(function(e){return S.includes(e)}),"no-data":!a}}}function R(e,t){if(e.workingTime){var n=a.x2(a.$_(t)).getDay(),_=function(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=a.x2(a.$_(t));return n.reduce(function(e,n){var o=function(e,t){l(1,arguments);var n,r,o,i=c(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var a=function(e){var t,n={},r=e.split(u.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],u.timeZoneDelimiter.test(n.date)&&(n.date=e.split(u.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var o=u.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(a.date){var s=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?o:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,i);r=function(e,t){if(null===t)return new Date(NaN);var n,r,o=e.match(d);if(!o)return new Date(NaN);var i=!!o[4],a=f(o[1]),s=f(o[2])-1,l=f(o[3]),c=f(o[4]),u=f(o[5])-1;if(i)return c>=1&&c<=53&&u>=0&&u<=6?((n=new Date(0)).setUTCFullYear(t,0,4),r=n.getUTCDay()||7,n.setUTCDate(n.getUTCDate()+((c-1)*7+u+1-r)),n):new Date(NaN);var p=new Date(0);return s>=0&&s<=11&&l>=1&&l<=(v[s]||(g(t)?29:28))&&a>=1&&a<=(g(t)?366:365)?(p.setUTCFullYear(t,s,Math.max(a,l)),p):new Date(NaN)}(s.restDateString,s.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var _=r.getTime(),y=0;if(a.time&&isNaN(y=function(e){var t=e.match(p);if(!t)return NaN;var n=h(t[1]),r=h(t[2]),o=h(t[3]);return(24===n?0===r&&0===o:o>=0&&o<60&&r>=0&&r<60&&n>=0&&n<25)?36e5*n+6e4*r+1e3*o:NaN}(a.time)))return new Date(NaN);if(a.timezone){if(isNaN(o=function(e){if("Z"===e)return 0;var t=e.match(m);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return o>=0&&o<=59?n*(36e5*r+6e4*o):NaN}(a.timezone)))return new Date(NaN)}else{var b=new Date(_+y),E=new Date(0);return E.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),E.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),E}return new Date(_+y+o)}(n),i=function(e){return l(1,arguments),y(e).getDay()}(o),a=w(o,{weekStartsOn:1})===w(r,{weekStartsOn:1});return!e[i]&&a&&(e[i]=(0,s.p6)(o,t)),e},{})}(e.businessProperties,t);return(0,r._)(e.workingTime.slice(1)).concat([e.workingTime[0]]).map(function(e,r){var s,l=(r+1)%7,c=(0,o.Z)(i.sb[l].slice(0,2));return e?1===e.length&&0===a.Hg(e[0].to,e[0].from)?(s="Круглосуточно",c+=" 00:00-23:59"):(s=e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+" – "+a.BB(n)}),c+=" "+e.map(function(e){var t=e.from,n=e.to;return a.BB(t)+"-"+a.BB(n)}).join(",")):(s="Выходной",c=""),{dayName:(0,i.G7)(t,i.sb[l]),text:s,isWeekend:!e,isToday:n===l,changedDate:_[l],meta:c}})}}},9625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(8007),o=n(1912),i=n(7363),a=n(1336),s=n(8342),l=n(1260),c=n(7048),u=n(1886),d=n(1354),p=n(8597),m={Polygon:.165,MultiLineString:.05},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timestamp=0,n._intensityRaf=-1,n._calculateIntensity=function(){if(n._stopAnimateIntensity(),n._getGeometry()){var e=n._getTargetIntensity();n.state.intensity!==e&&(n._stopAnimateIntensity(),n._startAnimateIntensity())}},n._startAnimateIntensity=function(){n._intensityRaf=window.requestAnimationFrame(n._animateIntensity)},n._stopAnimateIntensity=function(){window.cancelAnimationFrame(n._intensityRaf),n._timestamp=0},n._animateIntensity=function(){var e=n._getGeometry();if(e){var t=n._timestamp?(n.props.getToday().getTime()-n._timestamp)/33.333333333333336:1,r=m[e.type]*t,o=n._getTargetIntensity(),i=n.state.intensity,a=i<o?Math.min(o,i+r):Math.max(o,i-r);n.props.config.query["no-animation"]&&(a=o),n.setState({intensity:a}),a!==o?(n._timestamp=n.props.getToday().getTime(),n._startAnimateIntensity()):n._timestamp=0}},n._getTargetIntensity=function(){var e,t,r,i,a,s,l=n._getGeometry();if(!l)return 0;var d=n.props.searchResults.items[0],p="MultiLineString"===l.type&&d&&v(d);return("Polygon"===l.type||p)&&(e=(0,u.o)((s=[]).concat.apply(s,(0,o._)(l.coordinates))),t=n.props.mapLocation.bounds,r=n.props.mapLocation.zoom,i=(0,c.n)(e,r),a=(0,c.n)(t,r),i[0][0]<=a[0][0]&&i[0][1]<=a[0][1]&&i[1][0]>=a[1][0]&&i[1][1]>=a[1][1])?0:1},n._getDrawingStyle=function(e,t){var r=n.state.intensity;switch(e.type){case"MultiLineString":if(v(t))return{stroke:[{color:"#a3a8a8",opacity:r,width:3}],interactive:!1};return{stroke:[{color:"#000000",opacity:.18,width:6}],interactive:!1};case"Polygon":return{fill:g(t)?"#00ff00":"#ff4141",fillOpacity:.05*r,stroke:[{color:g(t)?"#359400":"#d54747",opacity:.7*r,width:2}],interactive:!1};default:return}},n._getGeometry=function(){var e=n.props.searchResults,t=e.requestDisplayGeometry;if(!t){var r=e.items[0];r&&"displayGeometry"in r&&(t=r.displayGeometry)}return(0,d.UI)(t)},n.state={intensity:0},n}(0,r._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calculateIntensity()},n.componentDidUpdate=function(e){var t=this.props;(e.mapLocation!==t.mapLocation||e.searchResults!==t.searchResults)&&this._calculateIntensity()},n.componentWillUnmount=function(){this._stopAnimateIntensity()},n.render=function(){var e=this.props.searchResults.items[0];if(!e)return null;var t=this._getGeometry();if(!t)return null;var n=this._getDrawingStyle(t,e);return i.createElement(l.Z,{geometry:t,drawingStyle:n})},t}(i.PureComponent),h=["rezervation","forest","park","garden","grass"];function v(e){return"toponym"===e.type&&"route"===e.kind}function g(e){switch(e.type){case"toponym":return"vegetation"===e.kind;case"business":return(e.categories||[]).some(function(e){return h.includes(e.class||"")});default:return!1}}let _=(0,s.ZP)((0,a.ZP)((0,p.ZP)({shouldWait:!0})(f)))},8932:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(8007),o=n(7363),i=n(4748),a=n(5846),s=n(4953),l=n(1354),c=n(7358),u=n(6653),d=n(8448),p=n(7105),m=n(980),f=n(1336),h=n(4499),v=(0,a.Z)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(n,7308))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 7308}}),g=(0,i.Z)("search-placemark-view"),_=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._onClick=function(){t.props.onClick&&t.props.onClick(t.props.result)},t._getPlacemarkData=function(){var e=t.props;return{icon:e.icon,mode:e.mode,result:e.result}},t._onMouseEnter=function(){null==t.props.onMouseEnter||t.props.onMouseEnter.call(t.props,t._getPlacemarkData())},t._onMouseLeave=function(){null==t.props.onMouseLeave||t.props.onMouseLeave.call(t.props,t._getPlacemarkData())},t._renderCounter=function(){var e,n=t.props,r="advert"in n.result&&(null==(e=n.result.advert)?void 0:e.directPixelShowUrl);return r&&n.mode&&"dot"!==n.mode?o.createElement(h.Z,{url:r}):null},t._renderEntrances=function(){var e=t.props;return e.active?o.createElement(d.Z,{result:e.result,analyticsName:"entrances",animated:!0}):null},t._renderEntranceStory=function(){var e=t.props,n=e.result;return e.active&&"business"===n.type&&n.lastMileStory?o.createElement(v,{result:n}):null},t}return(0,r._)(t,e),t.prototype.render=function(){var e=this.props,t=e.result,n=e.icon,r=e.title,i=!e.badgeText&&r&&r.position||"right",a=null;if(r){var d=null;e.badgeText&&(d=o.createElement("div",{className:g("badge")},e.badgeText));var p="bottom"!==i?n.centerY:void 0;a=o.createElement("div",{className:g("title"),style:{marginTop:p}},r.element,d)}var f=l.Ye(t),h="brandingId"in t&&t.brandingId||"advert"in t&&t.advert&&t.advert.pinBranding?"branding":f?"rubric":"default",v={marginTop:-n.baseY,marginLeft:"left"===i?n.baseX:"right"===i?-n.baseX:void 0};return o.createElement(s.ZP,{name:e.analyticsName||"placemark",nodeState:{type:l.Dr(t),gml_id:t.analyticsId,pinPriority:"business"===t.type?t.pinPriority:void 0,logId:t.logId,permalink:"id"in t?t.id:void 0,uri:c.fS(t),reqid:t.requestId,suggest_reqid:t.suggestRequestId,branding:"brandingId"in t?t.brandingId:void 0,active:e.active,lowRelevance:"lowRelevance"in t&&t.lowRelevance,relatedAdvertType:"relatedAdvertType"in t&&t.relatedAdvertType||void 0,mode:e.mode,iconType:h},logClick:!0},o.createElement(u.Z,{coordinates:e.coordinates,zIndex:e.zIndex,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement("div",{className:g({position:i}),"data-object":"search-placemark","data-id":e.result.id,"data-log-id":e.result.logId,"data-mode":e.mode,"data-coordinates":e.coordinates.join(","),"data-icon-type":h,style:(0,m.cq)(e.config,v)},o.createElement("div",{className:g("icon"),style:{width:n.width,height:n.height}},n.element),a)),e.isLayerInitialized?null:this._renderEntrances(),this._renderEntranceStory(),this._renderCounter())},t}(o.PureComponent);let y=(0,p.ZP)((0,f.ZP)(_))},829:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Q});var r=n(2678),o=n(4788),i=n(8007),a=n(7363),s=n(8188),l=n(1354),c=n(4748),u=n(1336),d=n(1494),p=n(1469),m=(0,c.Z)("search-placemark-title-modular-hint-view");let f=function(e){var t=(0,u.ZR)(),n=function(){if("RATING"!==e.hint.type||!e.hint.text)return null;var n=Number.parseFloat(e.hint.text);return Number.isNaN(n)?null:a.createElement("span",{className:m()},a.createElement(d.Z,{name:"star-12",className:m("rating-image"),inline:!0}),a.createElement("span",{className:m("rating")},p.D$(n,t.lang,{min:1,max:1})))}()||function(){if("WORKING_HOURS"!==e.hint.type)return null;var t,n,r,o,i=(null==(n=e.hint.properties)?void 0:null==(t=n.workingHours)?void 0:t.shortText)||e.hint.text;if(!i)return null;var s=(null==(o=e.hint.properties)?void 0:null==(r=o.workingHours)?void 0:r.isOpen)===!1;return a.createElement("span",{className:m({red:s})},i)}()||(e.hint.text?a.createElement("span",{className:m()},e.hint.text):null);return n?a.createElement(a.Fragment,null,e.children(n)):null};var h=(0,c.Z)("search-placemark-title"),v=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t._renderTitleRating=function(){var e,n=null==(e=t.props.subtitleHints)?void 0:e.find(function(e){return"RATING"===e.type});return n?a.createElement(f,{hint:n},function(e){return a.createElement("div",{className:h("title-rating")},e)}):null},t._renderTitle=function(){return a.createElement("div",{className:h("title")},a.createElement("div",{className:h("title-text")},t.props.title),t._renderTitleRating())},t._renderSubtitleHint=function(e,t){return"RATING"===e.type?null:a.createElement(f,{key:t,hint:e},function(e){return a.createElement("span",{className:h("subtitle-item")},e)})},t._renderSubtitle=function(){return t.props.subtitleHints&&t.props.showSubtitle?a.createElement("div",{className:h("subtitle")},t.props.subtitleHints.map(t._renderSubtitleHint)):null},t._renderMultilineSubtitle=function(){return a.createElement(a.Fragment,null,a.createElement("div",{className:h("multiline-subtitle-width")},t._renderSubtitle()),a.createElement("div",{className:h("multiline-subtitle")},t._renderSubtitle()))},t}return(0,i._)(t,e),t.prototype.render=function(){var e=this.props;return a.createElement("div",{className:h({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},this._renderTitle(),e.multilineSubtitle?this._renderMultilineSubtitle():this._renderSubtitle())},t}(a.PureComponent);let g=(0,u.ZP)(v);var _=n(9410),y=(0,c.Z)("poi-placemark-title");let b=function(e){var t=(0,_.Z)(e.title,{length:40}),n=e.hover?void 0:{color:e.color,WebkitTextFillColor:e.color};return a.createElement("div",{className:y({hover:e.hover}),style:n},t.split(" ").map(function(e,t){return a.createElement("span",{key:t,className:y("word")},e)}))};var E=n(2626),w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchIcon=function(){n.props.icon.promise.then(function(e){n.setState({element:e})})},n.state={},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchIcon()},n.componentDidUpdate=function(e){this.props.icon.promise!==e.icon.promise&&this._fetchIcon()},n.render=function(){var e=this.state.element;return e?(null==this.props.children?void 0:this.props.children.call(this.props,e))||e:null},t}(a.Component),S=(0,c.Z)("search-placemark-icon");let C=function(e){var t,n,r,i="lowRelevance"in e.result,s={mode:e.mode,"group-mode":e.groupMode,state:e.state,"has-advert":l.xi(e.result),"low-relevance":i,closed:(t=e.result,n=e.config,"business"===t.type&&("open"!==t.status||E.lR(t,n).state.closed))},c="business"===e.result.type?i?e.result.businessProperties&&e.result.businessProperties.geoproduct_poi_color||"#999":null==(r=e.style)?void 0:r.color:void 0,u=c&&"hover"!==e.state?{color:c}:void 0;return a.createElement("div",{className:S(s),style:(0,o._)({},u)},a.createElement(w,{icon:e.icon}))};var R=n(2467),P=n(9318),k=n(980),x=(0,c.Z)("search-placemark-icons"),I={dot:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n',width:22,height:22},base:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n',width:34,height:34},active:{source:'<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>',className:x("active"),width:60,height:68,baseY:64,centerY:28}};function M(e){var t=e.iconSource,n=e.contentPromise,r=e.config;return(0,o._)({},Z(t),{promise:n?n.then(function(e){return T({iconSource:t,content:e,config:r})}):Promise.resolve(T({iconSource:t,config:r}))})}function T(e){var t=e.iconSource,n=e.content,r=e.config,i=Z(t),s=i.width,l=i.height,c=i.centerX,u=i.centerY,d={className:t.className,dangerouslySetInnerHTML:{__html:t.source}};return n?a.createElement("div",{style:{position:"relative",width:s,height:l}},a.createElement("div",d),a.createElement("div",{style:(0,k.cq)({isRtl:r.isRtl},{position:"absolute",left:c,top:u})},"point"===n?a.createElement("div",{className:x("content")}):n)):a.createElement("div",(0,o._)({style:{width:s,height:l}},d))}function Z(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}var D=(0,c.Z)("rubric-placemark-icons-provider"),L={geoproduct:{source:'<svg fill="none" height="40" width="34" xmlns="http://www.w3.org/2000/svg"><filter id="24609e80b326bd45d5a64be8fc7ffd36__a" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" width="32" x="1" y="2"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/></filter><g filter="url(#24609e80b326bd45d5a64be8fc7ffd36__a)"><path fill="#000" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/></g><path fill="#fff" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/><path fill="currentColor" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/><path fill="#000" class="tint" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/></svg>',width:34,height:40,centerY:17,baseY:38},"low-relevance":{source:'<svg width="28" height="34" viewBox="0 0 28 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2247 28.9111C12.133 27.9459 11.6447 27.1349 10.8253 26.292C10.2356 25.6855 9.54841 25.1305 8.78321 24.5125C8.44143 24.2365 8.08408 23.9479 7.71292 23.6366C5.37129 21.6722 2.89999 19.1042 2.89999 14.4658C2.89999 8.35203 7.86976 3.39999 14 3.39999C20.1304 3.39999 25.1 8.35434 25.1 14.4658C25.1 19.1025 22.6402 21.6727 20.3021 23.6393C19.9262 23.9555 19.5645 24.2481 19.2186 24.5279C18.46 25.1415 17.7778 25.6935 17.1898 26.2968C16.3675 27.1407 15.8737 27.9527 15.7745 28.9181L15.765 29.0107C15.7161 29.4865 15.4554 29.874 15.1734 30.1276C14.8914 30.3813 14.4782 30.6 13.9988 30.6C13.0882 30.6 12.3249 29.9125 12.2344 29.008L12.2247 28.9111Z" fill="white" fill-opacity="0.6"/><path d="M4.00143 14.5004C4.00143 8.97615 8.47795 4.50179 14 4.50179C19.5221 4.50179 23.9986 8.9783 23.9986 14.5004C23.9986 22.8325 15.3405 23.7089 14.8332 28.6624C14.83 28.694 14.8269 28.7245 14.8239 28.7537C14.785 29.1334 14.3805 29.4982 13.9989 29.4982C13.5738 29.4982 13.218 29.1765 13.1759 28.7535C13.173 28.7243 13.1699 28.694 13.1668 28.6624C12.6965 23.6996 4.00143 22.8325 4.00143 14.5004Z" fill="currentColor"/></svg>\n',width:28,height:34,baseY:32,centerX:14,centerY:15},card:{source:'<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 14c0 5.508 3.18 10.273 7.805 12.558 3.026 1.573 4.847 3.215 5.463 4.928a.778.778 0 0 0 1.464 0c.616-1.713 2.437-3.355 5.463-4.928C24.819 24.273 28 19.508 28 14c0-7.732-6.268-14-14-14S0 6.268 0 14z" fill="currentColor"/></svg>',width:34,height:40,baseY:38,centerX:14,centerY:14}},A={};function N(e){var t=e.mode,n=e.iconsPromise,r=e.pinType,o=e.config;return{default:M({iconSource:"base"===t&&r&&L[r]||I[t],contentPromise:n.then(function(e){return a.createElement("div",{className:D(""+t+"-content",{"pin-type":r}),dangerouslySetInnerHTML:{__html:e[t]}})}),config:o})}}let z={get:function(e,t,n){var r=function(e,t){if(!A[e]){var n=["small","normal"].map(function(n){return P.Gr({type:"rubrics",name:e,size:n},t)||""}).map(function(e){return e?(0,R.Z)({url:e,parser:"string"}):Promise.resolve("")});A[e]=Promise.all(n).then(function(e){var t=(0,s._)(e,2);return{base:t[0],active:t[1]}})}return A[e]}(e,t);return{base:N({mode:"base",iconsPromise:r,pinType:n,config:t}),active:N({mode:"active",iconsPromise:r,config:t})}}};var U=n(5766),F={dot:{width:18,height:18},base:{width:34,height:40,baseY:36},active:{width:60,height:68,baseY:64,centerY:28}};let O={get:function(e,t){return Object.entries(e).reduce(function(e,n){var r=(0,s._)(n,2),i=r[0],a=r[1];return(0,o._)({},e,(0,U._)({},i,Object.entries(a||{}).reduce(function(e,n){var r,a,l,c=(0,s._)(n,2),u=c[0],d=c[1];return(0,o._)({},e,(0,U._)({},u,M({iconSource:(0,o._)({source:((r=d).startsWith("https://")||(r="https://avatars.mds.yandex.net/get-{id}_%s".replace("{id}",r.replace(/--/g,"/"))),a=Math.max(2,Math.ceil(window.devicePixelRatio||1)),l=r.replace("%s","x"+a),'<img height="'+F[i].height+'" width="'+F[i].width+'" src="'+l+'" />')},F[i]),config:t})))},{})))},{})}};var q={width:60,height:68,baseY:64,centerY:28},B={transit:26};let H={get:function(e){var t,n,r,i,a,s=e.iconUrl,l=e.tags,c=e.config,u=(l||[]).find(function(e){return Object.keys(B).includes(e)});return{active:(n=(t={iconUrl:s,meta:(0,o._)({},q,{centerY:u&&B[u]||q.centerY}),config:c}).iconUrl,r=t.meta,i=t.config,a="width: "+r.width+"px; height: "+r.height+"px;background: url("+n+") 50% bottom no-repeat; background-size: contain",{default:M({iconSource:(0,o._)({source:'<div class="poi-icon-provider" style="'+a+'" />'},r),config:i})})}}};var W=n(9209),G=n(6897),j=n(7358);function V(e,t){return"children"in t?t.children.map(function(t){return V(e,t)}).find(Boolean)||null:e(t)?t:null}n(1982),n(3647);var Y={},X=n(8932),K=n(2869),$=n(7313),J=function(e){function t(t){var n;return(n=e.call(this,t)||this)._calcPlacemark=function(e){K.Z.cancel(n._calcPlacemarkAction);var t,r,i,c,u,d,p,m=n.state.hover?"hover":"default",f=e.result,h=e.mode,v=e.config;n._calcPlacemarkAction=K.Z.create(Promise.all([(r=(t=p={result:f,mode:h,state:m,config:v}).state||"default",i=["title","subtitle"].includes(t.mode)?"base":t.mode,d=(null==(u=null==(c=function(e){var t=e.result,n=l.Ye(t),r="flyover"in t&&(null==(o=t.flyover)?void 0:o.selectedIconUrl);if(r)return H.get({iconUrl:r,config:e.config});if("lowRelevance"in t)return z.get(n||"",e.config,"low-relevance");if("business"===t.type&&!t.direct&&t.advert&&t.advert.pinBranding&&"neuro-chat"!==e.groupMode)return O.get(t.advert.pinBranding,e.config);if("hotspotProperties"in t&&t.hotspotProperties&&t.hotspotProperties.selectedIconUrl)return H.get({iconUrl:t.hotspotProperties.selectedIconUrl,tags:t.hotspotProperties.tags,config:e.config});if(n){var o,i,a=((null==(i=e.style)?void 0:i.forceGeoproduct)||l.xi(t))&&"default"===(e.groupMode||"default")?"geoproduct":"default";return z.get(n,e.config,a)}}(t))?void 0:c[i])?void 0:u[r])||(null==u?void 0:u.default)||M({iconSource:I[i],contentPromise:Promise.resolve("dot"!==i?"point":void 0),config:t.config}),(0,o._)({},d,{element:a.createElement(C,{result:t.result,state:r,icon:d,groupMode:t.groupMode,mode:i,config:t.config,style:t.style})})),function(e){var t,n,r,i,s,c,u,d="shortTitle"in e.result&&e.result.shortTitle||e.result.title||"",p="modularPin"in e.result?e.result.modularPin.subtitleHints:void 0,m="hover"===e.state;if(e.hideTitle||!d||["dot","base"].includes(e.mode)&&!m)return Promise.resolve(void 0);e.rootFolder&&l.yD(e.result)&&(c=null==(t=e.result,n=e.rootFolder,r=j.fS(t),u=V(function(e){return e.uri===r},n)||(i={coordinates:t.displayCoordinates},V(function(e){var t=j.BW(e.uri);return j.l4(e.uri)&&null!==t&&(0,G.J)(t,i.coordinates)},n)))?void 0:u.title);var f="lowRelevance"in e.result,h="business"===e.result.type,v={title:null!=c?c:d,subtitleHints:p,showSubtitle:["active","subtitle"].includes(e.mode)||m&&!h,background:"active"!==e.mode,isLowRelevance:f,disableTruncate:!0,multilineSubtitle:"modularPin"in e.result?e.result.modularPin.allowMultilineSubtitle:void 0},_=f&&"business"===e.result.type&&(null==(s=e.result.businessProperties)?void 0:s.geoproduct_poi_label_color)||void 0,y=e.titlePosition||"right",E=f&&!["dot","active"].includes(e.mode)&&e.config.isVectorEnabled?a.createElement(b,{title:v.title,color:_,hover:"hover"===e.state}):a.createElement(g,(0,o._)({},v,{position:y})),w=JSON.stringify(v);return Y[w]=Y[w]||(0,W.Z)(function(){return E},e.config),Y[w].then(function(e){return(0,o._)({},e,{element:E,position:y})})}(p)]).then(function(e){var t=(0,s._)(e,2);return{icon:t[0],title:t[1]}}),{success:function(e){return n.setState({placemark:e})}})},n._onMouseEnter=function(){var e=(0,r._)(n).props;n.setState({hover:!0},function(){return n._calcPlacemark(e)})},n._onMouseLeave=function(){var e=(0,r._)(n).props;n.setState({hover:!1},function(){return n._calcPlacemark(e)})},n.state={hover:!1},n}(0,i._)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calcPlacemark(this.props)},n.componentDidUpdate=function(e){e!==this.props&&this._calcPlacemark(this.props)},n.componentWillUnmount=function(){K.Z.cancel(this._calcPlacemarkAction)},n.render=function(){var e=this.state.placemark;if(!e)return null;var t=this.props,n=t.result,r=$.I.search[t.mode];return a.createElement(X.Z,(0,o._)({coordinates:t.coordinates,result:n},e,{analyticsName:t.analyticsName,zIndex:this.state.hover?r+1:r,onClick:t.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(a.Component);let Q=(0,u.ZP)(J)},2830:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2467),o=n(5164);let i={getRoadEvents:function(e,t){return(0,o.Z)("traffic/getRoadEvents",{query:{id:e}},t)},getRoadEvent:function(e,t){return(0,o.Z)("traffic/getRoadEvent",{query:{eventId:e}},t)},getForecast:function(e,t){return(0,o.Z)("traffic/getForecast",{query:{id:e}},t)},actual:{getLevel:function(e,t){return(0,o.Z)("traffic/getLevelInfo",{query:{ids:e.map(String)}},t)}},archive:{getMetaData:function(e,t,n){return(0,r.Z)({url:n.hosts.trafficArchive+"description/traffic-light",query:{tm:t,ids:e.join(","),l:n.locale},jsonp:!0}).then(function(t){var n=(t.data.features||[]).find(function(t){var n=t.properties;return!!(n&&n.HotspotMetaData&&e.includes(n.HotspotMetaData.id))});if(!n)return{level:null};var r=n.properties&&n.properties.JamsMetaData.level;return{level:void 0!==r?r:null}})}}}},9270:(e,t,n)=>{"use strict";n.d(t,{ZU:()=>o,t0:()=>i}),n(2370);var r={closed:"Перекрытие движения",drawbridge:"Развод моста",reconstruction:"Дорожные работы",accident:"ДТП",police:"Камера",other:"Прочее",chat:"Прочее",danger:"Опасный участок"};function o(e){return e||0===e?e>=7?"red":e>=4?"yellow":"green":"gray"}function i(e){return e.type&&r[e.type]||r.other}},8380:(e,t,n)=>{"use strict";function r(e,t){return e.uatraits.isMobile?"maps-touch-"+("iOS"===e.uatraits.OSFamily?"ios":"android")+"-"+t:"maps-desktop-"+t}n.d(t,{Qg:()=>r}),n(3272)},1104:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r={tabIndex:-1,"aria-hidden":!0}},7418:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(4788),o=n(8188),i=n(3243),a=(0,n(1851).Z)(Object.getPrototypeOf,Object),s=n(8533),l=Object.prototype,c=Function.prototype.toString,u=l.hasOwnProperty,d=c.call(Object);let p=function(e){if(!(0,s.Z)(e)||"[object Object]"!=(0,i.Z)(e))return!1;var t=a(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d},m=function e(t,n){var i=(0,r._)({},t);return Object.entries(n).forEach(function(t){var n=(0,o._)(t,2),r=n[0],a=n[1];i.hasOwnProperty(r)&&p(a)?i[r]=e(i[r],a):i[r]=a}),i}},4381:(e,t,n)=>{"use strict";n.d(t,{sb:()=>r,G7:()=>o});var r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function o(e,t){return({sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"})[t]}},5569:(e,t,n)=>{"use strict";function r(e){return e>900?({distance:a(e/1e3,2)}).distance+" км":({distance:a(e,2)}).distance+" м"}function o(e,t){var n="quadratic"===t?1e3:1;return e>900*n?({distance:i(s(e/(1e3*n)))}).distance+" км":({distance:i(s(e))}).distance+" м"}function i(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1 ")}function a(e,t){if(void 0===t&&(t=1/0),t<1)throw Error("Can't round to significance of "+t+".");var n=Math.max(0,Math.round(e).toString().length-t);return Number(Math.round(e/Math.pow(10,n))+Array(n).fill("0").join(""))}function s(e){if(e>100)return Math.round(e);var t=Math.pow(10,e>10?1:2);return Math.round(e*t)/t}n.d(t,{Bb:()=>r,Lr:()=>a,jq:()=>o})},1392:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,A:65,D:68,P:80,S:83,W:87}},980:(e,t,n)=>{"use strict";n.d(t,{cq:()=>s});var r=n(8188),o={paddingLeft:"paddingRight",paddingRight:"paddingLeft",marginLeft:"marginRight",marginRight:"marginLeft",left:"right",right:"left",borderLeft:"borderRight",borderRight:"borderLeft"},i={padding:function(e){return a({isRtl:!0},e)},margin:function(e){return a({isRtl:!0},e)}};function a(e,t){return e.isRtl?[t[0],t[3],t[2],t[1]]:t}function s(e,t){return e.isRtl?Object.entries(t).reduce(function(e,t){var n=(0,r._)(t,2),a=n[0],s=n[1];return i[a]?e[a]=i[a](s):e[o[a]||a]=s,e},{}):t}},8847:(e,t,n)=>{"use strict";function r(e){var t;return e.uatraits.isMobile&&(null==(t=e.query.source)?void 0:t.includes("wizbiz_new_map"))}n.d(t,{d:()=>r})},7313:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r={screenshotDialog:99999,clipboard:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},advert:5e3,dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},2133:(e,t,n)=>{"use strict";function r(e){return e.uatraits.isMobile&&!!(e.query.webview||e.query["feedback-webview"])}n.d(t,{W:()=>r}),n(129),n(3647),n(7434),n(1740)},6955:(e,t,n)=>{"use strict";n.d(t,{SF:()=>o,Sv:()=>i,zw:()=>a,wo:()=>s});var r=n(1372),o=256,i=130,a=32,s=function(e){if("tile"===e.type){var t=(0,r.pi)({},e);return e.raster&&(t.raster=(0,r.pi)({},e.raster)),e.vector&&(t.vector=(0,r.pi)({},e.vector)),t}return(0,r.pi)({},e)}},284:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>i,ZE:()=>a,$7:()=>function e(t){var n;return"FeatureCollection"===t.type?(n=[]).concat.apply(n,t.features.map(function(t){return e(t)})):[t]},JO:()=>s});var r=n(1372),o=n(6794);function i(e,t){return(0,r.pi)((0,r.pi)({},e),{geometry:e.geometry&&a(e.geometry,t)})}function a(e,t){switch(e.type){case"Point":return(0,r.pi)((0,r.pi)({},e),{coordinates:t(e.coordinates)});case"LineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(t)});case"MultiLineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"Polygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(t)})});case"MultiPolygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(function(e){return e.map(function(e){return e.map(t)})})});default:(0,o._y)(Error("Unexpected geometry type: ".concat(e.type)))}}function s(e){"string"!=typeof e.id&&(0,o._y)(Error("Feature or collection id must be a string"))}},9599:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="hidden"},1480:(e,t,n)=>{"use strict";n.d(t,{XK:()=>l,X_:()=>s,F7:()=>u});var r=n(1372),o=n(6794),i=n(6701),a=n(6585),s="__empty__";function l(e){var t,n,l,c,u,d,p={id:e.id,grouppedWith:e.grouppedWith,source:e.source?e.source:s,type:e.type?e.type:"default",implementation:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.implementation){var r=e.implementation.apply(e,t);if(r)return r}return i._.apply(void 0,t)},options:{raster:{},vector:{}}};return!p.grouppedWith&&(null===(n=null===(t=e.options)||void 0===t?void 0:t.vector)||void 0===n?void 0:n.parentLayerId)&&(p.grouppedWith=null===(c=null===(l=e.options)||void 0===l?void 0:l.vector)||void 0===c?void 0:c.parentLayerId),(null==(d=null===(u=e.options)||void 0===u?void 0:u.raster)?void 0:d.implementation)&&(e.implementation||(e.implementation=function(){var e=d.implementation;return e.prototype instanceof a.x||(0,o._y)(Error("Implementation must be derived from CustomDomLayer")),e})),e.options&&(e.options.raster&&(p.options.raster=(0,r.pi)({},e.options.raster)),e.options.vector&&(p.options.vector=(0,r.pi)({},e.options.vector))),p}var c=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;function u(e,t){var n=e.match(c);n&&0!==n[0].length||(0,o._y)(Error("Bad string layer spec '".concat(e,"'")));for(var i=n[1],a=n[2],s=n[3],l=s?s.split(","):[],u=Object.create(null),d=0;d<l.length;d++)u[l[d]]=!0;return{id:e,source:i,type:a,options:{raster:(0,r.pi)((0,r.pi)({},u),null==t?void 0:t.raster),vector:(0,r.pi)((0,r.pi)({},u),null==t?void 0:t.vector)}}}},6701:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,M:()=>o});var r=function(e){var t;return null===(t=o[e.effectiveMode])||void 0===t?void 0:t.call(o,e)},o={raster:function(){return null},vector:function(){return null}}},4056:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(3080);function o(e){var t=e.getLayersEx(),n=t.topRasterLayers,o=t.mainLayers,i=new r.Set;n.forEach(function(e){return i.add(e.source)}),o.forEach(function(e){return i.add(e.source)});var a=[];return i.forEach(function(e){return a.push(e)}),a.map(function(t){return e.getDataSource(t)}).map(function(e){var t;return(null==e?void 0:e.type)==="tile"&&(null===(t=null==e?void 0:e.copyrights)||void 0===t?void 0:t.join(" "))}).filter(Boolean).join(" ")}},3080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mathSign:()=>i,mathLog2:()=>a,mathLog10:()=>s,arrayFindIndex:()=>f,arrayFind:()=>h,arrayFrom:()=>v,arraySome:()=>y,Symbol:()=>c,Map:()=>d,Set:()=>m,WeakMap:()=>p,MAX_SAFE_INTEGER:()=>l});var r=n(6794),o={},i=Math.sign?Math.sign.bind(Math):function(e){return e<0?-1:0===e?0:1},a=Math.log2?Math.log2.bind(Math):function(e){return Math.log(e)*Math.LOG2E},s=Math.log10?Math.log10.bind(Math):function(e){return Math.log(e)/Math.LN10},l=Number.MAX_SAFE_INTEGER||9007199254740991,c="undefined"==typeof Symbol?function(e){return"__Symbol_".concat(e,"_").concat(Date.now(),"_").concat(Math.random())}:Symbol,u=function(e){return new e([[o,1]]).has(o)?function(t){return new e(t)}:function(t){var n=new e;if(void 0!==t)for(var r=0;r<t.length;r++){var o=t[r],i=o[0],a=o[1];n.set(i,a)}return n}},d=u(Map),p=u(WeakMap),m=new Set([o]).has(o)?function(e){return new Set(e)}:function(e){var t=new Set;if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n];t.add(r)}return t};d.prototype=Map.prototype,p.prototype=WeakMap.prototype,m.prototype=Set.prototype;var f=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){for(var r=0;r<e.length;r++)if(t.call(n,e[r],r,e))return r;return -1},h=Array.prototype.find?function(e,t,n){return e.find(t,n)}:function(e,t,n){var r=f(e,t,n);return -1===r?void 0:e[r]},v=Array.from?Array.from:function(e){var t,n=Object(e);null==e&&(0,r._y)(TypeError("Array.from requires an array-like object - not null or undefined"));var o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;void 0===o||_(o)||(0,r._y)(TypeError("Array.from: when provided, the second argument must be a function"));for(var a=isNaN(t=Number(n.length))||t<=0?0:Math.min(t,l),s=_(this)?Object(new this(a)):Array(a),c=0;c<a;){var u=n[c];o?s[c]=void 0===i?o(u,c):o.call(i,u,c):s[c]=u,c+=1}return s.length=a,s},g=Object.prototype.toString;function _(e){return"function"==typeof e||"[object Function]"===g.call(e)}var y=function(e,t,n){return -1!==f(e,t,n)}},6585:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r=function(){function e(e){this._props=e}return e.prototype._requestRender=function(){this._props.requestRender()},e.prototype.render=function(){},e}()},8848:(e,t,n)=>{"use strict";n.d(t,{V:()=>l});var r=n(5930),o=n(5900),i=n(283),a=n(7048),s=n(7806);function l(e,t,n){e=n?[[Math.min(e[0][0],e[1][0])-n,Math.min(e[0][1],e[1][1])-n],[Math.max(e[0][0],e[1][0])+n,Math.max(e[0][1],e[1][1])+n]]:e;var l=(0,r.Z)(s.m6),c=(0,o.f)(t,s.m6);return(0,i.C)((0,a.n)(e,s.m6),l).some(function(e){return c[0]>=e[0][0]&&c[0]<=e[1][0]&&c[1]>=e[0][1]&&c[1]<=e[1][1]})}},1421:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(8447),o=n(8860);function i(e){return function(e){for(var t=[e[0]],n=1;n<e.length;n++){var r=t[n-1],o=e[n];r[0]>0&&o[0]<0&&r[0]>90&&o[0]<0?t.push([o[0]+360,o[1]]):r[0]<0&&o[0]>0&&r[0]<-90&&o[0]>0?t.push([o[0]-360,o[1]]):t.push(o)}return t}(function(e,t,n){for(var i=(0,r.t)(e,t,void 0),a=i.pathFunction,s=i.startPoint,l=i.startDirection,c=i.endPoint,u=i.endDirection,d=[s],p=0;p<3;p++)d=d.concat(function e(t,n,r,i,a){void 0===i&&(i=t(n)),void 0===a&&(a=t(r));var s,l,c,u=Math.PI/60,d=Math.PI/4,p=[],m=Math.abs((0,o.d)(Math.atan2(i.direction[0],i.direction[1])-Math.atan2(a.direction[0],a.direction[1]),-Math.PI,Math.PI)),f=0;if(1e-10>Math.abs(m-Math.PI)){var h=[i.point[0],90*i.direction[1]],v=[a.point[0],90*i.direction[1]];p.push(h,v,a.point)}else if(m>u){if((l=Math.ceil(m/u))<d/u||r-n==0){s=(r-n)/l;for(var g=1;g<=l;g++)p.push(t(n+s*g).point)}else s=(r-n)/2,c=t(f=n+s),p=(p=p.concat(e(t,n,f,i,c))).concat(e(t,f,r,c,a))}else p.push(a.point);return p}(a,p/3,(p+1)/3,0===p?{point:s,direction:l}:void 0,2===p?{point:c,direction:u}:void 0));return d}(e[0],e[1]))}},283:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=Math.floor(e/n),o=Math.floor(t/n),i=[],a=r;a<=o;a++)i.push([a===r?e-r*n:0,a===o?t-o*n:n]);return i}function o(e,t){var n=r(e[0][0],e[1][0],t),o=r(e[0][1],e[1][1],t),i=[];return n.forEach(function(e){o.forEach(function(t){i.push([[e[0],t[0]],[e[1],t[1]]])})}),i}n.d(t,{C:()=>o})},1886:(e,t,n)=>{"use strict";n.d(t,{o:()=>l});var r=n(8860),o=n(5900),i=n(5930),a=n(309),s=n(7806);function l(e){var t,n,l,c,u,d=[[0,0],[0,0]];return e.length&&(d=(t=e.map(function(e){return(0,o.f)(e,s.m6)}),n=(0,i.Z)(s.m6),l=s.dg,c=[[1/0,1/0],[-1/0,-1/0]],u=t.length,[0,1].forEach(function(e){if(l[e]){t.sort(function(t,n){return t[e]-n[e]});var o=0;t.forEach(function(i,a){var s=a+1,l=s===u?t[0]:t[s],d=(0,r.d)(l[e]-i[e],0,n);d>=o&&(o=d,c[0][e]=l[e],c[1][e]=i[e])}),c[0][e]>c[1][e]&&(c[1][e]+=n)}else t.forEach(function(t){c[0][e]=Math.min(c[0][e],t[e]),c[1][e]=Math.max(c[1][e],t[e])})}),c).map(function(e){return(0,a.W)(e,s.m6)})),d}},2690:(e,t,n)=>{"use strict";function r(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}n.d(t,{g:()=>r})},9029:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(5900);function o(e,t,n,o,i){for(var a=0;a<e.length-1;a++){var s=[e[a],e[a+1]];if(function(e,t,n){var r=t[0],o=t[1],i=n[0]-r,a=n[1]-o,s=i*i+a*a,l=0;0!==s&&(l=Math.max(0,Math.min(1,l=((e[0]-r)*i+(e[1]-o)*a)/s)));var c=r+l*i,u=o+l*a,d=e[0]-c,p=e[1]-u;return Math.sqrt(d*d+p*p)}((0,r.f)(t,o),(0,r.f)(s[0],o),(0,r.f)(s[1],o))<n/2){var l=function(e,t){var n=t[0],r=t[1],o=[n[1]-r[1],r[0]-n[0],n[0]*r[1]-r[0]*n[1]],i=[o[1],-o[0],e[1]*o[0]-e[0]*o[1]],a=o[0]*i[1]-i[0]*o[1];return[(i[2]*o[1]-o[2]*i[1])/a,(i[0]*o[2]-o[0]*i[2])/a]}(t,[s[0],s[1]]);return i?{point:l,segmentIndex:a}:l}}}},4670:(e,t,n)=>{"use strict";function r(e){return[(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5]}n.d(t,{Y:()=>i});var o=n(7689);function i(e,t){var n=r(e),i=r(t),a=(0,o.j)(e),s=(0,o.j)(t);return Math.abs(n[0]-i[0])<(a[0]+s[0])*.5&&Math.abs(n[1]-i[1])<(a[1]+s[1])*.5}},7689:(e,t,n)=>{"use strict";function r(e){return[Math.abs(e[1][0]-e[0][0]),Math.abs(e[1][1]-e[0][1])]}n.d(t,{j:()=>r})},6504:(e,t)=>{},1372:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>o,pi:()=>i,ev:()=>a});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}},2448:e=>{"use strict";e.exports="/build/client/worker/content_provider.worker/a8398f37bf925153656e.js"},1367:e=>{"use strict";e.exports="/build/client/worker/gltf_decoder.worker/0a4ba5434ededca3d56b.js"},2678:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{_:()=>r})},2267:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>o})},5042:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(7855);let o=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:(0,r.Z)(e,t,n)}},9047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");let o=function(e){return r.test(e)}},5876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(9047),o="\ud800-\udfff",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\ud83c[\udffb-\udfff]",s="[^"+o+"]",l="(?:\ud83c[\udde6-\uddff]){2}",c="[\ud800-\udbff][\udc00-\udfff]",u="(?:"+i+"|"+a+")?",d="[\\ufe0e\\ufe0f]?",p="(?:\\u200d(?:"+[s,l,c].join("|")+")"+d+u+")*",m=RegExp(a+"(?="+a+")|(?:"+[s+i+"?",i,l,c,"["+o+"]"].join("|")+")"+(d+u+p),"g");let f=function(e){return(0,r.Z)(e)?e.match(m)||[]:e.split("")}},2967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(7338),o=n(5042),i=n(9047),a=n(5876);let s=function(e){e=(0,r.Z)(e);var t=(0,i.Z)(e)?(0,a.Z)(e):void 0,n=t?t[0]:e.charAt(0),s=t?(0,o.Z)(t,1).join(""):e.slice(1);return n.toUpperCase()+s},l=function(e){return s((0,r.Z)(e).toLowerCase())}},7961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(5140);let o=function(e){return(null==e?0:e.length)?(0,r.Z)(e,1):[]}},5087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2714);let o=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(void 0===l?s==s&&!(0,r.Z)(s):n(s,l)))var l=s,c=a}return c};var i=n(5469);let a=function(e,t){return e<t},s=function(e,t){return e&&e.length?o(e,(0,i.Z)(t,2),a):void 0}},111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9111),o=n(7226);let i=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,o.Z)(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),(0,r.Z)(e,t,{leading:i,maxWait:t,trailing:a})}},9410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(2845),o=n(5042),i=n(9047),a=n(7226),s=n(3243),l=n(8533),c=n(1162),u=n(8351),d=u.Z&&u.Z.isRegExp,p=d?(0,c.Z)(d):function(e){return(0,l.Z)(e)&&"[object RegExp]"==(0,s.Z)(e)},m=(0,n(4193).Z)("length"),f="\ud800-\udfff",h="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",v="\ud83c[\udffb-\udfff]",g="[^"+f+"]",_="(?:\ud83c[\udde6-\uddff]){2}",y="[\ud800-\udbff][\udc00-\udfff]",b="(?:"+h+"|"+v+")?",E="[\\ufe0e\\ufe0f]?",w="(?:\\u200d(?:"+[g,_,y].join("|")+")"+E+b+")*",S=RegExp(v+"(?="+v+")|(?:"+[g+h+"?",h,_,y,"["+f+"]"].join("|")+")"+(E+b+w),"g");let C=function(e){for(var t=S.lastIndex=0;S.test(e);)++t;return t};var R=n(5876),P=n(620),k=n(7338),x=/\w*$/;let I=function(e,t){var n=30,s="...";if((0,a.Z)(t)){var l="separator"in t?t.separator:l;n="length"in t?(0,P.Z)(t.length):n,s="omission"in t?(0,r.Z)(t.omission):s}var c=(e=(0,k.Z)(e)).length;if((0,i.Z)(e)){var u=(0,R.Z)(e);c=u.length}if(n>=c)return e;var d=n-(h=s,(0,i.Z)(h)?C(h):m(h));if(d<1)return s;var f=u?(0,o.Z)(u,0,d).join(""):e.slice(0,d);if(void 0===l)return f+s;if(u&&(d+=f.length-d),p(l)){if(e.slice(d).search(l)){var h,v,g=f;for(l.global||(l=RegExp(l.source,(0,k.Z)(x.exec(l))+"g")),l.lastIndex=0;v=l.exec(g);)var _=v.index;f=f.slice(0,void 0===_?d:_)}}else if(e.indexOf((0,r.Z)(l),d)!=d){var y=f.lastIndexOf(l);y>-1&&(f=f.slice(0,y))}return f+s}}}]);